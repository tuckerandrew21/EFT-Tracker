{"version":3,"sources":["../../../../../../apps/web/src/components/ui/input.tsx","../../../../../../node_modules/.pnpm/%40radix-ui%2Breact-label%402.1.8_40c2d5246712c6eaa4eeb3b25ed464ca/node_modules/%40radix-ui/react-label/dist/index.mjs","../../../../../../apps/web/src/components/ui/label.tsx","../../../../../../node_modules/.pnpm/%40radix-ui%2Breact-primitive%402_841a543ba347031c68bcef1a20d5c625/node_modules/%40radix-ui/react-primitive/dist/index.mjs","../../../../../../node_modules/.pnpm/lucide-react%400.554.0_react%4019.2.0/node_modules/lucide-react/src/icons/external-link.ts","../../../../../../node_modules/.pnpm/lucide-react%400.554.0_react%4019.2.0/node_modules/lucide-react/src/icons/circle-alert.ts","../../../../../../apps/web/src/components/quest-tree/SkipQuestDialog.tsx","../../../../../../apps/web/src/app/quest-tree/QuestTreeClient.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        data-slot=\"input\"\n        className={cn(\n          // Base styles with inset shadow (Refactoring UI: \"Emulate a light source\")\n          \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground border-input h-9 w-full min-w-0 rounded-md border bg-[var(--bg-elevated)] px-3 py-1 text-base shadow-inset-input transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n          \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n","\"use client\";\n\n// src/label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'M10 14 21 3', key: 'gplh6r' }],\n  ['path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6', key: 'a6xqqp' }],\n];\n\n/**\n * @component @name ExternalLink\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0iTTEwIDE0IDIxIDMiIC8+CiAgPHBhdGggZD0iTTE4IDEzdjZhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWOGEyIDIgMCAwIDEgMi0yaDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/external-link\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ExternalLink = createLucideIcon('external-link', __iconNode);\n\nexport default ExternalLink;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('circle-alert', __iconNode);\n\nexport default CircleAlert;\n","\"use client\";\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { getTraderColor } from \"@/lib/trader-colors\";\nimport type { QuestWithProgress } from \"@/types\";\n\ninterface SkipQuestDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  targetQuest: QuestWithProgress | null;\n  prerequisites: QuestWithProgress[];\n  onConfirm: () => void;\n  isLoading?: boolean;\n}\n\nexport function SkipQuestDialog({\n  open,\n  onOpenChange,\n  targetQuest,\n  prerequisites,\n  onConfirm,\n  isLoading = false,\n}: SkipQuestDialogProps) {\n  if (!targetQuest) return null;\n\n  // Group prerequisites by trader\n  const byTrader = new Map<string, QuestWithProgress[]>();\n  for (const prereq of prerequisites) {\n    const traderId = prereq.trader.id;\n    if (!byTrader.has(traderId)) {\n      byTrader.set(traderId, []);\n    }\n    byTrader.get(traderId)!.push(prereq);\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md max-h-[80vh] overflow-hidden flex flex-col\">\n        <DialogHeader>\n          <DialogTitle>Skip to Quest</DialogTitle>\n          <DialogDescription>\n            Mark all prerequisite quests as completed to unlock{\" \"}\n            <span className=\"font-semibold\">{targetQuest.title}</span>?\n          </DialogDescription>\n        </DialogHeader>\n\n        {prerequisites.length > 0 ? (\n          <div className=\"flex-1 overflow-y-auto py-4\">\n            <p className=\"text-sm text-muted-foreground mb-3\">\n              The following {prerequisites.length} quest\n              {prerequisites.length > 1 ? \"s\" : \"\"} will be marked as completed:\n            </p>\n\n            <div className=\"space-y-3\">\n              {Array.from(byTrader.entries()).map(([traderId, quests]) => {\n                const traderColor = getTraderColor(traderId);\n                const traderName = quests[0].trader.name;\n\n                return (\n                  <div key={traderId}>\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <div\n                        className=\"w-2 h-2 rounded-full\"\n                        style={{ backgroundColor: traderColor.primary }}\n                      />\n                      <span className=\"text-xs font-medium text-muted-foreground\">\n                        {traderName}\n                      </span>\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {quests.length}\n                      </Badge>\n                    </div>\n                    <ul className=\"space-y-1 ml-4\">\n                      {quests.map((quest) => (\n                        <li\n                          key={quest.id}\n                          className=\"text-sm flex items-center gap-2\"\n                        >\n                          <span\n                            className=\"w-1.5 h-1.5 rounded-full\"\n                            style={{ backgroundColor: traderColor.primary }}\n                          />\n                          {quest.title}\n                          <span className=\"text-xs text-muted-foreground\">\n                            Lv.{quest.levelRequired}\n                          </span>\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        ) : (\n          <div className=\"py-4 text-sm text-muted-foreground\">\n            This quest has no incomplete prerequisites. It should already be\n            available!\n          </div>\n        )}\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isLoading}\n          >\n            Cancel\n          </Button>\n          <Button\n            onClick={onConfirm}\n            disabled={isLoading || prerequisites.length === 0}\n          >\n            {isLoading\n              ? \"Completing...\"\n              : `Complete ${prerequisites.length} Quest${prerequisites.length !== 1 ? \"s\" : \"\"}`}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","\"use client\";\n\nimport { useState, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport { toast } from \"sonner\";\nimport { useStats } from \"@/contexts/StatsContext\";\nimport { useUserPrefsContext } from \"@/providers/UserPrefsProvider\";\nimport {\n  QuestTree,\n  QuestFilters,\n  SyncStatusIndicator,\n} from \"@/components/quest-tree\";\nimport { QuestTreeSkeleton } from \"@/components/quest-tree/QuestTreeSkeleton\";\nimport { SkipQuestDialog } from \"@/components/quest-tree/SkipQuestDialog\";\nimport { WelcomeModal } from \"@/components/onboarding\";\nimport { QuestDetailModal } from \"@/components/quest-detail\";\nimport { CatchUpDialog } from \"@/components/catch-up\";\nimport { useQuests } from \"@/hooks/useQuests\";\nimport { useProgress } from \"@/hooks/useProgress\";\nimport { getIncompletePrerequisites } from \"@/lib/quest-layout\";\nimport type { QuestStatus, QuestWithProgress } from \"@/types\";\n\n// Status cycle map for click handling (simplified: available <-> completed)\nconst STATUS_CYCLE: Record<QuestStatus, QuestStatus | null> = {\n  locked: null, // Can't cycle from locked\n  available: \"completed\",\n  in_progress: \"completed\", // Treat in_progress same as available\n  completed: \"available\", // Reset\n};\n\nexport function QuestTreeClient() {\n  const { status: sessionStatus } = useSession();\n  const { setStats } = useStats();\n  const { prefs, isLoading: prefsLoading } = useUserPrefsContext();\n\n  // Show loading skeleton while user preferences load (authenticated users only)\n  const isInitializing =\n    sessionStatus === \"loading\" ||\n    (sessionStatus === \"authenticated\" && prefsLoading);\n\n  // Compute initial filters using user preferences\n  const initialFilters = useMemo(\n    () => ({\n      playerLevel: prefs?.playerLevel ?? 1,\n    }),\n    [prefs]\n  );\n\n  const {\n    quests,\n    allQuests,\n    traders,\n    loading,\n    initialLoading,\n    error,\n    filters,\n    setFilters,\n    applyFilters,\n    hasPendingChanges,\n    refetch,\n  } = useQuests({\n    initialFilters,\n  });\n\n  // Sync saved preferences when they load (after initial mount)\n  const prefsLoaded = useRef(false);\n  useEffect(() => {\n    if (!prefs || prefsLoaded.current) return;\n    prefsLoaded.current = true;\n\n    // Apply saved preferences to filters\n    setFilters({\n      playerLevel: prefs.playerLevel ?? 1,\n    });\n\n    // Apply filters immediately so the quest list updates\n    applyFilters();\n  }, [prefs, setFilters, applyFilters]);\n  const {\n    progress,\n    updateStatus,\n    unlockedQuests,\n    clearUnlocked,\n    error: progressError,\n    savingQuestIds,\n    lastSynced,\n    isOnline,\n    pendingOfflineCount,\n  } = useProgress();\n  const [selectedQuestId, setSelectedQuestId] = useState<string | null>(null);\n\n  // Skip quest dialog state\n  const [skipDialogOpen, setSkipDialogOpen] = useState(false);\n  const [skipTargetQuest, setSkipTargetQuest] =\n    useState<QuestWithProgress | null>(null);\n  const [skipLoading, setSkipLoading] = useState(false);\n\n  // Onboarding state\n  const [showWelcome, setShowWelcome] = useState(false);\n\n  // Catch-up dialog state\n  const [showCatchUp, setShowCatchUp] = useState(false);\n\n  // Quest detail modal state\n  const [detailQuest, setDetailQuest] = useState<QuestWithProgress | null>(\n    null\n  );\n  const [detailModalOpen, setDetailModalOpen] = useState(false);\n\n  // Check if detail quest is currently saving\n  const isDetailQuestSaving = useMemo(() => {\n    return detailQuest ? savingQuestIds.has(detailQuest.id) : false;\n  }, [detailQuest, savingQuestIds]);\n\n  // Refs for stable callback references (prevents re-renders from invalidating memoization)\n  const questsWithProgressRef = useRef<QuestWithProgress[]>([]);\n  const sessionStatusRef = useRef(sessionStatus);\n  const updateStatusRef = useRef(updateStatus);\n  const refetchRef = useRef(refetch);\n\n  // Merge progress into quests (memoized to prevent infinite re-renders)\n  const questsWithProgress = useMemo(\n    () =>\n      quests.map((quest) => {\n        if (quest.computedStatus === \"locked\") {\n          return {\n            ...quest,\n            computedStatus: \"locked\" as const,\n          };\n        }\n        const userStatus = progress.get(quest.id);\n        return {\n          ...quest,\n          computedStatus: userStatus || quest.computedStatus,\n        };\n      }),\n    [quests, progress]\n  );\n\n  // Merge progress into all quests (for accurate depth calculation)\n  const allQuestsWithProgress = useMemo(\n    () =>\n      allQuests.map((quest) => {\n        if (quest.computedStatus === \"locked\") {\n          return {\n            ...quest,\n            computedStatus: \"locked\" as const,\n          };\n        }\n        const userStatus = progress.get(quest.id);\n        return {\n          ...quest,\n          computedStatus: userStatus || quest.computedStatus,\n        };\n      }),\n    [allQuests, progress]\n  );\n\n  // Keep refs in sync with current values\n  useEffect(() => {\n    questsWithProgressRef.current = questsWithProgress;\n  }, [questsWithProgress]);\n\n  useEffect(() => {\n    sessionStatusRef.current = sessionStatus;\n  }, [sessionStatus]);\n\n  useEffect(() => {\n    updateStatusRef.current = updateStatus;\n  }, [updateStatus]);\n\n  useEffect(() => {\n    refetchRef.current = refetch;\n  }, [refetch]);\n\n  // Show notification when quests are unlocked\n  useEffect(() => {\n    if (unlockedQuests.length > 0) {\n      const count = unlockedQuests.length;\n      toast.success(`${count} quest${count > 1 ? \"s\" : \"\"} unlocked!`, {\n        description: \"New quests are now available.\",\n      });\n      clearUnlocked();\n      refetch();\n    }\n  }, [unlockedQuests, clearUnlocked, refetch]);\n\n  // Show error toast when progress error occurs\n  useEffect(() => {\n    if (progressError) {\n      toast.error(\"Progress Error\", { description: progressError });\n    }\n  }, [progressError]);\n\n  // Check for first-time user and show welcome modal\n  useEffect(() => {\n    if (loading) return;\n\n    const hasSeenWelcome = localStorage.getItem(\"eft-tracker-onboarding\");\n    if (!hasSeenWelcome) {\n      setShowWelcome(true);\n    }\n  }, [loading]);\n\n  // Handle completing onboarding\n  const handleOnboardingComplete = useCallback(() => {\n    localStorage.setItem(\"eft-tracker-onboarding\", \"completed\");\n    setShowWelcome(false);\n  }, []);\n\n  // Handle catch-up from welcome modal\n  const handleCatchUpFromWelcome = useCallback(() => {\n    localStorage.setItem(\"eft-tracker-onboarding\", \"completed\");\n    setShowWelcome(false);\n    setShowCatchUp(true);\n  }, []);\n\n  // Handle catch-up completion\n  const handleCatchUpComplete = useCallback(() => {\n    refetch();\n  }, [refetch]);\n\n  const handleQuestSelect = useCallback((questId: string) => {\n    setSelectedQuestId((prev) => (prev === questId ? null : questId));\n  }, []);\n\n  // Handle opening quest details modal\n  const handleQuestDetails = useCallback((questId: string) => {\n    const quest = questsWithProgressRef.current.find((q) => q.id === questId);\n    if (quest) {\n      setDetailQuest(quest);\n      setDetailModalOpen(true);\n    }\n  }, []);\n\n  // Get prerequisites for the skip dialog\n  const skipPrerequisites = useMemo(() => {\n    if (!skipTargetQuest) return [];\n    return getIncompletePrerequisites(\n      skipTargetQuest.id,\n      allQuestsWithProgress\n    );\n  }, [skipTargetQuest, allQuestsWithProgress]);\n\n  // Handle confirming the skip (complete all prerequisites)\n  const handleSkipConfirm = useCallback(async () => {\n    if (!skipTargetQuest || skipPrerequisites.length === 0) return;\n\n    setSkipLoading(true);\n    try {\n      for (const prereq of skipPrerequisites) {\n        const success = await updateStatus(prereq.id, \"completed\");\n        if (!success) {\n          toast.error(\"Failed to Update\", {\n            description: `Could not complete ${prereq.title}. Please try again.`,\n          });\n          setSkipLoading(false);\n          return;\n        }\n      }\n\n      toast.success(\n        `${skipPrerequisites.length} quest${skipPrerequisites.length > 1 ? \"s\" : \"\"} completed!`,\n        {\n          description: `${skipTargetQuest.title} is now available.`,\n        }\n      );\n\n      setSkipDialogOpen(false);\n      setSkipTargetQuest(null);\n      await refetch();\n    } catch {\n      toast.error(\"Failed to Update\", {\n        description:\n          \"Could not complete prerequisite quests. Please try again.\",\n      });\n    } finally {\n      setSkipLoading(false);\n    }\n  }, [skipTargetQuest, skipPrerequisites, updateStatus, refetch]);\n\n  // Stable callback reference using refs\n  const handleStatusChange = useCallback(async (questId: string) => {\n    const quest = questsWithProgressRef.current.find((q) => q.id === questId);\n    if (!quest) return;\n\n    const currentStatus = quest.computedStatus;\n\n    // If locked, open skip dialog instead of showing toast\n    if (currentStatus === \"locked\") {\n      if (sessionStatusRef.current !== \"authenticated\") {\n        toast.warning(\"Sign In Required\", {\n          description: \"Please sign in to track your progress.\",\n          action: {\n            label: \"Sign In\",\n            onClick: () => (window.location.href = \"/login\"),\n          },\n        });\n        return;\n      }\n\n      setSkipTargetQuest(quest);\n      setSkipDialogOpen(true);\n      return;\n    }\n\n    // If not authenticated, prompt to login\n    if (sessionStatusRef.current !== \"authenticated\") {\n      toast.warning(\"Sign In Required\", {\n        description: \"Please sign in to track your progress.\",\n        action: {\n          label: \"Sign In\",\n          onClick: () => (window.location.href = \"/login\"),\n        },\n      });\n      return;\n    }\n\n    // Get next status in cycle\n    const nextStatus = STATUS_CYCLE[currentStatus];\n    if (!nextStatus) return;\n\n    const success = await updateStatusRef.current(questId, nextStatus);\n    if (success) {\n      if (nextStatus === \"completed\") {\n        toast.success(\"Quest Completed!\", {\n          description: quest.title,\n        });\n      }\n      await refetchRef.current();\n    } else {\n      toast.error(\"Failed to Update\", {\n        description: \"Could not update quest status. Please try again.\",\n      });\n    }\n  }, []);\n\n  // Wrapper for modal - reuses parent's handleStatusChange logic\n  const handleModalStatusChange = useCallback(\n    async (questId: string) => {\n      await handleStatusChange(questId);\n    },\n    [handleStatusChange]\n  );\n\n  // Handle objective toggle from modal (supports both binary and numeric)\n  const handleObjectiveToggle = useCallback(\n    async (\n      objectiveId: string,\n      update: boolean | { current: number }\n    ): Promise<{ questStatusChanged?: boolean; newQuestStatus?: string }> => {\n      if (sessionStatusRef.current !== \"authenticated\") {\n        toast.error(\"Sign in Required\", {\n          description: \"Please sign in to track quest progress.\",\n        });\n        return { questStatusChanged: false };\n      }\n\n      try {\n        // Build request body based on update type\n        const body =\n          typeof update === \"boolean\"\n            ? { completed: update }\n            : { current: update.current };\n\n        const response = await fetch(`/api/progress/objective/${objectiveId}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(body),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.error || \"Failed to update objective\");\n        }\n\n        const data = await response.json();\n\n        // Refetch quests to get updated objective progress\n        await refetchRef.current();\n\n        // Show toast if quest status changed\n        if (data.quest?.statusChanged) {\n          if (data.quest.status === \"COMPLETED\") {\n            toast.success(\"Quest Completed!\", {\n              description: `All objectives for ${data.quest.title} are complete.`,\n            });\n          } else if (data.quest.status === \"IN_PROGRESS\") {\n            toast.info(\"Quest Started\", {\n              description: data.quest.title,\n            });\n          }\n        }\n\n        return {\n          questStatusChanged: data.quest?.statusChanged ?? false,\n          newQuestStatus: data.quest?.status,\n        };\n      } catch (err) {\n        toast.error(\"Failed to Update Objective\", {\n          description: err instanceof Error ? err.message : \"Please try again.\",\n        });\n        return { questStatusChanged: false };\n      }\n    },\n    []\n  );\n\n  // Calculate progress stats\n  const stats = useMemo(\n    () => ({\n      total: questsWithProgress.length,\n      completed: questsWithProgress.filter(\n        (q) => q.computedStatus === \"completed\"\n      ).length,\n      available: questsWithProgress.filter(\n        (q) => q.computedStatus === \"available\"\n      ).length,\n      locked: questsWithProgress.filter((q) => q.computedStatus === \"locked\")\n        .length,\n    }),\n    [questsWithProgress]\n  );\n\n  // Update stats in context for header display\n  useEffect(() => {\n    if (!loading && !error) {\n      setStats(stats);\n    }\n    return () => setStats(null);\n  }, [stats, setStats, loading, error]);\n\n  if (initialLoading || isInitializing) {\n    return <QuestTreeSkeleton />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-lg font-medium text-destructive\">\n            Error loading quests\n          </p>\n          <p className=\"text-sm text-muted-foreground mb-4\">{error}</p>\n          <button\n            onClick={() => refetch()}\n            className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <WelcomeModal\n        open={showWelcome}\n        onOpenChange={setShowWelcome}\n        onGetStarted={handleOnboardingComplete}\n        onCatchUp={handleCatchUpFromWelcome}\n      />\n      <CatchUpDialog\n        open={showCatchUp}\n        onOpenChange={setShowCatchUp}\n        quests={allQuestsWithProgress}\n        onComplete={handleCatchUpComplete}\n      />\n      <SkipQuestDialog\n        open={skipDialogOpen}\n        onOpenChange={setSkipDialogOpen}\n        targetQuest={skipTargetQuest}\n        prerequisites={skipPrerequisites}\n        onConfirm={handleSkipConfirm}\n        isLoading={skipLoading}\n      />\n      <QuestDetailModal\n        quest={detailQuest}\n        open={detailModalOpen}\n        onOpenChange={setDetailModalOpen}\n        onStatusChange={handleModalStatusChange}\n        onObjectiveToggle={handleObjectiveToggle}\n        isSaving={isDetailQuestSaving}\n      />\n      <QuestFilters\n        traders={traders}\n        quests={allQuestsWithProgress}\n        filters={filters}\n        onFilterChange={setFilters}\n        onApplyFilters={applyFilters}\n        hasPendingChanges={hasPendingChanges}\n      />\n      <div className=\"flex-1 min-h-0\">\n        {questsWithProgress.length > 0 ? (\n          <QuestTree\n            quests={questsWithProgress}\n            allQuests={allQuestsWithProgress}\n            traders={traders}\n            selectedQuestId={selectedQuestId}\n            playerLevel={filters.playerLevel}\n            maxColumns={null}\n            savingQuestIds={savingQuestIds}\n            onQuestSelect={handleQuestSelect}\n            onStatusChange={handleStatusChange}\n            onQuestDetails={handleQuestDetails}\n          />\n        ) : (\n          <div className=\"flex items-center justify-center h-full\">\n            <p className=\"text-muted-foreground\">\n              No quests found matching your filters.\n            </p>\n          </div>\n        )}\n      </div>\n      {/* Sync status footer */}\n      {sessionStatus === \"authenticated\" && (\n        <div className=\"shrink-0 px-4 py-2 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n          <SyncStatusIndicator\n            lastSynced={lastSynced}\n            isOnline={isOnline}\n            isSaving={savingQuestIds.size > 0}\n            pendingOfflineCount={pendingOfflineCount}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[1,3,4,5]}