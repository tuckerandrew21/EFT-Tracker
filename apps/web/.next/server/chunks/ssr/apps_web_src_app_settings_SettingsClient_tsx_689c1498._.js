module.exports=[60280,a=>{"use strict";var b=a.i(98143),c=a.i(97823),d=a.i(86269);let e=(0,d.default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var f=a.i(43607);let g=(0,d.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),h=(0,d.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var i=a.i(65403),j=a.i(45741),k=a.i(38752),l=a.i(69292),m=a.i(99898);let n=(0,d.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),o=(0,d.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var p=a.i(9056);a.i(74475);var q=a.i(32592);function r(){let[a,d]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("PVP"),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)([]),[V,W]=(0,c.useState)(!1),X=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/companion/link");if(!a.ok)throw Error("Failed to fetch tokens");let b=await a.json();d(b.tokens)}catch(a){u(String(a))}finally{s(!1)}},[]);(0,c.useEffect)(()=>{X()},[X]);let Y=(0,c.useCallback)(async()=>{W(!0);try{let a=await fetch("/api/quests");if(!a.ok)throw Error("Failed to fetch quests");let b=await a.json();U(b.quests)}catch(a){u(String(a))}finally{W(!1)}},[]),Z=(0,c.useCallback)(async()=>{0===T.length&&await Y(),S(!0)},[T.length,Y]),$=async a=>{if(a.preventDefault(),!x.trim())return void u("Device name is required");C(!0),u(null);try{let a=await fetch("/api/companion/link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceName:x,gameMode:z})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to create token")}let b=await a.json();E(b),w(!1),y(""),await X()}catch(a){u(String(a))}finally{C(!1)}},_=async a=>{if(confirm("Are you sure you want to revoke this token? The device will be disconnected.")){I(a),u(null);try{let b=await fetch("/api/companion/unlink",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokenId:a})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to revoke token")}await X()}catch(a){u(String(a))}finally{I(null)}}},aa=async()=>{if(D?.token)try{await navigator.clipboard.writeText(D.token),G(!0),setTimeout(()=>G(!1),2e3)}catch{let a=document.createElement("textarea");a.value=D.token,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),G(!0),setTimeout(()=>G(!1),2e3)}},ab=async()=>{M(!0),u(null);try{let a=await fetch("/api/progress/export");if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to export progress")}let b=await a.blob(),c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`eft-tracker-progress-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),document.body.removeChild(d)}catch(a){u(String(a))}finally{M(!1)}},ac=async()=>{K(!0),u(null);try{let a=await fetch("/api/progress",{method:"DELETE"});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to reset progress")}let b=await a.json();Q(b.message),O(!1),setTimeout(()=>Q(null),5e3)}catch(a){u(String(a))}finally{K(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#1a1a1a] text-[#e5e5e5]",children:[(0,b.jsx)(q.CatchUpDialog,{open:R,onOpenChange:S,quests:T,onComplete:Y}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"Settings"}),(0,b.jsxs)("section",{className:"bg-[#2d2d2d] rounded-lg border border-[#404040] p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e,{className:"w-6 h-6 text-[#d4a574]"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Companion App"})]}),(0,b.jsxs)("a",{href:"https://github.com/tuckerandrew21/EFT-Tracker/releases",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-[#d4a574] hover:text-[#d4a574]/80 flex items-center gap-1",children:["Download App",(0,b.jsx)(l.ExternalLink,{className:"w-4 h-4"})]})]}),(0,b.jsx)("p",{className:"text-[#9ca3af] text-sm mb-6",children:"Connect the EFT Tracker Companion app to automatically sync your quest progress from the game. Generate a token below and enter it in the companion app."}),t&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500 rounded-lg flex items-start gap-2",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-red-400",children:t})]}),D&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,b.jsx)(i.Check,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-green-400",children:"Token Created!"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mt-1",children:"Copy this token now. It will not be shown again."})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",readOnly:!0,value:D.token,className:"flex-1 bg-[#1a1a1a] border border-[#404040] rounded-lg px-3 py-2 font-mono text-sm"}),(0,b.jsx)("button",{onClick:aa,className:"px-4 py-2 bg-[#d4a574] hover:bg-[#d4a574]/80 text-[#1a1a1a] rounded-lg font-medium flex items-center gap-2",children:F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Check,{className:"w-4 h-4"}),"Copied!"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"w-4 h-4"}),"Copy"]})})]}),(0,b.jsx)("button",{onClick:()=>E(null),className:"mt-3 text-sm text-[#9ca3af] hover:text-[#e5e5e5]",children:"Dismiss"})]}),v?(0,b.jsxs)("form",{onSubmit:$,className:"mb-6 p-4 bg-[#1a1a1a] rounded-lg border border-[#404040]",children:[(0,b.jsx)("h3",{className:"font-medium mb-4",children:"Generate New Token"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#9ca3af] mb-1",children:"Device Name"}),(0,b.jsx)("input",{type:"text",value:x,onChange:a=>y(a.target.value),placeholder:"e.g., Gaming PC, Laptop",maxLength:100,className:"w-full bg-[#2d2d2d] border border-[#404040] rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#d4a574]"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-[#9ca3af] mb-1",children:"Game Mode"}),(0,b.jsxs)("select",{value:z,onChange:a=>A(a.target.value),className:"w-full bg-[#2d2d2d] border border-[#404040] rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#d4a574]",children:[(0,b.jsx)("option",{value:"PVP",children:"PVP"}),(0,b.jsx)("option",{value:"PVE",children:"PVE"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,b.jsxs)("button",{type:"submit",disabled:B,className:"px-4 py-2 bg-[#d4a574] hover:bg-[#d4a574]/80 disabled:opacity-50 text-[#1a1a1a] rounded-lg font-medium flex items-center gap-2",children:[B?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(f.Plus,{className:"w-4 h-4"}),"Generate Token"]}),(0,b.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-[#404040] hover:bg-[#505050] rounded-lg",children:"Cancel"})]})]}):(0,b.jsxs)("button",{onClick:()=>w(!0),className:"mb-6 px-4 py-2 bg-[#d4a574] hover:bg-[#d4a574]/80 text-[#1a1a1a] rounded-lg font-medium flex items-center gap-2",children:[(0,b.jsx)(f.Plus,{className:"w-4 h-4"}),"Generate New Token"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium mb-3",children:"Linked Devices"}),r?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(k.Loader2,{className:"w-6 h-6 animate-spin text-[#d4a574]"})}):0===a.length?(0,b.jsx)("p",{className:"text-[#9ca3af] text-sm py-4 text-center",children:"No devices linked. Generate a token above to connect the companion app."}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>{var c;let d,f,h,i,j;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#1a1a1a] rounded-lg border border-[#404040]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e,{className:"w-5 h-5 text-[#9ca3af]"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.deviceName}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-[#9ca3af]",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${new Date(a.lastSeen).getTime()>Date.now()-3e5?"bg-green-500":"bg-[#9ca3af]"}`}),(d=new Date(c=a.lastSeen),h=Math.floor((f=new Date().getTime()-d.getTime())/6e4),i=Math.floor(f/36e5),j=Math.floor(f/864e5),h<1?"Just now":h<60?`${h} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:j<7?`${j} day${j>1?"s":""} ago`:new Date(c).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),(0,b.jsx)("span",{children:a.gameMode}),(0,b.jsxs)("span",{className:"font-mono",children:["...",a.tokenHint]})]})]})]}),(0,b.jsx)("button",{onClick:()=>_(a.id),disabled:H===a.id,className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg disabled:opacity-50",title:"Revoke token",children:H===a.id?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(g,{className:"w-4 h-4"})})]},a.id)})})]})]}),(0,b.jsxs)("section",{className:"bg-[#2d2d2d] rounded-lg border border-[#404040] p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(o,{className:"w-6 h-6 text-[#d4a574]"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Data Management"})]}),(0,b.jsx)("p",{className:"text-[#9ca3af] text-sm mb-6",children:"Export your quest progress for backup or reset all progress for a new wipe."}),P&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500 rounded-lg flex items-start gap-2",children:[(0,b.jsx)(i.Check,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-green-400",children:P})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[#1a1a1a] rounded-lg border border-[#d4a574]/30",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-[#d4a574]",children:"Catch Up Progress"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mt-1",children:"Already mid-wipe? Select your current quests and auto-complete all prerequisites."})]}),(0,b.jsxs)("button",{onClick:Z,disabled:V,className:"px-4 py-2 bg-[#d4a574] hover:bg-[#d4a574]/80 disabled:opacity-50 text-[#1a1a1a] rounded-lg font-medium flex items-center gap-2",children:[V?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(p.FastForward,{className:"w-4 h-4"}),"Catch Up"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[#1a1a1a] rounded-lg border border-[#404040]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium",children:"Export Progress"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mt-1",children:"Download your quest progress as a JSON file for backup."})]}),(0,b.jsxs)("button",{onClick:ab,disabled:L,className:"px-4 py-2 bg-[#404040] hover:bg-[#505050] disabled:opacity-50 rounded-lg font-medium flex items-center gap-2",children:[L?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(m.Download,{className:"w-4 h-4"}),"Export"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-[#1a1a1a] rounded-lg border border-red-500/30",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-red-400",children:"Reset All Progress"}),(0,b.jsx)("p",{className:"text-sm text-[#9ca3af] mt-1",children:"Clear all quest progress for a new wipe. This cannot be undone."})]}),N?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>O(!1),disabled:J,className:"px-3 py-2 bg-[#404040] hover:bg-[#505050] rounded-lg text-sm",children:"Cancel"}),(0,b.jsxs)("button",{onClick:ac,disabled:J,className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-50 rounded-lg font-medium flex items-center gap-2 text-white",children:[J?(0,b.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(g,{className:"w-4 h-4"}),"Confirm Reset"]})]}):(0,b.jsxs)("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded-lg font-medium flex items-center gap-2",children:[(0,b.jsx)(n,{className:"w-4 h-4"}),"Reset Progress"]})]})]})]})]})]})}a.s(["SettingsClient",()=>r],60280)}];

//# sourceMappingURL=apps_web_src_app_settings_SettingsClient_tsx_689c1498._.js.map