{"version":3,"sources":["../../../../../../apps/web/src/components/map-filters/MapFilters.tsx","../../../../../../apps/web/src/components/quest-views/LevelQuestCard.tsx","../../../../../../apps/web/src/components/next-up/NextUpPanel.tsx","../../../../../../apps/web/src/components/quest-views/MapGroupsView.tsx","../../../../../../apps/web/src/app/maps/MapsClient.tsx","../../../../../../node_modules/.pnpm/lucide-react%400.554.0_react%4019.2.0/node_modules/lucide-react/src/icons/zap.ts","../../../../../../node_modules/.pnpm/lucide-react%400.554.0_react%4019.2.0/node_modules/lucide-react/src/icons/map.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useCallback } from \"react\";\nimport { ProgressStats } from \"@/components/progress-stats\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useUpdateUserPrefs } from \"@/hooks/useUserPrefs\";\nimport { getTraderColor } from \"@/lib/trader-colors\";\nimport type {\n  Trader,\n  QuestFilters as Filters,\n  QuestWithProgress,\n} from \"@/types\";\n\ninterface MapFiltersProps {\n  traders: Trader[];\n  quests: QuestWithProgress[];\n  filters: Filters;\n  onFilterChange: (filters: Partial<Filters>) => void;\n  onApplyFilters: () => void;\n}\n\nexport function MapFilters({\n  traders,\n  quests,\n  filters,\n  onFilterChange,\n  onApplyFilters,\n}: MapFiltersProps) {\n  const updatePrefsMutation = useUpdateUserPrefs();\n\n  // Stable ref for onApplyFilters to avoid infinite loops\n  const onApplyFiltersRef = useRef(onApplyFilters);\n  useEffect(() => {\n    onApplyFiltersRef.current = onApplyFilters;\n  });\n\n  // Auto-save player level when it changes (debounced)\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (filters.playerLevel !== undefined && filters.playerLevel !== null) {\n        updatePrefsMutation.mutate({ playerLevel: filters.playerLevel });\n      }\n    }, 1000);\n\n    return () => clearTimeout(timer);\n  }, [filters.playerLevel]); // mutation.mutate() is stable and doesn't need to be in deps\n\n  // Auto-apply filter change\n  const handleFilterChange = useCallback(\n    (update: Partial<Filters>) => {\n      onFilterChange(update);\n      setTimeout(() => onApplyFiltersRef.current(), 0);\n    },\n    [onFilterChange]\n  );\n\n  // Debounced level change (don't auto-apply immediately while typing)\n  const levelChangeTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const handleLevelChange = useCallback(\n    (level: number | null) => {\n      onFilterChange({ playerLevel: level });\n\n      if (levelChangeTimerRef.current) {\n        clearTimeout(levelChangeTimerRef.current);\n      }\n      levelChangeTimerRef.current = setTimeout(() => {\n        onApplyFiltersRef.current();\n      }, 500);\n    },\n    [onFilterChange]\n  );\n\n  return (\n    <div className=\"bg-background border-b\">\n      {/* Desktop & Mobile Layout - single row */}\n      <div className=\"px-4 py-2 flex items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3 flex-wrap\">\n          {/* Trader */}\n          <Select\n            value={filters.traderId || \"all\"}\n            onValueChange={(value) =>\n              handleFilterChange({\n                traderId: value === \"all\" ? null : value,\n              })\n            }\n          >\n            <SelectTrigger className=\"h-9 w-[140px]\">\n              <SelectValue placeholder=\"All Traders\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Traders</SelectItem>\n              {traders.map((trader) => (\n                <SelectItem key={trader.id} value={trader.id}>\n                  <div className=\"flex items-center gap-2\">\n                    <div\n                      className=\"w-3 h-3 rounded-full\"\n                      style={{\n                        backgroundColor: getTraderColor(trader.id).primary,\n                      }}\n                    />\n                    {trader.name}\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n\n          {/* Level */}\n          <div className=\"flex items-center gap-2\">\n            <Label htmlFor=\"player-level\" className=\"text-sm whitespace-nowrap\">\n              Level:\n            </Label>\n            <input\n              id=\"player-level\"\n              type=\"number\"\n              min={1}\n              max={79}\n              placeholder=\"1-79\"\n              value={filters.playerLevel ?? \"\"}\n              onChange={(e) => {\n                const val = parseInt(e.target.value);\n                const level = isNaN(val)\n                  ? null\n                  : Math.min(79, Math.max(1, val));\n                handleLevelChange(level);\n              }}\n              className=\"h-9 w-16 rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\n            />\n          </div>\n\n          {/* Kappa */}\n          <div className=\"flex items-center gap-1.5\">\n            <Switch\n              id=\"kappa-only\"\n              checked={filters.kappaOnly}\n              onCheckedChange={(checked) =>\n                handleFilterChange({ kappaOnly: checked })\n              }\n            />\n            <Label\n              htmlFor=\"kappa-only\"\n              className=\"text-sm cursor-pointer whitespace-nowrap\"\n            >\n              Kappa Only\n            </Label>\n          </div>\n        </div>\n\n        {/* Progress Stats */}\n        <div className=\"hidden sm:block\">\n          <ProgressStats quests={quests} traders={traders} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { Info, ExternalLink } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { getTraderColor, STATUS_COLORS } from \"@/lib/trader-colors\";\nimport {\n  Tooltip,\n  TooltipTrigger,\n  TooltipContent,\n} from \"@/components/ui/tooltip\";\nimport type { QuestWithProgress, QuestStatus } from \"@/types\";\n\n// Static style for icon buttons\nconst ICON_BUTTON_STYLE = { color: \"#636363\" };\n\ninterface LevelQuestCardProps {\n  quest: QuestWithProgress;\n  playerLevel?: number | null;\n  onStatusChange: (questId: string, status: QuestStatus) => void;\n  onQuestDetails?: (questId: string) => void;\n}\n\nexport function LevelQuestCard({\n  quest,\n  playerLevel,\n  onStatusChange,\n  onQuestDetails,\n}: LevelQuestCardProps) {\n  const traderColor = getTraderColor(quest.traderId);\n  const statusColor = STATUS_COLORS[quest.computedStatus];\n  const [isClicked, setIsClicked] = useState(false);\n\n  // Level-based highlighting\n  const isLevelAppropriate =\n    playerLevel !== null &&\n    playerLevel !== undefined &&\n    quest.levelRequired <= playerLevel;\n  const isUpcoming =\n    playerLevel !== null &&\n    playerLevel !== undefined &&\n    quest.levelRequired > playerLevel &&\n    quest.levelRequired <= playerLevel + 5;\n\n  // Find cross-trader dependencies\n  const crossTraderBadges = useMemo(() => {\n    if (!quest.dependsOn) return [];\n\n    const byTrader = new Map<string, { name: string; count: number }>();\n    for (const dep of quest.dependsOn) {\n      if (\n        dep.requiredQuest.traderId.toLowerCase() !==\n        quest.traderId.toLowerCase()\n      ) {\n        const traderId = dep.requiredQuest.traderId.toLowerCase();\n        const existing = byTrader.get(traderId);\n        if (existing) {\n          existing.count++;\n        } else {\n          byTrader.set(traderId, {\n            name: dep.requiredQuest.trader.name,\n            count: 1,\n          });\n        }\n      }\n    }\n    return Array.from(byTrader.entries()).map(([traderId, info]) => ({\n      traderId,\n      ...info,\n    }));\n  }, [quest.dependsOn, quest.traderId]);\n\n  const handleClick = () => {\n    setIsClicked(true);\n    setTimeout(() => setIsClicked(false), 150);\n\n    // Pass to parent handler (handles locked state for skip-to-quest feature)\n    onStatusChange(quest.id, quest.computedStatus);\n  };\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    // Right-click to open quest details\n    if (onQuestDetails) {\n      onQuestDetails(quest.id);\n    }\n  };\n\n  const handleInfoClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation(); // Prevents card click/status change\n    if (onQuestDetails) {\n      onQuestDetails(quest.id);\n    }\n  };\n\n  const handleInfoMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent parent from intercepting\n  };\n\n  const handleWikiLinkClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation(); // Prevents card click/status change\n    if (quest.wikiLink) {\n      window.open(quest.wikiLink, \"_blank\", \"noopener,noreferrer\");\n    }\n  };\n\n  const handleWikiLinkMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent parent from intercepting\n  };\n\n  return (\n    <div\n      onClick={handleClick}\n      onContextMenu={handleContextMenu}\n      className={cn(\n        \"relative p-2 rounded-lg border transition-all duration-150 cursor-pointer min-h-[44px]\",\n        \"hover:shadow-md\",\n        isClicked && \"scale-95\",\n        quest.computedStatus === \"locked\" && \"opacity-70\",\n        quest.computedStatus === \"completed\" && \"opacity-70\",\n        quest.computedStatus === \"available\" && \"shadow-sm hover:shadow-lg\",\n        // Level-based highlighting\n        isUpcoming &&\n          quest.computedStatus !== \"completed\" &&\n          \"ring-1 ring-amber-300\"\n      )}\n      style={{\n        backgroundColor: statusColor.bg,\n        borderColor:\n          quest.computedStatus === \"available\"\n            ? traderColor.primary\n            : statusColor.border,\n        borderLeftWidth: 4,\n        borderLeftColor: traderColor.primary,\n      }}\n    >\n      {/* Kappa badge */}\n      {quest.kappaRequired && (\n        <div\n          className=\"absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center text-[8px] font-bold text-white\"\n          style={{ backgroundColor: \"#FFD700\" }}\n          title=\"Required for Kappa\"\n        >\n          K\n        </div>\n      )}\n\n      {/* Cross-trader dependency badges */}\n      {crossTraderBadges.length > 0 && (\n        <div className=\"flex gap-0.5 mb-1\">\n          {crossTraderBadges.slice(0, 2).map((badge) => {\n            const badgeColor = getTraderColor(badge.traderId);\n            return (\n              <div\n                key={badge.traderId}\n                className=\"px-1 rounded text-[8px] font-medium text-white\"\n                style={{ backgroundColor: badgeColor.primary }}\n                title={`Requires quest(s) from ${badge.name}`}\n              >\n                {badge.name.slice(0, 2)}\n              </div>\n            );\n          })}\n          {crossTraderBadges.length > 2 && (\n            <div\n              className=\"px-1 rounded text-[8px] font-medium text-white\"\n              style={{ backgroundColor: \"#636363\" }}\n            >\n              +{crossTraderBadges.length - 2}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Quest title */}\n      <div\n        className=\"font-semibold text-[14px] leading-tight line-clamp-2\"\n        style={{ color: \"#c7c5b3\" }}\n        title={quest.title}\n      >\n        {quest.title}\n      </div>\n\n      {/* Objective progress bar - only show when there are objectives and quest is not locked */}\n      {quest.objectivesSummary &&\n        quest.objectivesSummary.total > 0 &&\n        quest.computedStatus !== \"locked\" && (\n          <div className=\"mt-1\">\n            <div className=\"h-1 w-full bg-black/30 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-emerald-500 transition-all duration-300\"\n                style={{\n                  width: `${(quest.objectivesSummary.completed / quest.objectivesSummary.total) * 100}%`,\n                }}\n              />\n            </div>\n          </div>\n        )}\n\n      {/* Bottom row: trader + level + action buttons */}\n      {/* Refactoring UI: Labels tertiary, data primary */}\n      <div className=\"flex items-center justify-between mt-1\">\n        <div className=\"flex items-center gap-2\">\n          {/* Trader name - primary emphasis (colored by trader) */}\n          <span\n            className=\"text-[12px] font-semibold\"\n            style={{ color: traderColor.primary }}\n          >\n            {quest.trader.name}\n          </span>\n          {/* Level - label de-emphasized, value emphasized */}\n          <span className=\"flex items-center gap-0.5\">\n            <span\n              className=\"text-[10px] uppercase tracking-wide\"\n              style={{ color: \"var(--text-tertiary)\" }}\n            >\n              Lv\n            </span>\n            <span\n              className=\"text-[12px] font-semibold\"\n              style={{\n                color: isLevelAppropriate\n                  ? \"var(--success)\"\n                  : isUpcoming\n                    ? \"#ca8a00\"\n                    : \"var(--text-secondary)\",\n              }}\n            >\n              {quest.levelRequired}\n            </span>\n          </span>\n          {/* Objective count badge */}\n          {quest.objectivesSummary &&\n            quest.objectivesSummary.total > 0 &&\n            quest.computedStatus !== \"locked\" && (\n              <span\n                className=\"text-[10px]\"\n                style={{ color: \"var(--text-tertiary)\" }}\n              >\n                ({quest.objectivesSummary.completed}/\n                {quest.objectivesSummary.total})\n              </span>\n            )}\n        </div>\n        {/* Action buttons - info and wiki link */}\n        <div className=\"flex items-center gap-1\">\n          {/* Info button - opens quest details */}\n          {onQuestDetails && (\n            <Tooltip delayDuration={300}>\n              <TooltipTrigger asChild>\n                <button\n                  type=\"button\"\n                  onClick={handleInfoClick}\n                  onMouseDown={handleInfoMouseDown}\n                  onTouchStart={(e) => e.stopPropagation()}\n                  onTouchEnd={(e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (onQuestDetails) onQuestDetails(quest.id);\n                  }}\n                  className=\"w-6 h-6 flex items-center justify-center opacity-60 hover:opacity-100 transition-colors duration-150 rounded-full hover:bg-black/20 focus:outline-none focus:ring-1 focus:ring-offset-1 pointer-events-auto\"\n                  style={ICON_BUTTON_STYLE}\n                  aria-label={`View ${quest.title} details`}\n                >\n                  <Info className=\"w-[14px] h-[14px]\" />\n                </button>\n              </TooltipTrigger>\n              <TooltipContent side=\"top\" sideOffset={4}>\n                <p className=\"text-xs\">View Details</p>\n              </TooltipContent>\n            </Tooltip>\n          )}\n          {/* Wiki link */}\n          {quest.wikiLink && (\n            <Tooltip delayDuration={300}>\n              <TooltipTrigger asChild>\n                <button\n                  type=\"button\"\n                  onClick={handleWikiLinkClick}\n                  onMouseDown={handleWikiLinkMouseDown}\n                  onTouchStart={(e) => e.stopPropagation()}\n                  onTouchEnd={(e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (quest.wikiLink) {\n                      window.open(\n                        quest.wikiLink,\n                        \"_blank\",\n                        \"noopener,noreferrer\"\n                      );\n                    }\n                  }}\n                  className=\"w-6 h-6 flex items-center justify-center opacity-60 hover:opacity-100 transition-colors duration-150 rounded-full hover:bg-black/20 focus:outline-none focus:ring-1 focus:ring-offset-1 pointer-events-auto\"\n                  style={ICON_BUTTON_STYLE}\n                  aria-label={`Open ${quest.title} wiki page`}\n                >\n                  <ExternalLink className=\"w-[14px] h-[14px]\" />\n                </button>\n              </TooltipTrigger>\n              <TooltipContent side=\"top\" sideOffset={4}>\n                <p className=\"text-xs\">View on Tarkov Wiki</p>\n              </TooltipContent>\n            </Tooltip>\n          )}\n        </div>\n      </div>\n\n      {/* Completed checkmark overlay */}\n      {quest.computedStatus === \"completed\" && (\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n          <svg\n            className=\"w-6 h-6 opacity-30\"\n            style={{ color: \"#00a700\" }}\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={3}\n              d=\"M5 13l4 4L19 7\"\n            />\n          </svg>\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport {\n  Lightbulb,\n  ChevronRight,\n  Star,\n  Map as MapIcon,\n  Zap,\n} from \"lucide-react\";\nimport { getTraderColor } from \"@/lib/trader-colors\";\nimport type { QuestWithProgress } from \"@/types\";\n\ninterface NextUpPanelProps {\n  quests: QuestWithProgress[];\n  playerLevel?: number | null;\n  onQuestClick?: (questId: string) => void;\n}\n\ninterface QuestSuggestion {\n  quest: QuestWithProgress;\n  reason: string;\n  priority: number;\n  icon:\n    | \"level\"\n    | \"chain\"\n    | \"map\"\n    | \"kappa\"\n    | \"momentum\"\n    | \"trader\"\n    | \"difficulty\";\n}\n\nexport function NextUpPanel({\n  quests,\n  playerLevel,\n  onQuestClick,\n}: NextUpPanelProps) {\n  // Calculate quest suggestions\n  const suggestions = useMemo(() => {\n    const results: QuestSuggestion[] = [];\n\n    // Get available quests only\n    const availableQuests = quests.filter(\n      (q) => q.computedStatus === \"available\"\n    );\n\n    // 1. At-level quests (highest priority)\n    if (playerLevel) {\n      const atLevelQuests = availableQuests.filter(\n        (q) =>\n          q.levelRequired <= playerLevel && q.levelRequired >= playerLevel - 5\n      );\n      for (const quest of atLevelQuests.slice(0, 3)) {\n        results.push({\n          quest,\n          reason: `Perfect for level ${playerLevel}`,\n          priority: 100 - Math.abs(playerLevel - quest.levelRequired),\n          icon: \"level\",\n        });\n      }\n    }\n\n    // 2. Kappa-required quests (high priority)\n    const kappaQuests = availableQuests.filter((q) => q.kappaRequired);\n    for (const quest of kappaQuests.slice(0, 2)) {\n      if (!results.find((r) => r.quest.id === quest.id)) {\n        results.push({\n          quest,\n          reason: \"Required for Kappa\",\n          priority: 90,\n          icon: \"kappa\",\n        });\n      }\n    }\n\n    // 3. Quests that unlock many others (chain starters)\n    const unlockCounts = new Map<string, number>();\n    for (const quest of quests) {\n      for (const dep of quest.dependsOn || []) {\n        const count = unlockCounts.get(dep.requiredQuest.id) || 0;\n        unlockCounts.set(dep.requiredQuest.id, count + 1);\n      }\n    }\n\n    const chainStarters = availableQuests\n      .filter((q) => (unlockCounts.get(q.id) || 0) >= 2)\n      .sort(\n        (a, b) => (unlockCounts.get(b.id) || 0) - (unlockCounts.get(a.id) || 0)\n      );\n\n    for (const quest of chainStarters.slice(0, 2)) {\n      if (!results.find((r) => r.quest.id === quest.id)) {\n        const unlocks = unlockCounts.get(quest.id) || 0;\n        results.push({\n          quest,\n          reason: `Unlocks ${unlocks} quest${unlocks > 1 ? \"s\" : \"\"}`,\n          priority: 80 + unlocks,\n          icon: \"chain\",\n        });\n      }\n    }\n\n    // 5. Chain completion momentum - quests in nearly-done chains\n    const chainProgress = calculateChainCompletionProgress(\n      quests,\n      availableQuests\n    );\n    const momentumQuests = availableQuests.filter((q) => {\n      const progress = chainProgress.get(q.id);\n      return progress && progress.completionRate >= 0.6;\n    });\n\n    for (const quest of momentumQuests.slice(0, 2)) {\n      if (!results.find((r) => r.quest.id === quest.id)) {\n        const progress = chainProgress.get(quest.id)!;\n        results.push({\n          quest,\n          reason: `${progress.completed}/${progress.total} in chain - finish it!`,\n          priority: 85 + progress.completionRate * 10,\n          icon: \"momentum\",\n        });\n      }\n    }\n\n    // 6. Map synergy - boost quests on the same map as other available quests\n    const mapSynergyCounts = calculateMapSynergy(availableQuests);\n    const synergyQuests = availableQuests\n      .filter((q) => {\n        const maps = (q.objectives || [])\n          .map((o) => o.map)\n          .filter((m): m is string => Boolean(m));\n        return maps.some((m) => (mapSynergyCounts.get(m) || 0) >= 3);\n      })\n      .sort((a, b) => {\n        const aMaps = (a.objectives || [])\n          .map((o) => o.map)\n          .filter((m): m is string => Boolean(m));\n        const bMaps = (b.objectives || [])\n          .map((o) => o.map)\n          .filter((m): m is string => Boolean(m));\n        const aMax =\n          aMaps.length > 0\n            ? Math.max(...aMaps.map((m) => mapSynergyCounts.get(m) || 0))\n            : 0;\n        const bMax =\n          bMaps.length > 0\n            ? Math.max(...bMaps.map((m) => mapSynergyCounts.get(m) || 0))\n            : 0;\n        return bMax - aMax;\n      });\n\n    for (const quest of synergyQuests.slice(0, 2)) {\n      if (!results.find((r) => r.quest.id === quest.id)) {\n        const maps = (quest.objectives || [])\n          .map((o) => o.map)\n          .filter((m): m is string => Boolean(m));\n        const maxSynergy =\n          maps.length > 0\n            ? Math.max(...maps.map((m) => mapSynergyCounts.get(m) || 0))\n            : 0;\n        const primaryMap = maps.find(\n          (m) => mapSynergyCounts.get(m) === maxSynergy\n        );\n        results.push({\n          quest,\n          reason: `${maxSynergy} quests on ${primaryMap} - efficient!`,\n          priority: 75 + Math.min(maxSynergy, 10),\n          icon: \"map\",\n        });\n      }\n    }\n\n    // 7. Trader completion progress\n    const traderProgress = calculateTraderProgress(quests);\n    const traderQuests = availableQuests\n      .filter((q) => (traderProgress.get(q.traderId) || 0) >= 0.7)\n      .sort(\n        (a, b) =>\n          (traderProgress.get(b.traderId) || 0) -\n          (traderProgress.get(a.traderId) || 0)\n      );\n\n    for (const quest of traderQuests.slice(0, 1)) {\n      if (!results.find((r) => r.quest.id === quest.id)) {\n        const progress = traderProgress.get(quest.traderId)!;\n        results.push({\n          quest,\n          reason: `${Math.round(progress * 100)}% ${quest.trader.name} done`,\n          priority: 70 + progress * 5,\n          icon: \"trader\",\n        });\n      }\n    }\n\n    // 8. Difficulty-matched suggestions based on player level\n    if (playerLevel) {\n      const difficultyQuests = availableQuests\n        .filter((q) => {\n          const difficulty = getDifficultyScore(q.experience);\n          // Boost easy quests for new players (level 1-20)\n          if (playerLevel <= 20) return difficulty < 5;\n          // Boost hard quests for veterans (level 41+)\n          if (playerLevel >= 41) return difficulty > 20;\n          // Mid-level players get mixed difficulty\n          return difficulty >= 5 && difficulty <= 30;\n        })\n        .sort((a, b) => {\n          const diffA = getDifficultyScore(a.experience);\n          const diffB = getDifficultyScore(b.experience);\n          // For new players, prefer easier quests\n          if (playerLevel && playerLevel <= 20) return diffA - diffB;\n          // For veterans, prefer harder quests\n          if (playerLevel && playerLevel >= 41) return diffB - diffA;\n          // Mid-level: neutral\n          return 0;\n        });\n\n      for (const quest of difficultyQuests.slice(0, 1)) {\n        if (!results.find((r) => r.quest.id === quest.id)) {\n          const difficulty = getDifficultyScore(quest.experience);\n          const difficultyLabel = getDifficultyLabel(difficulty);\n          results.push({\n            quest,\n            reason: `${difficultyLabel} - ${quest.experience.toLocaleString()} XP`,\n            priority: adjustPriorityByDifficulty(\n              60,\n              playerLevel,\n              quest.experience\n            ),\n            icon: \"difficulty\",\n          });\n        }\n      }\n    }\n\n    // 4. Map efficiency - find map with most available objectives\n    const mapCounts = new Map<string, number>();\n    for (const quest of availableQuests) {\n      for (const obj of quest.objectives || []) {\n        if (obj.map) {\n          mapCounts.set(obj.map, (mapCounts.get(obj.map) || 0) + 1);\n        }\n      }\n    }\n\n    const topMap = Array.from(mapCounts.entries()).sort(\n      (a, b) => b[1] - a[1]\n    )[0];\n\n    if (topMap) {\n      const mapQuests = availableQuests.filter((q) =>\n        (q.objectives || []).some((obj) => obj.map === topMap[0])\n      );\n      for (const quest of mapQuests.slice(0, 2)) {\n        if (!results.find((r) => r.quest.id === quest.id)) {\n          results.push({\n            quest,\n            reason: `${topMap[0]} efficiency`,\n            priority: 70,\n            icon: \"map\",\n          });\n        }\n      }\n    }\n\n    // Apply type diversity filter before sorting\n    const diverse = applyTypeDiversityFilter(results);\n    return diverse.sort((a, b) => b.priority - a.priority).slice(0, 5);\n  }, [quests, playerLevel]);\n\n  const getIcon = (icon: QuestSuggestion[\"icon\"]) => {\n    switch (icon) {\n      case \"level\":\n        return <Zap className=\"w-3 h-3 text-emerald-400\" />;\n      case \"kappa\":\n        return <Star className=\"w-3 h-3 text-yellow-400 fill-yellow-400\" />;\n      case \"chain\":\n        return <ChevronRight className=\"w-3 h-3 text-blue-400\" />;\n      case \"map\":\n        return <MapIcon className=\"w-3 h-3 text-purple-400\" />;\n      case \"momentum\":\n        return <Zap className=\"w-3 h-3 text-orange-400\" />;\n      case \"trader\":\n        return <Star className=\"w-3 h-3 text-cyan-400\" />;\n      case \"difficulty\":\n        return <Lightbulb className=\"w-3 h-3 text-yellow-500\" />;\n    }\n  };\n\n  if (suggestions.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-card border rounded-lg p-3\">\n      <div className=\"flex items-center gap-2 mb-3\">\n        <Lightbulb className=\"w-4 h-4 text-[#d4a574]\" />\n        <span className=\"text-sm font-medium\">Next Up</span>\n        <InfoTooltip />\n      </div>\n\n      <div className=\"space-y-2\">\n        {suggestions.map(({ quest, reason, icon }) => {\n          const colors = getTraderColor(quest.traderId);\n          // Get the primary map for this quest (most common map in objectives)\n          const mapCounts = new Map<string, number>();\n          for (const obj of quest.objectives || []) {\n            if (obj.map) {\n              mapCounts.set(obj.map, (mapCounts.get(obj.map) || 0) + 1);\n            }\n          }\n          const primaryMap = Array.from(mapCounts.entries()).sort(\n            (a, b) => b[1] - a[1]\n          )[0]?.[0];\n\n          return (\n            <button\n              key={quest.id}\n              type=\"button\"\n              onClick={() => onQuestClick?.(quest.id)}\n              className=\"w-full text-left p-2 rounded hover:bg-muted transition-colors group\"\n            >\n              <div className=\"flex items-start gap-2\">\n                <div\n                  className=\"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0\"\n                  style={{ backgroundColor: colors.primary }}\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium leading-tight group-hover:text-primary transition-colors\">\n                    {quest.title}\n                  </div>\n                  {/* Trader and Map info */}\n                  <div className=\"flex items-center gap-1.5 text-[11px] mt-0.5\">\n                    <span\n                      className=\"font-medium\"\n                      style={{ color: colors.primary }}\n                    >\n                      {quest.trader.name}\n                    </span>\n                    {primaryMap && (\n                      <>\n                        <span className=\"text-muted-foreground\">•</span>\n                        <span className=\"text-muted-foreground\">\n                          {primaryMap}\n                        </span>\n                      </>\n                    )}\n                  </div>\n                  {/* Reason row */}\n                  <div className=\"flex items-center gap-1 text-xs text-muted-foreground mt-0.5\">\n                    {getIcon(icon)}\n                    <span>{reason}</span>\n                  </div>\n                </div>\n              </div>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction InfoTooltip() {\n  return (\n    <div className=\"group relative\">\n      <button\n        type=\"button\"\n        title=\"How Next Up Works\"\n        className=\"text-muted-foreground hover:text-foreground transition-colors\"\n      >\n        <svg\n          className=\"w-3.5 h-3.5\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" strokeWidth=\"2\" />\n          <path d=\"M12 16v-4M12 8h.01\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n        </svg>\n      </button>\n      <div className=\"absolute left-0 top-full mt-2 w-64 bg-popover border rounded-lg p-3 text-xs opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 shadow-lg\">\n        <p className=\"font-medium mb-2\">How Next Up Works</p>\n        <ul className=\"space-y-1 text-muted-foreground\">\n          <li>• Your level and available quests</li>\n          <li>• Kappa requirements</li>\n          <li>• Quest chains and dependencies</li>\n          <li>• Map efficiency and synergy</li>\n          <li>• Your trader progress</li>\n          <li>• Quest difficulty based on XP rewards</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nfunction calculateChainCompletionProgress(\n  allQuests: QuestWithProgress[],\n  availableQuests: QuestWithProgress[]\n): Map<string, { completed: number; total: number; completionRate: number }> {\n  const chainProgress = new Map();\n\n  for (const quest of availableQuests) {\n    const chain = findQuestChain(quest, allQuests);\n    const completed = chain.filter(\n      (q) => q.computedStatus === \"completed\"\n    ).length;\n    const total = chain.length;\n    const completionRate = total > 0 ? completed / total : 0;\n\n    chainProgress.set(quest.id, { completed, total, completionRate });\n  }\n\n  return chainProgress;\n}\n\nfunction findQuestChain(\n  quest: QuestWithProgress,\n  allQuests: QuestWithProgress[]\n): QuestWithProgress[] {\n  const chain = new Set<string>([quest.id]);\n\n  const addPrerequisites = (q: QuestWithProgress) => {\n    for (const dep of q.dependsOn || []) {\n      if (!chain.has(dep.requiredQuest.id)) {\n        chain.add(dep.requiredQuest.id);\n        const prereq = allQuests.find((aq) => aq.id === dep.requiredQuest.id);\n        if (prereq) addPrerequisites(prereq);\n      }\n    }\n  };\n\n  addPrerequisites(quest);\n\n  return allQuests.filter((q) => chain.has(q.id));\n}\n\nfunction calculateMapSynergy(\n  availableQuests: QuestWithProgress[]\n): Map<string, number> {\n  const mapCounts = new Map<string, number>();\n\n  for (const quest of availableQuests) {\n    for (const obj of quest.objectives || []) {\n      if (obj.map) {\n        mapCounts.set(obj.map, (mapCounts.get(obj.map) || 0) + 1);\n      }\n    }\n  }\n\n  return mapCounts;\n}\n\nfunction calculateTraderProgress(\n  allQuests: QuestWithProgress[]\n): Map<string, number> {\n  const traderStats = new Map<string, { completed: number; total: number }>();\n\n  for (const quest of allQuests) {\n    const stats = traderStats.get(quest.traderId) || { completed: 0, total: 0 };\n    stats.total++;\n    if (quest.computedStatus === \"completed\") {\n      stats.completed++;\n    }\n    traderStats.set(quest.traderId, stats);\n  }\n\n  const traderProgress = new Map<string, number>();\n  for (const [traderId, stats] of traderStats.entries()) {\n    traderProgress.set(traderId, stats.completed / stats.total);\n  }\n\n  return traderProgress;\n}\n\nfunction applyTypeDiversityFilter(\n  suggestions: QuestSuggestion[]\n): QuestSuggestion[] {\n  const maxPerType = 2;\n  const typeCounts = new Map<string, number>();\n  const diverse: QuestSuggestion[] = [];\n\n  for (const suggestion of suggestions) {\n    const type = suggestion.quest.questType;\n    const count = typeCounts.get(type) || 0;\n\n    if (count < maxPerType) {\n      diverse.push(suggestion);\n      typeCounts.set(type, count + 1);\n    }\n  }\n\n  return diverse;\n}\n\nfunction getDifficultyScore(xp: number): number {\n  // Normalize XP to a 0-50 scale based on observed range (800-43,000 XP)\n  // Score = XP / 1000 gives us 0.8 to 43 range\n  return xp / 1000;\n}\n\nfunction getDifficultyLabel(score: number): string {\n  // Categorize difficulty based on normalized score\n  if (score < 3) return \"Quick win\";\n  if (score < 10) return \"Easy\";\n  if (score < 20) return \"Medium\";\n  if (score < 30) return \"Hard\";\n  return \"Challenge\";\n}\n\nfunction adjustPriorityByDifficulty(\n  basePriority: number,\n  playerLevel: number | null,\n  xp: number\n): number {\n  if (!playerLevel) return basePriority;\n\n  const difficulty = getDifficultyScore(xp);\n  // Boost easy quests for new players (level 1-20)\n  if (playerLevel <= 20 && difficulty < 5) {\n    return basePriority + 10;\n  }\n  // Boost hard quests for veterans (level 41+)\n  if (playerLevel >= 41 && difficulty > 20) {\n    return basePriority + 10;\n  }\n  return basePriority;\n}\n\nexport default NextUpPanel;\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport { LevelQuestCard } from \"./LevelQuestCard\";\nimport { NextUpPanel } from \"@/components/next-up\";\nimport type { QuestWithProgress, QuestStatus, Objective } from \"@/types\";\n\n// Maps in standard order (matching QuestFilters.tsx)\nconst MAPS = [\n  \"Factory\",\n  \"Customs\",\n  \"Woods\",\n  \"Shoreline\",\n  \"Interchange\",\n  \"Reserve\",\n  \"Labs\",\n  \"Lighthouse\",\n  \"Streets of Tarkov\",\n  \"Ground Zero\",\n];\n\n// Special category for quests with no map-specific objectives\nconst ANY_LOCATION = \"Any Location\";\n\n/**\n * Check if an objective is completed\n */\nfunction isObjectiveCompleted(objective: Objective): boolean {\n  return objective.progress?.[0]?.completed ?? false;\n}\n\n/**\n * Get the maps where a quest has incomplete objectives.\n * If all objectives for a specific map are complete, that map won't be included.\n * Returns empty array if quest has no map-specific objectives (meaning \"Any Location\").\n */\nfunction getQuestIncompleteMaps(quest: QuestWithProgress): string[] {\n  const incompleteMapSet = new Set<string>();\n  let hasMapSpecificObjectives = false;\n\n  for (const objective of quest.objectives) {\n    // Skip completed objectives\n    if (isObjectiveCompleted(objective)) continue;\n\n    // Check objective maps\n    if (objective.maps && objective.maps.length > 0) {\n      hasMapSpecificObjectives = true;\n      for (const map of objective.maps) {\n        incompleteMapSet.add(map);\n      }\n    }\n  }\n\n  // If no map-specific objectives exist at all, check quest.location as fallback\n  if (!hasMapSpecificObjectives) {\n    // Check if quest has any incomplete objectives\n    const hasIncompleteObjectives = quest.objectives.some(\n      (obj) => !isObjectiveCompleted(obj)\n    );\n\n    if (hasIncompleteObjectives || quest.computedStatus !== \"completed\") {\n      // Use quest.location if available, otherwise it's \"any map\"\n      if (quest.location) {\n        return [quest.location];\n      }\n      return []; // Empty = \"Any Location\"\n    }\n  }\n\n  return Array.from(incompleteMapSet);\n}\n\ninterface MapGroupsViewProps {\n  quests: QuestWithProgress[];\n  allQuests?: QuestWithProgress[];\n  playerLevel?: number | null;\n  onStatusChange: (questId: string, status: QuestStatus) => void;\n  onQuestDetails?: (questId: string) => void;\n}\n\nexport function MapGroupsView({\n  quests,\n  allQuests,\n  playerLevel,\n  onStatusChange,\n  onQuestDetails,\n}: MapGroupsViewProps) {\n  // Group quests by map using objective-level maps (smart filtering)\n  // Quests only appear in a map column if they have incomplete objectives for that map\n  const questsByMap = useMemo(() => {\n    const groups = new Map<string, QuestWithProgress[]>();\n\n    // Initialize all map groups\n    for (const map of MAPS) {\n      groups.set(map, []);\n    }\n    groups.set(ANY_LOCATION, []);\n\n    for (const quest of quests) {\n      // Get maps where this quest has incomplete objectives\n      const incompleteMaps = getQuestIncompleteMaps(quest);\n\n      if (incompleteMaps.length === 0) {\n        // No map-specific incomplete objectives → \"Any Location\" column\n        // This includes quests with location=null or completed map-specific objectives\n        groups.get(ANY_LOCATION)!.push(quest);\n      } else {\n        // Add to each map where it has incomplete objectives\n        for (const map of incompleteMaps) {\n          if (groups.has(map)) {\n            groups.get(map)!.push(quest);\n          }\n        }\n      }\n    }\n\n    // Sort quests within each group by level, then by trader\n    for (const [, questList] of groups) {\n      questList.sort((a, b) => {\n        if (a.levelRequired !== b.levelRequired) {\n          return a.levelRequired - b.levelRequired;\n        }\n        return a.trader.name.localeCompare(b.trader.name);\n      });\n    }\n\n    return groups;\n  }, [quests]);\n\n  // Calculate stats for each map\n  const mapStats = useMemo(() => {\n    const stats = new Map<\n      string,\n      { total: number; completed: number; available: number }\n    >();\n\n    const allMaps = [...MAPS, ANY_LOCATION];\n    for (const map of allMaps) {\n      const questList = questsByMap.get(map) || [];\n      stats.set(map, {\n        total: questList.length,\n        completed: questList.filter((q) => q.computedStatus === \"completed\")\n          .length,\n        available: questList.filter((q) => q.computedStatus === \"available\")\n          .length,\n      });\n    }\n\n    return stats;\n  }, [questsByMap]);\n\n  // Sort all maps (including Any Location) by total quest count (descending)\n  const orderedMaps = useMemo(() => {\n    const allMaps = [...MAPS, ANY_LOCATION];\n\n    return allMaps.sort((a, b) => {\n      const aCount = mapStats.get(a)?.total || 0;\n      const bCount = mapStats.get(b)?.total || 0;\n\n      // Primary sort: by quest count (descending)\n      if (bCount !== aCount) {\n        return bCount - aCount;\n      }\n\n      // Tiebreaker: alphabetical order\n      return a.localeCompare(b);\n    });\n  }, [mapStats]);\n\n  // Quests for NextUpPanel\n  const nextUpQuests = allQuests ?? [];\n\n  // Handler for clicking a quest in the NextUpPanel\n  const handleNextUpQuestClick = (questId: string) => {\n    onQuestDetails?.(questId);\n  };\n\n  return (\n    <div className=\"h-full overflow-auto\">\n      <div className=\"flex gap-2 p-4 min-w-max\">\n        {/* Next Up Panel - sticky first column */}\n        {nextUpQuests && nextUpQuests.length > 0 && (\n          <div className=\"flex-shrink-0 w-48 sticky left-4 z-20\">\n            <NextUpPanel\n              quests={nextUpQuests}\n              playerLevel={playerLevel}\n              onQuestClick={handleNextUpQuestClick}\n            />\n          </div>\n        )}\n        {orderedMaps.map((map) => {\n          const questList = questsByMap.get(map) || [];\n          const stats = mapStats.get(map)!;\n\n          // Skip empty maps (except Any Location which might be useful to show)\n          if (questList.length === 0 && map !== ANY_LOCATION) {\n            return null;\n          }\n\n          return (\n            <div key={map} className=\"flex-shrink-0 w-36 sm:w-48\">\n              {/* Column header */}\n              <div\n                className=\"sticky top-0 z-10 p-2 rounded-t-lg border-b-2\"\n                style={{\n                  backgroundColor: \"#383945\",\n                  borderColor: stats.available > 0 ? \"#0292c0\" : \"#636363\",\n                }}\n              >\n                <div\n                  className=\"font-semibold text-sm\"\n                  style={{ color: \"#c7c5b3\" }}\n                >\n                  {map}\n                </div>\n                <div className=\"text-xs\" style={{ color: \"#636363\" }}>\n                  {stats.completed}/{stats.total} completed\n                  {stats.available > 0 && (\n                    <span style={{ color: \"#0292c0\" }} className=\"ml-1\">\n                      ({stats.available} available)\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              {/* Quest cards */}\n              <div\n                className=\"space-y-2 p-2 min-h-[200px] rounded-b-lg\"\n                style={{ backgroundColor: \"rgba(56, 57, 69, 0.5)\" }}\n              >\n                {questList.length === 0 ? (\n                  <div\n                    className=\"text-xs text-center py-4\"\n                    style={{ color: \"#636363\" }}\n                  >\n                    No quests\n                  </div>\n                ) : (\n                  questList.map((quest) => (\n                    <LevelQuestCard\n                      key={quest.id}\n                      quest={quest}\n                      playerLevel={playerLevel}\n                      onStatusChange={onStatusChange}\n                      onQuestDetails={onQuestDetails}\n                    />\n                  ))\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { useSession } from \"next-auth/react\";\nimport { toast } from \"sonner\";\nimport { useStats } from \"@/contexts/StatsContext\";\nimport { useUserPrefsContext } from \"@/providers/UserPrefsProvider\";\nimport { SyncStatusIndicator } from \"@/components/quest-tree\";\nimport { MapFilters } from \"@/components/map-filters\";\nimport { QuestTreeSkeleton } from \"@/components/quest-tree/QuestTreeSkeleton\";\nimport { SkipQuestDialog } from \"@/components/quest-tree/SkipQuestDialog\";\nimport { MapGroupsView } from \"@/components/quest-views\";\nimport { WelcomeModal } from \"@/components/onboarding\";\nimport { QuestDetailModal } from \"@/components/quest-detail\";\nimport { CatchUpDialog } from \"@/components/catch-up\";\nimport { useQuests } from \"@/hooks/useQuests\";\nimport { useProgress } from \"@/hooks/useProgress\";\nimport { getIncompletePrerequisites } from \"@/lib/quest-layout\";\nimport type {\n  QuestStatus,\n  QuestWithProgress,\n  QuestFilters as Filters,\n} from \"@/types\";\n\n// Status cycle map for click handling (simplified: available <-> completed)\nconst STATUS_CYCLE: Record<QuestStatus, QuestStatus | null> = {\n  locked: null, // Can't cycle from locked\n  available: \"completed\",\n  in_progress: \"completed\", // Treat in_progress same as available\n  completed: \"available\", // Reset\n};\n\nexport function MapsClient() {\n  const { status: sessionStatus } = useSession();\n  const { setStats } = useStats();\n  const { prefs, isLoading: prefsLoading } = useUserPrefsContext();\n\n  // Show loading skeleton while user preferences load (authenticated users only)\n  const isInitializing =\n    sessionStatus === \"loading\" ||\n    (sessionStatus === \"authenticated\" && prefsLoading);\n\n  // Compute initial filters using user preferences\n  const initialFilters = useMemo(\n    (): Partial<Filters> => ({\n      statuses: [\"available\"],\n      playerLevel: prefs?.playerLevel ?? 1,\n    }),\n    [prefs]\n  );\n\n  const {\n    quests,\n    allQuests,\n    traders,\n    loading,\n    initialLoading,\n    error,\n    filters,\n    setFilters,\n    applyFilters,\n    refetch,\n  } = useQuests({\n    initialFilters,\n  });\n\n  // Sync saved preferences when they load (after initial mount)\n  const prefsLoaded = useRef(false);\n  useEffect(() => {\n    if (!prefs || prefsLoaded.current) return;\n    prefsLoaded.current = true;\n\n    // Apply saved preferences to filters\n    setFilters({\n      playerLevel: prefs.playerLevel ?? 1,\n    });\n\n    // Apply filters immediately so the quest list updates\n    applyFilters();\n  }, [prefs, setFilters, applyFilters]);\n\n  const {\n    progress,\n    updateStatus,\n    unlockedQuests,\n    clearUnlocked,\n    error: progressError,\n    savingQuestIds,\n    lastSynced,\n    isOnline,\n    pendingOfflineCount,\n  } = useProgress();\n\n  // Skip quest dialog state\n  const [skipDialogOpen, setSkipDialogOpen] = useState(false);\n  const [skipTargetQuest, setSkipTargetQuest] =\n    useState<QuestWithProgress | null>(null);\n  const [skipLoading, setSkipLoading] = useState(false);\n\n  // Onboarding state\n  const [showWelcome, setShowWelcome] = useState(false);\n\n  // Catch-up dialog state\n  const [showCatchUp, setShowCatchUp] = useState(false);\n\n  // Quest detail modal state\n  const [detailQuest, setDetailQuest] = useState<QuestWithProgress | null>(\n    null\n  );\n  const [detailModalOpen, setDetailModalOpen] = useState(false);\n\n  // Check if detail quest is currently saving\n  const isDetailQuestSaving = useMemo(() => {\n    return detailQuest ? savingQuestIds.has(detailQuest.id) : false;\n  }, [detailQuest, savingQuestIds]);\n\n  // Refs for stable callback references\n  const questsWithProgressRef = useRef<QuestWithProgress[]>([]);\n  const sessionStatusRef = useRef(sessionStatus);\n  const updateStatusRef = useRef(updateStatus);\n  const refetchRef = useRef(refetch);\n\n  // Merge progress into quests\n  const questsWithProgress = useMemo(\n    () =>\n      quests.map((quest) => {\n        if (quest.computedStatus === \"locked\") {\n          return {\n            ...quest,\n            computedStatus: \"locked\" as const,\n          };\n        }\n        const userStatus = progress.get(quest.id);\n        return {\n          ...quest,\n          computedStatus: userStatus || quest.computedStatus,\n        };\n      }),\n    [quests, progress]\n  );\n\n  // Merge progress into all quests\n  const allQuestsWithProgress = useMemo(\n    () =>\n      allQuests.map((quest) => {\n        if (quest.computedStatus === \"locked\") {\n          return {\n            ...quest,\n            computedStatus: \"locked\" as const,\n          };\n        }\n        const userStatus = progress.get(quest.id);\n        return {\n          ...quest,\n          computedStatus: userStatus || quest.computedStatus,\n        };\n      }),\n    [allQuests, progress]\n  );\n\n  // Keep refs in sync\n  useEffect(() => {\n    questsWithProgressRef.current = questsWithProgress;\n  }, [questsWithProgress]);\n\n  useEffect(() => {\n    sessionStatusRef.current = sessionStatus;\n  }, [sessionStatus]);\n\n  useEffect(() => {\n    updateStatusRef.current = updateStatus;\n  }, [updateStatus]);\n\n  useEffect(() => {\n    refetchRef.current = refetch;\n  }, [refetch]);\n\n  // Show notification when quests are unlocked\n  useEffect(() => {\n    if (unlockedQuests.length > 0) {\n      const count = unlockedQuests.length;\n      toast.success(`${count} quest${count > 1 ? \"s\" : \"\"} unlocked!`, {\n        description: \"New quests are now available.\",\n      });\n      clearUnlocked();\n      refetch();\n    }\n  }, [unlockedQuests, clearUnlocked, refetch]);\n\n  // Show error toast when progress error occurs\n  useEffect(() => {\n    if (progressError) {\n      toast.error(\"Progress Error\", { description: progressError });\n    }\n  }, [progressError]);\n\n  // Check for first-time user\n  useEffect(() => {\n    if (loading) return;\n\n    const hasSeenWelcome = localStorage.getItem(\"eft-tracker-onboarding\");\n    if (!hasSeenWelcome) {\n      setShowWelcome(true);\n    }\n  }, [loading]);\n\n  const handleOnboardingComplete = useCallback(() => {\n    localStorage.setItem(\"eft-tracker-onboarding\", \"completed\");\n    setShowWelcome(false);\n  }, []);\n\n  const handleCatchUpFromWelcome = useCallback(() => {\n    localStorage.setItem(\"eft-tracker-onboarding\", \"completed\");\n    setShowWelcome(false);\n    setShowCatchUp(true);\n  }, []);\n\n  const handleCatchUpComplete = useCallback(() => {\n    refetch();\n  }, [refetch]);\n\n  const handleQuestDetails = useCallback((questId: string) => {\n    const quest = questsWithProgressRef.current.find((q) => q.id === questId);\n    if (quest) {\n      setDetailQuest(quest);\n      setDetailModalOpen(true);\n    }\n  }, []);\n\n  const skipPrerequisites = useMemo(() => {\n    if (!skipTargetQuest) return [];\n    return getIncompletePrerequisites(\n      skipTargetQuest.id,\n      allQuestsWithProgress\n    );\n  }, [skipTargetQuest, allQuestsWithProgress]);\n\n  const handleSkipConfirm = useCallback(async () => {\n    if (!skipTargetQuest || skipPrerequisites.length === 0) return;\n\n    setSkipLoading(true);\n    try {\n      for (const prereq of skipPrerequisites) {\n        const success = await updateStatus(prereq.id, \"completed\");\n        if (!success) {\n          toast.error(\"Failed to Update\", {\n            description: `Could not complete ${prereq.title}. Please try again.`,\n          });\n          setSkipLoading(false);\n          return;\n        }\n      }\n\n      toast.success(\n        `${skipPrerequisites.length} quest${skipPrerequisites.length > 1 ? \"s\" : \"\"} completed!`,\n        {\n          description: `${skipTargetQuest.title} is now available.`,\n        }\n      );\n\n      setSkipDialogOpen(false);\n      setSkipTargetQuest(null);\n      await refetch();\n    } catch {\n      toast.error(\"Failed to Update\", {\n        description:\n          \"Could not complete prerequisite quests. Please try again.\",\n      });\n    } finally {\n      setSkipLoading(false);\n    }\n  }, [skipTargetQuest, skipPrerequisites, updateStatus, refetch]);\n\n  const handleStatusChange = useCallback(async (questId: string) => {\n    const quest = questsWithProgressRef.current.find((q) => q.id === questId);\n    if (!quest) return;\n\n    const currentStatus = quest.computedStatus;\n\n    if (currentStatus === \"locked\") {\n      if (sessionStatusRef.current !== \"authenticated\") {\n        toast.warning(\"Sign In Required\", {\n          description: \"Please sign in to track your progress.\",\n          action: {\n            label: \"Sign In\",\n            onClick: () => (window.location.href = \"/login\"),\n          },\n        });\n        return;\n      }\n\n      setSkipTargetQuest(quest);\n      setSkipDialogOpen(true);\n      return;\n    }\n\n    if (sessionStatusRef.current !== \"authenticated\") {\n      toast.warning(\"Sign In Required\", {\n        description: \"Please sign in to track your progress.\",\n        action: {\n          label: \"Sign In\",\n          onClick: () => (window.location.href = \"/login\"),\n        },\n      });\n      return;\n    }\n\n    const nextStatus = STATUS_CYCLE[currentStatus];\n    if (!nextStatus) return;\n\n    const success = await updateStatusRef.current(questId, nextStatus);\n    if (success) {\n      if (nextStatus === \"completed\") {\n        toast.success(\"Quest Completed!\", {\n          description: quest.title,\n        });\n      }\n      await refetchRef.current();\n    } else {\n      toast.error(\"Failed to Update\", {\n        description: \"Could not update quest status. Please try again.\",\n      });\n    }\n  }, []);\n\n  // Wrapper for modal - reuses parent's handleStatusChange logic\n  const handleModalStatusChange = useCallback(\n    async (questId: string) => {\n      await handleStatusChange(questId);\n    },\n    [handleStatusChange]\n  );\n\n  // Handle objective toggle from modal (supports both binary and numeric)\n  const handleObjectiveToggle = useCallback(\n    async (\n      objectiveId: string,\n      update: boolean | { current: number }\n    ): Promise<{ questStatusChanged?: boolean; newQuestStatus?: string }> => {\n      if (sessionStatusRef.current !== \"authenticated\") {\n        toast.error(\"Sign in Required\", {\n          description: \"Please sign in to track quest progress.\",\n        });\n        return { questStatusChanged: false };\n      }\n\n      try {\n        // Build request body based on update type\n        const body =\n          typeof update === \"boolean\"\n            ? { completed: update }\n            : { current: update.current };\n\n        const response = await fetch(`/api/progress/objective/${objectiveId}`, {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(body),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.error || \"Failed to update objective\");\n        }\n\n        const data = await response.json();\n\n        // Refetch quests to get updated objective progress\n        await refetchRef.current();\n\n        // Show toast if quest status changed\n        if (data.quest?.statusChanged) {\n          if (data.quest.status === \"COMPLETED\") {\n            toast.success(\"Quest Completed!\", {\n              description: `All objectives for ${data.quest.title} are complete.`,\n            });\n          } else if (data.quest.status === \"IN_PROGRESS\") {\n            toast.info(\"Quest Started\", {\n              description: data.quest.title,\n            });\n          }\n        }\n\n        return {\n          questStatusChanged: data.quest?.statusChanged ?? false,\n          newQuestStatus: data.quest?.status,\n        };\n      } catch (err) {\n        toast.error(\"Failed to Update Objective\", {\n          description: err instanceof Error ? err.message : \"Please try again.\",\n        });\n        return { questStatusChanged: false };\n      }\n    },\n    []\n  );\n\n  const stats = useMemo(\n    () => ({\n      total: questsWithProgress.length,\n      completed: questsWithProgress.filter(\n        (q) => q.computedStatus === \"completed\"\n      ).length,\n      available: questsWithProgress.filter(\n        (q) => q.computedStatus === \"available\"\n      ).length,\n      locked: questsWithProgress.filter((q) => q.computedStatus === \"locked\")\n        .length,\n    }),\n    [questsWithProgress]\n  );\n\n  useEffect(() => {\n    if (!loading && !error) {\n      setStats(stats);\n    }\n    return () => setStats(null);\n  }, [stats, setStats, loading, error]);\n\n  if (initialLoading || isInitializing) {\n    return <QuestTreeSkeleton />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-lg font-medium text-destructive\">\n            Error loading quests\n          </p>\n          <p className=\"text-sm text-muted-foreground mb-4\">{error}</p>\n          <button\n            onClick={() => refetch()}\n            className=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col\">\n      <WelcomeModal\n        open={showWelcome}\n        onOpenChange={setShowWelcome}\n        onGetStarted={handleOnboardingComplete}\n        onCatchUp={handleCatchUpFromWelcome}\n      />\n      <CatchUpDialog\n        open={showCatchUp}\n        onOpenChange={setShowCatchUp}\n        quests={allQuestsWithProgress}\n        onComplete={handleCatchUpComplete}\n      />\n      <SkipQuestDialog\n        open={skipDialogOpen}\n        onOpenChange={setSkipDialogOpen}\n        targetQuest={skipTargetQuest}\n        prerequisites={skipPrerequisites}\n        onConfirm={handleSkipConfirm}\n        isLoading={skipLoading}\n      />\n      <QuestDetailModal\n        quest={detailQuest}\n        open={detailModalOpen}\n        onOpenChange={setDetailModalOpen}\n        onStatusChange={handleModalStatusChange}\n        onObjectiveToggle={handleObjectiveToggle}\n        isSaving={isDetailQuestSaving}\n      />\n      <MapFilters\n        traders={traders}\n        quests={allQuestsWithProgress}\n        filters={filters}\n        onFilterChange={setFilters}\n        onApplyFilters={applyFilters}\n      />\n      <div className=\"flex-1 min-h-0\">\n        {questsWithProgress.length > 0 ? (\n          <MapGroupsView\n            quests={questsWithProgress}\n            allQuests={allQuestsWithProgress}\n            playerLevel={filters.playerLevel}\n            onStatusChange={handleStatusChange}\n            onQuestDetails={handleQuestDetails}\n          />\n        ) : (\n          <div className=\"flex items-center justify-center h-full\">\n            <p className=\"text-muted-foreground\">\n              No quests found matching your filters.\n            </p>\n          </div>\n        )}\n      </div>\n      {sessionStatus === \"authenticated\" && (\n        <div className=\"shrink-0 px-4 py-2 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n          <SyncStatusIndicator\n            lastSynced={lastSynced}\n            isOnline={isOnline}\n            isSaving={savingQuestIds.size > 0}\n            pendingOfflineCount={pendingOfflineCount}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z',\n      key: '1xq2db',\n    },\n  ],\n];\n\n/**\n * @component @name Zap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxNGExIDEgMCAwIDEtLjc4LTEuNjNsOS45LTEwLjJhLjUuNSAwIDAgMSAuODYuNDZsLTEuOTIgNi4wMkExIDEgMCAwIDAgMTMgMTBoN2ExIDEgMCAwIDEgLjc4IDEuNjNsLTkuOSAxMC4yYS41LjUgMCAwIDEtLjg2LS40NmwxLjkyLTYuMDJBMSAxIDAgMCAwIDExIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Zap = createLucideIcon('zap', __iconNode);\n\nexport default Zap;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z',\n      key: '169xi5',\n    },\n  ],\n  ['path', { d: 'M15 5.764v15', key: '1pn4in' }],\n  ['path', { d: 'M9 3.236v15', key: '1uimfh' }],\n];\n\n/**\n * @component @name Map\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuMTA2IDUuNTUzYTIgMiAwIDAgMCAxLjc4OCAwbDMuNjU5LTEuODNBMSAxIDAgMCAxIDIxIDQuNjE5djEyLjc2NGExIDEgMCAwIDEtLjU1My44OTRsLTQuNTUzIDIuMjc3YTIgMiAwIDAgMS0xLjc4OCAwbC00LjIxMi0yLjEwNmEyIDIgMCAwIDAtMS43ODggMGwtMy42NTkgMS44M0ExIDEgMCAwIDEgMyAxOS4zODFWNi42MThhMSAxIDAgMCAxIC41NTMtLjg5NGw0LjU1My0yLjI3N2EyIDIgMCAwIDEgMS43ODggMHoiIC8+CiAgPHBhdGggZD0iTTE1IDUuNzY0djE1IiAvPgogIDxwYXRoIGQ9Ik05IDMuMjM2djE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/map\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Map = createLucideIcon('map', __iconNode);\n\nexport default Map;\n"],"names":[],"mappings":"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","ignoreList":[5,6]}