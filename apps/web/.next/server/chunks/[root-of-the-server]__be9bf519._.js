module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},20635,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},30056,e=>e.a(async(t,r)=>{try{let t=await e.y("pg");e.n(t),r()}catch(e){r(e)}},!0),29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},55711,(e,t,r)=>{t.exports=e.x("pino",()=>require("pino"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},84310,e=>e.a(async(t,r)=>{try{var a=e.i(14235),s=e.i(18387),n=e.i(54799),i=t([a]);async function o(e){try{let t=e.email?n.default.createHash("sha256").update(e.email).digest("hex"):void 0;await a.prisma.securityEvent.create({data:{type:e.type,userId:e.userId,ipAddress:e.ipAddress,userAgent:e.userAgent,metadata:{...e.metadata,emailHash:t}}}),"LOGIN_FAILED"===e.type&&await p(e.ipAddress),"RATE_LIMIT_EXCEEDED"===e.type&&await c(e.ipAddress)}catch(t){s.logger.error({error:t,eventType:e.type},"Failed to log security event")}}async function p(e){let t=new Date(Date.now()-36e5),r=await a.prisma.securityEvent.count({where:{type:"LOGIN_FAILED",ipAddress:e,createdAt:{gte:t}}});r>=10&&s.logger.warn({ipAddress:e,failedAttempts:r},"Suspicious login activity detected - possible brute force attack")}async function c(e){let t=new Date(Date.now()-9e5),r=await a.prisma.securityEvent.count({where:{type:"RATE_LIMIT_EXCEEDED",ipAddress:e,createdAt:{gte:t}}});r>=5&&s.logger.warn({ipAddress:e,rateLimitHits:r},"Repeated rate limit violations - possible automated attack")}[a]=i.then?(await i)():i,e.s(["logSecurityEvent",()=>o]),r()}catch(e){r(e)}},!1),65349,e=>{"use strict";function t(e){return!!e&&(null!==e.target&&void 0!==e.target&&e.target>0?(e.current??0)>=e.target:!0===e.completed)}function r(e){let r=0,a=0,s=0,n=0;for(let i of e){r++;let e=t(i.progress?.[0]);e&&a++,!i.optional&&(s++,e&&n++)}return{total:r,completed:a,requiredTotal:s,requiredCompleted:n}}function a(e,s,n="AVAILABLE"){if("LOCKED"===e)return"LOCKED";if(0===s.length)return e??n;let{requiredTotal:i,requiredCompleted:o}=r(s),p=i>0?i:s.length,c=i>0?o:s.filter(e=>t(e.progress?.[0])).length;return c>=p&&p>0?"COMPLETED":c>0?"IN_PROGRESS":e??n}function s(e){if(0===e.length)return!1;let r=e.filter(e=>!e.optional);return(r.length>0?r:e).every(e=>t(e.progress?.[0]))}e.s(["computeObjectiveProgress",()=>r,"computeQuestStatus",()=>a,"isObjectiveComplete",()=>t,"shouldAutoCompleteQuest",()=>s])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__be9bf519._.js.map