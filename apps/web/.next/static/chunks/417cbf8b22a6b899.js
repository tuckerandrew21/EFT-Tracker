(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70305,(e,t,n)=>{"use strict";var r=e.r(86375),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return s(function(){o.value=n,o.getSnapshot=t,u(o)&&c({inst:o})},[e,n,t]),a(function(){return u(o)&&c({inst:o}),e(function(){u(o)&&c({inst:o})})},[e]),l(n),n};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},34960,(e,t,n)=>{"use strict";t.exports=e.r(70305)},21665,(e,t,n)=>{"use strict";var r=e.r(86375),o=e.r(34960),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=a(e,(d=u(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,o]))[0],d[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},96177,(e,t,n)=>{"use strict";t.exports=e.r(21665)},79381,(e,t,n)=>{t.exports=function(){this.__data__=[],this.size=0}},78744,(e,t,n)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},56755,(e,t,n)=>{var r=e.r(78744);t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},66612,(e,t,n)=>{var r=e.r(56755),o=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},80256,(e,t,n)=>{var r=e.r(56755);t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},52641,(e,t,n)=>{var r=e.r(56755);t.exports=function(e){return r(this.__data__,e)>-1}},26145,(e,t,n)=>{var r=e.r(56755);t.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},22416,(e,t,n)=>{var r=e.r(79381),o=e.r(66612),i=e.r(80256),a=e.r(52641),s=e.r(26145);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,t.exports=l},8027,(e,t,n)=>{var r=e.r(22416);t.exports=function(){this.__data__=new r,this.size=0}},5153,(e,t,n)=>{t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},41364,(e,t,n)=>{t.exports=function(e){return this.__data__.get(e)}},89631,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},72668,(e,t,n)=>{t.exports=e.g&&e.g.Object===Object&&e.g},59527,(e,t,n)=>{var r=e.r(72668),o="object"==typeof self&&self&&self.Object===Object&&self;t.exports=r||o||Function("return this")()},7667,(e,t,n)=>{t.exports=e.r(59527).Symbol},52930,(e,t,n)=>{var r=e.r(7667),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;t.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},21955,(e,t,n)=>{var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},23748,(e,t,n)=>{var r=e.r(7667),o=e.r(52930),i=e.r(21955),a=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},91606,(e,t,n)=>{t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},63883,(e,t,n)=>{var r=e.r(23748),o=e.r(91606);t.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},56921,(e,t,n)=>{t.exports=e.r(59527)["__core-js_shared__"]},63803,(e,t,n)=>{var r,o=e.r(56921),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!i&&i in e}},95331,(e,t,n)=>{var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},32150,(e,t,n)=>{var r=e.r(63883),o=e.r(63803),i=e.r(91606),a=e.r(95331),s=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:s).test(a(e))}},61686,(e,t,n)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},22280,(e,t,n)=>{var r=e.r(32150),o=e.r(61686);t.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},74136,(e,t,n)=>{t.exports=e.r(22280)(e.r(59527),"Map")},95269,(e,t,n)=>{t.exports=e.r(22280)(Object,"create")},14640,(e,t,n)=>{var r=e.r(95269);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2814,(e,t,n)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},20134,(e,t,n)=>{var r=e.r(95269),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},2951,(e,t,n)=>{var r=e.r(95269),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},79981,(e,t,n)=>{var r=e.r(95269);t.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},4937,(e,t,n)=>{var r=e.r(14640),o=e.r(2814),i=e.r(20134),a=e.r(2951),s=e.r(79981);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,t.exports=l},20895,(e,t,n)=>{var r=e.r(4937),o=e.r(22416),i=e.r(74136);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},68725,(e,t,n)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},48365,(e,t,n)=>{var r=e.r(68725);t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},91270,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},87911,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){return r(this,e).get(e)}},23680,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){return r(this,e).has(e)}},27495,(e,t,n)=>{var r=e.r(48365);t.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=+(n.size!=o),this}},41177,(e,t,n)=>{var r=e.r(20895),o=e.r(91270),i=e.r(87911),a=e.r(23680),s=e.r(27495);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,t.exports=l},27270,(e,t,n)=>{var r=e.r(22416),o=e.r(74136),i=e.r(41177);t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},75266,(e,t,n)=>{var r=e.r(22416),o=e.r(8027),i=e.r(5153),a=e.r(41364),s=e.r(89631),l=e.r(27270);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,t.exports=u},39372,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},47474,(e,t,n)=>{var r=e.r(22280);t.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},30215,(e,t,n)=>{var r=e.r(47474);t.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},63217,(e,t,n)=>{var r=e.r(30215),o=e.r(78744),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},6227,(e,t,n)=>{var r=e.r(63217),o=e.r(30215);t.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=i?i(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?o(n,u,c):r(n,u,c)}return n}},45203,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},19674,(e,t,n)=>{t.exports=function(e){return null!=e&&"object"==typeof e}},48313,(e,t,n)=>{var r=e.r(23748),o=e.r(19674);t.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},17288,(e,t,n)=>{var r=e.r(48313),o=e.r(19674),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable;t.exports=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")}},72098,(e,t,n)=>{t.exports=Array.isArray},24019,(e,t,n)=>{t.exports=function(){return!1}},85370,(e,t,n)=>{var r=e.r(59527),o=e.r(24019),i=n&&!n.nodeType&&n,a=i&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||o},29582,(e,t,n)=>{var r=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},45373,(e,t,n)=>{t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},19575,(e,t,n)=>{var r=e.r(23748),o=e.r(45373),i=e.r(19674),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},32900,(e,t,n)=>{t.exports=function(e){return function(t){return e(t)}}},45361,(e,t,n)=>{var r=e.r(72668),o=n&&!n.nodeType&&n,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process;t.exports=function(){try{var e=i&&i.require&&i.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}()},13376,(e,t,n)=>{var r=e.r(19575),o=e.r(32900),i=e.r(45361),a=i&&i.isTypedArray;t.exports=a?o(a):r},27424,(e,t,n)=>{var r=e.r(45203),o=e.r(17288),i=e.r(72098),a=e.r(85370),s=e.r(29582),l=e.r(13376),u=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=i(e),c=!n&&o(e),d=!n&&!c&&a(e),f=!n&&!c&&!d&&l(e),h=n||c||d||f,p=h?r(e.length,String):[],m=p.length;for(var g in e)(t||u.call(e,g))&&!(h&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m)))&&p.push(g);return p}},70795,(e,t,n)=>{var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},91915,(e,t,n)=>{t.exports=function(e,t){return function(n){return e(t(n))}}},42918,(e,t,n)=>{t.exports=e.r(91915)(Object.keys,Object)},3114,(e,t,n)=>{var r=e.r(70795),o=e.r(42918),i=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7850,(e,t,n)=>{var r=e.r(63883),o=e.r(45373);t.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},33089,(e,t,n)=>{var r=e.r(27424),o=e.r(3114),i=e.r(7850);t.exports=function(e){return i(e)?r(e):o(e)}},8687,(e,t,n)=>{var r=e.r(6227),o=e.r(33089);t.exports=function(e,t){return e&&r(t,o(t),e)}},42151,(e,t,n)=>{t.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6645,(e,t,n)=>{var r=e.r(91606),o=e.r(70795),i=e.r(42151),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var s in e)"constructor"==s&&(t||!a.call(e,s))||n.push(s);return n}},75419,(e,t,n)=>{var r=e.r(27424),o=e.r(6645),i=e.r(7850);t.exports=function(e){return i(e)?r(e,!0):o(e)}},20341,(e,t,n)=>{var r=e.r(6227),o=e.r(75419);t.exports=function(e,t){return e&&r(t,o(t),e)}},44242,(e,t,n)=>{var r=e.r(59527),o=n&&!n.nodeType&&n,i=o&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},33442,(e,t,n)=>{t.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},19519,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},87024,(e,t,n)=>{t.exports=function(){return[]}},96852,(e,t,n)=>{var r=e.r(19519),o=e.r(87024),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;t.exports=a?function(e){return null==e?[]:r(a(e=Object(e)),function(t){return i.call(e,t)})}:o},3332,(e,t,n)=>{var r=e.r(6227),o=e.r(96852);t.exports=function(e,t){return r(e,o(e),t)}},34666,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},30968,(e,t,n)=>{t.exports=e.r(91915)(Object.getPrototypeOf,Object)},29830,(e,t,n)=>{var r=e.r(34666),o=e.r(30968),i=e.r(96852),a=e.r(87024);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a},83664,(e,t,n)=>{var r=e.r(6227),o=e.r(29830);t.exports=function(e,t){return r(e,o(e),t)}},41612,(e,t,n)=>{var r=e.r(34666),o=e.r(72098);t.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},28423,(e,t,n)=>{var r=e.r(41612),o=e.r(96852),i=e.r(33089);t.exports=function(e){return r(e,i,o)}},26640,(e,t,n)=>{var r=e.r(41612),o=e.r(29830),i=e.r(75419);t.exports=function(e){return r(e,i,o)}},31751,(e,t,n)=>{t.exports=e.r(22280)(e.r(59527),"DataView")},31337,(e,t,n)=>{t.exports=e.r(22280)(e.r(59527),"Promise")},11524,(e,t,n)=>{t.exports=e.r(22280)(e.r(59527),"Set")},15942,(e,t,n)=>{t.exports=e.r(22280)(e.r(59527),"WeakMap")},26568,(e,t,n)=>{var r=e.r(31751),o=e.r(74136),i=e.r(31337),a=e.r(11524),s=e.r(15942),l=e.r(23748),u=e.r(95331),c="[object Map]",d="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",m=u(r),g=u(o),v=u(i),x=u(a),y=u(s),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||o&&b(new o)!=c||i&&b(i.resolve())!=d||a&&b(new a)!=f||s&&b(new s)!=h)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return p;case g:return c;case v:return d;case x:return f;case y:return h}return t}),t.exports=b},37208,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},33576,(e,t,n)=>{t.exports=e.r(59527).Uint8Array},88187,(e,t,n)=>{var r=e.r(33576);t.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},55438,(e,t,n)=>{var r=e.r(88187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},97169,(e,t,n)=>{var r=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},90793,(e,t,n)=>{var r=e.r(7667),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(e){return i?Object(i.call(e)):{}}},51235,(e,t,n)=>{var r=e.r(88187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},99513,(e,t,n)=>{var r=e.r(88187),o=e.r(55438),i=e.r(97169),a=e.r(90793),s=e.r(51235);t.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Symbol]":return a(e)}}},69416,(e,t,n)=>{var r=e.r(91606),o=Object.create;t.exports=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},7299,(e,t,n)=>{var r=e.r(69416),o=e.r(30968),i=e.r(70795);t.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},44732,(e,t,n)=>{var r=e.r(26568),o=e.r(19674);t.exports=function(e){return o(e)&&"[object Map]"==r(e)}},49084,(e,t,n)=>{var r=e.r(44732),o=e.r(32900),i=e.r(45361),a=i&&i.isMap;t.exports=a?o(a):r},92596,(e,t,n)=>{var r=e.r(26568),o=e.r(19674);t.exports=function(e){return o(e)&&"[object Set]"==r(e)}},91316,(e,t,n)=>{var r=e.r(92596),o=e.r(32900),i=e.r(45361),a=i&&i.isSet;t.exports=a?o(a):r},16543,(e,t,n)=>{var r=e.r(75266),o=e.r(39372),i=e.r(63217),a=e.r(8687),s=e.r(20341),l=e.r(44242),u=e.r(33442),c=e.r(3332),d=e.r(83664),f=e.r(28423),h=e.r(26640),p=e.r(26568),m=e.r(37208),g=e.r(99513),v=e.r(7299),x=e.r(72098),y=e.r(85370),b=e.r(49084),w=e.r(91606),k=e.r(91316),j=e.r(33089),_=e.r(75419),E="[object Arguments]",N="[object Function]",S="[object Object]",C={};C[E]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[S]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[N]=C["[object WeakMap]"]=!1,t.exports=function e(t,n,M,O,A,P){var L,R=1&n,I=2&n,T=4&n;if(M&&(L=A?M(t,O,A,P):M(t)),void 0!==L)return L;if(!w(t))return t;var D=x(t);if(D){if(L=m(t),!R)return u(t,L)}else{var z=p(t),$=z==N||"[object GeneratorFunction]"==z;if(y(t))return l(t,R);if(z==S||z==E||$&&!A){if(L=I||$?{}:v(t),!R)return I?d(t,s(L,t)):c(t,a(L,t))}else{if(!C[z])return A?t:{};L=g(t,z,R)}}P||(P=new r);var B=P.get(t);if(B)return B;P.set(t,L),k(t)?t.forEach(function(r){L.add(e(r,n,M,r,t,P))}):b(t)&&t.forEach(function(r,o){L.set(o,e(r,n,M,o,t,P))});var q=T?I?h:f:I?_:j,H=D?void 0:q(t);return o(H||t,function(r,o){H&&(r=t[o=r]),i(L,o,e(r,n,M,o,t,P))}),L}},84886,(e,t,n)=>{var r=e.r(16543);t.exports=function(e){return r(e,4)}},60220,(e,t,n)=>{t.exports=function(e){return function(){return e}}},2327,(e,t,n)=>{t.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}},10673,(e,t,n)=>{t.exports=e.r(2327)()},88607,(e,t,n)=>{var r=e.r(10673),o=e.r(33089);t.exports=function(e,t){return e&&r(e,t,o)}},37390,(e,t,n)=>{var r=e.r(7850);t.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},35496,(e,t,n)=>{var r=e.r(88607);t.exports=e.r(37390)(r)},13870,(e,t,n)=>{t.exports=function(e){return e}},35310,(e,t,n)=>{var r=e.r(13870);t.exports=function(e){return"function"==typeof e?e:r}},7059,(e,t,n)=>{var r=e.r(39372),o=e.r(35496),i=e.r(35310),a=e.r(72098);t.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},33763,(e,t,n)=>{t.exports=e.r(7059)},17164,(e,t,n)=>{var r=e.r(35496);t.exports=function(e,t){var n=[];return r(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}},47370,(e,t,n)=>{t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},3852,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},25964,(e,t,n)=>{var r=e.r(41177),o=e.r(47370),i=e.r(3852);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},58423,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},89808,(e,t,n)=>{t.exports=function(e,t){return e.has(t)}},75483,(e,t,n)=>{var r=e.r(25964),o=e.r(58423),i=e.r(89808);t.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var f=l.get(e),h=l.get(t);if(f&&h)return f==t&&h==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var v=e[p],x=t[p];if(a)var y=u?a(x,v,p,t,e,l):a(v,x,p,e,t,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!o(t,function(e,t){if(!i(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)})){m=!1;break}}else if(!(v===x||s(v,x,n,a,l))){m=!1;break}}return l.delete(e),l.delete(t),m}},80060,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},49123,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},39965,(e,t,n)=>{var r=e.r(7667),o=e.r(33576),i=e.r(78744),a=e.r(75483),s=e.r(80060),l=e.r(49123),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(e,t,n,r,u,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!d(new o(e),new o(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var p=1&r;if(h||(h=l),e.size!=t.size&&!p)break;var m=f.get(e);if(m)return m==t;r|=2,f.set(e,t);var g=a(h(e),h(t),r,u,d,f);return f.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},3206,(e,t,n)=>{var r=e.r(28423),o=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,i,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var d=c;d--;){var f=u[d];if(!(l?f in t:o.call(t,f)))return!1}var h=s.get(e),p=s.get(t);if(h&&p)return h==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<c;){var v=e[f=u[d]],x=t[f];if(i)var y=l?i(x,v,f,t,e,s):i(v,x,f,e,t,s);if(!(void 0===y?v===x||a(v,x,n,i,s):y)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(m=!1)}return s.delete(e),s.delete(t),m}},54525,(e,t,n)=>{var r=e.r(75266),o=e.r(75483),i=e.r(39965),a=e.r(3206),s=e.r(26568),l=e.r(72098),u=e.r(85370),c=e.r(13376),d="[object Arguments]",f="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,m,g,v){var x=l(e),y=l(t),b=x?f:s(e),w=y?f:s(t);b=b==d?h:b,w=w==d?h:w;var k=b==h,j=w==h,_=b==w;if(_&&u(e)){if(!u(t))return!1;x=!0,k=!1}if(_&&!k)return v||(v=new r),x||c(e)?o(e,t,n,m,g,v):i(e,t,b,n,m,g,v);if(!(1&n)){var E=k&&p.call(e,"__wrapped__"),N=j&&p.call(t,"__wrapped__");if(E||N){var S=E?e.value():e,C=N?t.value():t;return v||(v=new r),g(S,C,n,m,v)}}return!!_&&(v||(v=new r),a(e,t,n,m,g,v))}},33698,(e,t,n)=>{var r=e.r(54525),o=e.r(19674);t.exports=function e(t,n,i,a,s){return t===n||(null!=t&&null!=n&&(o(t)||o(n))?r(t,n,i,a,e,s):t!=t&&n!=n)}},20868,(e,t,n)=>{var r=e.r(75266),o=e.r(33698);t.exports=function(e,t,n,i){var a=n.length,s=a,l=!i;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],d=e[c],f=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var h=new r;if(i)var p=i(d,f,c,e,t,h);if(!(void 0===p?o(f,d,3,i,h):p))return!1}}return!0}},10150,(e,t,n)=>{var r=e.r(91606);t.exports=function(e){return e==e&&!r(e)}},48736,(e,t,n)=>{var r=e.r(10150),o=e.r(33089);t.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},6400,(e,t,n)=>{t.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},30828,(e,t,n)=>{var r=e.r(20868),o=e.r(48736),i=e.r(6400);t.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},48664,(e,t,n)=>{var r=e.r(23748),o=e.r(19674);t.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},62931,(e,t,n)=>{var r=e.r(72098),o=e.r(48664),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},97230,(e,t,n)=>{var r=e.r(41177);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},43096,(e,t,n)=>{var r=e.r(97230);t.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},59461,(e,t,n)=>{var r=e.r(43096),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;t.exports=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)}),t})},66536,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},1596,(e,t,n)=>{var r=e.r(7667),o=e.r(66536),i=e.r(72098),a=e.r(48664),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},84016,(e,t,n)=>{var r=e.r(1596);t.exports=function(e){return null==e?"":r(e)}},60575,(e,t,n)=>{var r=e.r(72098),o=e.r(62931),i=e.r(59461),a=e.r(84016);t.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},28359,(e,t,n)=>{var r=e.r(48664),o=1/0;t.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},47449,(e,t,n)=>{var r=e.r(60575),o=e.r(28359);t.exports=function(e,t){t=r(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},61317,(e,t,n)=>{var r=e.r(47449);t.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},7831,(e,t,n)=>{t.exports=function(e,t){return null!=e&&t in Object(e)}},60492,(e,t,n)=>{var r=e.r(60575),o=e.r(17288),i=e.r(72098),a=e.r(29582),s=e.r(45373),l=e.r(28359);t.exports=function(e,t,n){t=r(t,e);for(var u=-1,c=t.length,d=!1;++u<c;){var f=l(t[u]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&a(f,c)&&(i(e)||o(e))}},98814,(e,t,n)=>{var r=e.r(7831),o=e.r(60492);t.exports=function(e,t){return null!=e&&o(e,t,r)}},92764,(e,t,n)=>{var r=e.r(33698),o=e.r(61317),i=e.r(98814),a=e.r(62931),s=e.r(10150),l=e.r(6400),u=e.r(28359);t.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,3)}}},18114,(e,t,n)=>{t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},49286,(e,t,n)=>{var r=e.r(47449);t.exports=function(e){return function(t){return r(t,e)}}},71318,(e,t,n)=>{var r=e.r(18114),o=e.r(49286),i=e.r(62931),a=e.r(28359);t.exports=function(e){return i(e)?r(a(e)):o(e)}},57529,(e,t,n)=>{var r=e.r(30828),o=e.r(92764),i=e.r(13870),a=e.r(72098),s=e.r(71318);t.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},58862,(e,t,n)=>{var r=e.r(19519),o=e.r(17164),i=e.r(57529),a=e.r(72098);t.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},94110,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&r.call(e,t)}},41054,(e,t,n)=>{var r=e.r(94110),o=e.r(60492);t.exports=function(e,t){return null!=e&&o(e,t,r)}},20686,(e,t,n)=>{var r=e.r(3114),o=e.r(26568),i=e.r(17288),a=e.r(72098),s=e.r(7850),l=e.r(85370),u=e.r(70795),c=e.r(13376),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},19597,(e,t,n)=>{t.exports=function(e){return void 0===e}},92255,(e,t,n)=>{var r=e.r(35496),o=e.r(7850);t.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,function(e,r,o){i[++n]=t(e,r,o)}),i}},85773,(e,t,n)=>{var r=e.r(66536),o=e.r(57529),i=e.r(92255),a=e.r(72098);t.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},48625,(e,t,n)=>{t.exports=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}},51488,(e,t,n)=>{t.exports=function(e,t,n,r,o){return o(e,function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)}),n}},2516,(e,t,n)=>{var r=e.r(48625),o=e.r(35496),i=e.r(57529),a=e.r(51488),s=e.r(72098);t.exports=function(e,t,n){var l=s(e)?r:a,u=arguments.length<3;return l(e,i(t,4),n,u,o)}},55221,(e,t,n)=>{var r=e.r(23748),o=e.r(72098),i=e.r(19674);t.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==r(e)}},61436,(e,t,n)=>{t.exports=e.r(18114)("length")},26970,(e,t,n)=>{var r=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return r.test(e)}},7812,(e,t,n)=>{var r="\ud800-\udfff",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\ud83c[\udffb-\udfff]",a="[^"+r+"]",s="(?:\ud83c[\udde6-\uddff]){2}",l="[\ud800-\udbff][\udc00-\udfff]",u="(?:"+o+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",d="(?:\\u200d(?:"+[a,s,l].join("|")+")"+c+u+")*",f=RegExp(i+"(?="+i+")|"+("(?:"+[a+o+"?",o,s,l,"["+r+"]"].join("|"))+")"+(c+u+d),"g");t.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},50166,(e,t,n)=>{var r=e.r(61436),o=e.r(26970),i=e.r(7812);t.exports=function(e){return o(e)?i(e):r(e)}},25184,(e,t,n)=>{var r=e.r(3114),o=e.r(26568),i=e.r(7850),a=e.r(55221),s=e.r(50166);t.exports=function(e){if(null==e)return 0;if(i(e))return a(e)?s(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},65867,(e,t,n)=>{var r=e.r(39372),o=e.r(69416),i=e.r(88607),a=e.r(57529),s=e.r(30968),l=e.r(72098),u=e.r(85370),c=e.r(63883),d=e.r(91606),f=e.r(13376);t.exports=function(e,t,n){var h=l(e),p=h||u(e)||f(e);if(t=a(t,4),null==n){var m=e&&e.constructor;n=p?h?new m:[]:d(e)&&c(m)?o(s(e)):{}}return(p?r:i)(e,function(e,r,o){return t(n,e,r,o)}),n}},25980,(e,t,n)=>{var r=e.r(7667),o=e.r(17288),i=e.r(72098),a=r?r.isConcatSpreadable:void 0;t.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},77735,(e,t,n)=>{var r=e.r(34666),o=e.r(25980);t.exports=function e(t,n,i,a,s){var l=-1,u=t.length;for(i||(i=o),s||(s=[]);++l<u;){var c=t[l];n>0&&i(c)?n>1?e(c,n-1,i,a,s):r(s,c):a||(s[s.length]=c)}return s}},4653,(e,t,n)=>{t.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},76255,(e,t,n)=>{var r=e.r(4653),o=Math.max;t.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),l=Array(s);++a<s;)l[a]=i[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=i[a];return u[t]=n(l),r(e,this,u)}}},27001,(e,t,n)=>{var r=e.r(60220),o=e.r(47474),i=e.r(13870);t.exports=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i},87094,(e,t,n)=>{var r=Date.now;t.exports=function(e){var t=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},89463,(e,t,n)=>{var r=e.r(27001);t.exports=e.r(87094)(r)},86521,(e,t,n)=>{var r=e.r(13870),o=e.r(76255),i=e.r(89463);t.exports=function(e,t){return i(o(e,t,r),e+"")}},33245,(e,t,n)=>{t.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return -1}},31623,(e,t,n)=>{t.exports=function(e){return e!=e}},79656,(e,t,n)=>{t.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return -1}},47235,(e,t,n)=>{var r=e.r(33245),o=e.r(31623),i=e.r(79656);t.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},7873,(e,t,n)=>{var r=e.r(47235);t.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},76780,(e,t,n)=>{t.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},23169,(e,t,n)=>{t.exports=function(){}},56741,(e,t,n)=>{var r=e.r(11524),o=e.r(23169),i=e.r(49123);t.exports=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o},62952,(e,t,n)=>{var r=e.r(25964),o=e.r(7873),i=e.r(76780),a=e.r(89808),s=e.r(56741),l=e.r(49123);t.exports=function(e,t,n){var u=-1,c=o,d=e.length,f=!0,h=[],p=h;if(n)f=!1,c=i;else if(d>=200){var m=t?null:s(e);if(m)return l(m);f=!1,c=a,p=new r}else p=t?[]:h;e:for(;++u<d;){var g=e[u],v=t?t(g):g;if(g=n||0!==g?g:0,f&&v==v){for(var x=p.length;x--;)if(p[x]===v)continue e;t&&p.push(v),h.push(g)}else c(p,v,n)||(p!==h&&p.push(v),h.push(g))}return h}},36526,(e,t,n)=>{var r=e.r(7850),o=e.r(19674);t.exports=function(e){return o(e)&&r(e)}},39236,(e,t,n)=>{var r=e.r(77735),o=e.r(86521),i=e.r(62952),a=e.r(36526);t.exports=o(function(e){return i(r(e,1,a,!0))})},87891,(e,t,n)=>{var r=e.r(66536);t.exports=function(e,t){return r(t,function(t){return e[t]})}},28315,(e,t,n)=>{var r=e.r(87891),o=e.r(33089);t.exports=function(e){return null==e?[]:r(e,o(e))}},46276,(e,t,n)=>{var r;try{r={clone:e.r(84886),constant:e.r(60220),each:e.r(33763),filter:e.r(58862),has:e.r(41054),isArray:e.r(72098),isEmpty:e.r(20686),isFunction:e.r(63883),isUndefined:e.r(19597),keys:e.r(33089),map:e.r(85773),reduce:e.r(2516),size:e.r(25184),transform:e.r(65867),union:e.r(39236),values:e.r(28315)}}catch(e){}r||(r=window._),t.exports=r},34269,(e,t,n)=>{"use strict";var r=e.r(46276);function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function a(e,t){--e[t]||delete e[t]}function s(e,t,n,o){var i=""+t,a=""+n;if(!e&&i>a){var s=i;i=a,a=s}return i+"\x01"+a+"\x01"+(r.isUndefined(o)?"\0":o)}function l(e,t){return s(e,t.v,t.w,t.name)}t.exports=o,o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._in[t])})},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._out[t])})},o.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,function(e){n.length>1?o.setNode(e,t):o.setNode(e)}),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{t+="";for(var n=t;!r.isUndefined(n);n=this.parent(n))if(n===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),r.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var o={};return this._isCompound&&r.each(t.nodes(),function(e){t.setParent(e,function e(r){var i=n.parent(r);return void 0===i||t.hasNode(i)?(o[r]=i,i):i in o?o[i]:e(i)}(e))}),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r}),this},o.prototype.setEdge=function(){var e,t,n,o,a=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2==arguments.length&&(o=arguments[1],a=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],a=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var u=s(this._isDirected,e,t,n);if(r.has(this._edgeLabels,u))return a&&(this._edgeLabels[u]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[u]=a?o:this._defaultEdgeLabelFn(e,t,n);var c=function(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return r&&(s.name=r),s}(this._isDirected,e,t,n);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[u]=c,i(this._preds[t],e),i(this._sucs[e],t),this._in[t][u]=c,this._out[e][u]=c,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var o=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(e,t,n){var r=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[t],e),a(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,function(e){return e.v===t}):o}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,function(e){return e.w===t}):o}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},60831,(e,t,n)=>{t.exports="2.1.8"},7924,(e,t,n)=>{t.exports={Graph:e.r(34269),version:e.r(60831)}},85305,(e,t,n)=>{var r=e.r(46276),o=e.r(34269);t.exports={write:function(e){var t,n,o={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e,r.map(t.nodes(),function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i})),edges:(n=e,r.map(n.edges(),function(e){var t=n.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(t)||(o.value=t),o}))};return r.isUndefined(e.graph())||(o.value=r.clone(e.graph())),o},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),r.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},9992,(e,t,n)=>{var r=e.r(46276);t.exports=function(e){var t,n={},o=[];return r.each(e.nodes(),function(i){t=[],function o(i){r.has(n,i)||(n[i]=!0,t.push(i),r.each(e.successors(i),o),r.each(e.predecessors(i),o))}(i),t.length&&o.push(t)}),o}},59757,(e,t,n)=>{var r=e.r(46276);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map(function(e){return e.key})},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,i=o.length;return n[e]=i,o.push({key:e,priority:t}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t}},35767,(e,t,n)=>{var r=e.r(46276),o=e.r(59757);t.exports=function(e,t,n,r){return function(e,t,n,r){var i,a,s={},l=new o,u=function(e){var t=e.v!==i?e.v:e.w,r=s[t],o=n(e),u=a.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);u<r.distance&&(r.distance=u,r.predecessor=i,l.decrease(t,u))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;s[e]={distance:n},l.add(e,n)});l.size()>0&&(a=s[i=l.removeMin()]).distance!==1/0;)r(i).forEach(u);return s}(e,String(t),n||i,r||function(t){return e.outEdges(t)})};var i=r.constant(1)},39340,(e,t,n)=>{var r=e.r(35767),o=e.r(46276);t.exports=function(e,t,n){return o.transform(e.nodes(),function(o,i){o[i]=r(e,i,t,n)},{})}},24036,(e,t,n)=>{var r=e.r(46276);t.exports=function(e){var t=0,n=[],o={},i=[];return e.nodes().forEach(function(a){r.has(o,a)||function a(s){var l=o[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach(function(e){r.has(o,e)?o[e].onStack&&(l.lowlink=Math.min(l.lowlink,o[e].index)):(a(e),l.lowlink=Math.min(l.lowlink,o[e].lowlink))}),l.lowlink===l.index){var u,c=[];do o[u=n.pop()].onStack=!1,c.push(u);while(s!==u)i.push(c)}}(a)}),i}},25585,(e,t,n)=>{var r=e.r(46276),o=e.r(24036);t.exports=function(e){return r.filter(o(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},46753,(e,t,n)=>{var r=e.r(46276);t.exports=function(e,t,n){var r,i,a,s,l;return r=e,i=t||o,a=n||function(t){return e.outEdges(t)},s={},(l=r.nodes()).forEach(function(e){s[e]={},s[e][e]={distance:0},l.forEach(function(t){e!==t&&(s[e][t]={distance:1/0})}),a(e).forEach(function(t){var n=t.v===e?t.w:t.v,r=i(t);s[e][n]={distance:r,predecessor:e}})}),l.forEach(function(e){var t=s[e];l.forEach(function(n){var r=s[n];l.forEach(function(n){var o=r[e],i=t[n],a=r[n],s=o.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),s};var o=r.constant(1)},95090,(e,t,n)=>{var r=e.r(46276);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),function a(s){if(r.has(n,s))throw new i;r.has(t,s)||(n[s]=!0,t[s]=!0,r.each(e.predecessors(s),a),delete n[s],o.push(s))}),r.size(t)!==e.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=Error()},96224,(e,t,n)=>{var r=e.r(95090);t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},95378,(e,t,n)=>{var r=e.r(46276);t.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],a={};return r.each(t,function(t){if(!e.hasNode(t))throw Error("Graph does not have node: "+t);!function e(t,n,o,i,a,s){!r.has(i,n)&&(i[n]=!0,o||s.push(n),r.each(a(n),function(n){e(t,n,o,i,a,s)}),o&&s.push(n))}(e,t,"post"===n,a,o,i)}),i}},90360,(e,t,n)=>{var r=e.r(95378);t.exports=function(e,t){return r(e,t,"post")}},59711,(e,t,n)=>{var r=e.r(95378);t.exports=function(e,t){return r(e,t,"pre")}},6643,(e,t,n)=>{var r=e.r(46276),o=e.r(34269),i=e.r(59757);t.exports=function(e,t){var n,a=new o,s={},l=new i;function u(e){var r=e.v===n?e.w:e.v,o=l.priority(r);if(void 0!==o){var i=t(e);i<o&&(s[r]=n,l.decrease(r,i))}}if(0===e.nodeCount())return a;r.each(e.nodes(),function(e){l.add(e,1/0),a.setNode(e)}),l.decrease(e.nodes()[0],0);for(var c=!1;l.size()>0;){if(n=l.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else if(c)throw Error("Input graph is not connected: "+e);else c=!0;e.nodeEdges(n).forEach(u)}return a}},24499,(e,t,n)=>{t.exports={components:e.r(9992),dijkstra:e.r(35767),dijkstraAll:e.r(39340),findCycles:e.r(25585),floydWarshall:e.r(46753),isAcyclic:e.r(96224),postorder:e.r(90360),preorder:e.r(59711),prim:e.r(6643),tarjan:e.r(24036),topsort:e.r(95090)}},46053,(e,t,n)=>{var r=e.r(7924);t.exports={Graph:r.Graph,json:e.r(85305),alg:e.r(24499),version:r.version}},55587,(e,t,n)=>{var r;try{r=e.r(46053)}catch(e){}r||(r=window.graphlib),t.exports=r},20311,(e,t,n)=>{var r=e.r(16543);t.exports=function(e){return r(e,5)}},16110,(e,t,n)=>{var r=e.r(78744),o=e.r(7850),i=e.r(29582),a=e.r(91606);t.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return("number"==s?!!(o(n)&&i(t,n.length)):"string"==s&&t in n)&&r(n[t],e)}},83338,(e,t,n)=>{var r=e.r(86521),o=e.r(78744),i=e.r(16110),a=e.r(75419),s=Object.prototype,l=s.hasOwnProperty;t.exports=r(function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&i(t[0],t[1],u)&&(r=1);++n<r;)for(var c=t[n],d=a(c),f=-1,h=d.length;++f<h;){var p=d[f],m=e[p];(void 0===m||o(m,s[p])&&!l.call(e,p))&&(e[p]=c[p])}return e})},62023,(e,t,n)=>{var r=e.r(57529),o=e.r(7850),i=e.r(33089);t.exports=function(e){return function(t,n,a){var s=Object(t);if(!o(t)){var l=r(n,3);t=i(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},93912,(e,t,n)=>{var r=/\s/;t.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},86716,(e,t,n)=>{var r=e.r(93912),o=/^\s+/;t.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},94370,(e,t,n)=>{var r=e.r(86716),o=e.r(91606),i=e.r(48664),a=0/0,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}},89781,(e,t,n)=>{var r=e.r(94370),o=1/0;t.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},97125,(e,t,n)=>{var r=e.r(89781);t.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},64962,(e,t,n)=>{var r=e.r(33245),o=e.r(57529),i=e.r(97125),a=Math.max;t.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return -1;var l=null==n?0:i(n);return l<0&&(l=a(s+l,0)),r(e,o(t,3),l)}},21569,(e,t,n)=>{t.exports=e.r(62023)(e.r(64962))},35677,(e,t,n)=>{var r=e.r(77735);t.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},13721,(e,t,n)=>{var r=e.r(10673),o=e.r(35310),i=e.r(75419);t.exports=function(e,t){return null==e?e:r(e,o(t),i)}},94786,(e,t,n)=>{t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},54888,(e,t,n)=>{var r=e.r(30215),o=e.r(88607),i=e.r(57529);t.exports=function(e,t){var n={};return t=i(t,3),o(e,function(e,o,i){r(n,o,t(e,o,i))}),n}},59318,(e,t,n)=>{var r=e.r(48664);t.exports=function(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,u=a}return u}},80393,(e,t,n)=>{t.exports=function(e,t){return e>t}},87768,(e,t,n)=>{var r=e.r(59318),o=e.r(80393),i=e.r(13870);t.exports=function(e){return e&&e.length?r(e,i,o):void 0}},69859,(e,t,n)=>{var r=e.r(30215),o=e.r(78744);t.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},17307,(e,t,n)=>{var r=e.r(23748),o=e.r(30968),i=e.r(19674),a=Object.prototype,s=Function.prototype.toString,l=a.hasOwnProperty,u=s.call(Object);t.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==u}},26089,(e,t,n)=>{t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},38591,(e,t,n)=>{var r=e.r(6227),o=e.r(75419);t.exports=function(e){return r(e,o(e))}},79200,(e,t,n)=>{var r=e.r(69859),o=e.r(44242),i=e.r(51235),a=e.r(33442),s=e.r(7299),l=e.r(17288),u=e.r(72098),c=e.r(36526),d=e.r(85370),f=e.r(63883),h=e.r(91606),p=e.r(17307),m=e.r(13376),g=e.r(26089),v=e.r(38591);t.exports=function(e,t,n,x,y,b,w){var k=g(e,n),j=g(t,n),_=w.get(j);if(_)return void r(e,n,_);var E=b?b(k,j,n+"",e,t,w):void 0,N=void 0===E;if(N){var S=u(j),C=!S&&d(j),M=!S&&!C&&m(j);E=j,S||C||M?u(k)?E=k:c(k)?E=a(k):C?(N=!1,E=o(j,!0)):M?(N=!1,E=i(j,!0)):E=[]:p(j)||l(j)?(E=k,l(k)?E=v(k):(!h(k)||f(k))&&(E=s(j))):N=!1}N&&(w.set(j,E),y(E,j,x,b,w),w.delete(j)),r(e,n,E)}},96337,(e,t,n)=>{var r=e.r(75266),o=e.r(69859),i=e.r(10673),a=e.r(79200),s=e.r(91606),l=e.r(75419),u=e.r(26089);t.exports=function e(t,n,c,d,f){t!==n&&i(n,function(i,l){if(f||(f=new r),s(i))a(t,n,l,c,e,d,f);else{var h=d?d(u(t,l),i,l+"",t,n,f):void 0;void 0===h&&(h=i),o(t,l,h)}},l)}},47101,(e,t,n)=>{var r=e.r(86521),o=e.r(16110);t.exports=function(e){return r(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,a)}return t})}},4023,(e,t,n)=>{var r=e.r(96337);t.exports=e.r(47101)(function(e,t,n){r(e,t,n)})},89286,(e,t,n)=>{t.exports=function(e,t){return e<t}},19017,(e,t,n)=>{var r=e.r(59318),o=e.r(89286),i=e.r(13870);t.exports=function(e){return e&&e.length?r(e,i,o):void 0}},51555,(e,t,n)=>{var r=e.r(59318),o=e.r(57529),i=e.r(89286);t.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},2272,(e,t,n)=>{var r=e.r(59527);t.exports=function(){return r.Date.now()}},19719,(e,t,n)=>{var r=e.r(63217),o=e.r(60575),i=e.r(29582),a=e.r(91606),s=e.r(28359);t.exports=function(e,t,n,l){if(!a(e))return e;t=o(t,e);for(var u=-1,c=t.length,d=c-1,f=e;null!=f&&++u<c;){var h=s(t[u]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)break;if(u!=d){var m=f[h];void 0===(p=l?l(m,h,f):void 0)&&(p=a(m)?m:i(t[u+1])?[]:{})}r(f,h,p),f=f[h]}return e}},55387,(e,t,n)=>{var r=e.r(47449),o=e.r(19719),i=e.r(60575);t.exports=function(e,t,n){for(var a=-1,s=t.length,l={};++a<s;){var u=t[a],c=r(e,u);n(c,u)&&o(l,i(u,e),c)}return l}},47895,(e,t,n)=>{var r=e.r(55387),o=e.r(98814);t.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},91637,(e,t,n)=>{var r=e.r(35677),o=e.r(76255),i=e.r(89463);t.exports=function(e){return i(o(e,void 0,r),e+"")}},69422,(e,t,n)=>{var r=e.r(47895);t.exports=e.r(91637)(function(e,t){return null==e?{}:r(e,t)})},1163,(e,t,n)=>{var r=Math.ceil,o=Math.max;t.exports=function(e,t,n,i){for(var a=-1,s=o(r((t-e)/(n||1)),0),l=Array(s);s--;)l[i?s:++a]=e,e+=n;return l}},6246,(e,t,n)=>{var r=e.r(1163),o=e.r(16110),i=e.r(89781);t.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&o(t,n,a)&&(n=a=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),a=void 0===a?t<n?1:-1:i(a),r(t,n,a,e)}}},8284,(e,t,n)=>{t.exports=e.r(6246)()},54178,(e,t,n)=>{t.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},82225,(e,t,n)=>{var r=e.r(48664);t.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e==e,a=r(e),s=void 0!==t,l=null===t,u=t==t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||o&&s&&u||!n&&u||!i)return 1;if(!o&&!a&&!c&&e<t||c&&n&&i&&!o&&!a||l&&n&&i||!s&&i||!u)return -1}return 0}},42806,(e,t,n)=>{var r=e.r(82225);t.exports=function(e,t,n){for(var o=-1,i=e.criteria,a=t.criteria,s=i.length,l=n.length;++o<s;){var u=r(i[o],a[o]);if(u){if(o>=l)return u;return u*("desc"==n[o]?-1:1)}}return e.index-t.index}},79898,(e,t,n)=>{var r=e.r(66536),o=e.r(47449),i=e.r(57529),a=e.r(92255),s=e.r(54178),l=e.r(32900),u=e.r(42806),c=e.r(13870),d=e.r(72098);t.exports=function(e,t,n){t=t.length?r(t,function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e}):[c];var f=-1;return t=r(t,l(i)),s(a(e,function(e,n,o){return{criteria:r(t,function(t){return t(e)}),index:++f,value:e}}),function(e,t){return u(e,t,n)})}},26431,(e,t,n)=>{var r=e.r(77735),o=e.r(79898),i=e.r(86521),a=e.r(16110);t.exports=i(function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])})},30165,(e,t,n)=>{var r=e.r(84016),o=0;t.exports=function(e){var t=++o;return r(e)+t}},17970,(e,t,n)=>{t.exports=function(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=r<i?t[r]:void 0;n(a,e[r],s)}return a}},4339,(e,t,n)=>{var r=e.r(63217),o=e.r(17970);t.exports=function(e,t){return o(e||[],t||[],r)}},71951,(e,t,n)=>{var r;try{r={cloneDeep:e.r(20311),constant:e.r(60220),defaults:e.r(83338),each:e.r(33763),filter:e.r(58862),find:e.r(21569),flatten:e.r(35677),forEach:e.r(7059),forIn:e.r(13721),has:e.r(41054),isUndefined:e.r(19597),last:e.r(94786),map:e.r(85773),mapValues:e.r(54888),max:e.r(87768),merge:e.r(4023),min:e.r(19017),minBy:e.r(51555),now:e.r(2272),pick:e.r(69422),range:e.r(8284),reduce:e.r(2516),sortBy:e.r(26431),uniqueId:e.r(30165),values:e.r(28315),zipObject:e.r(4339)}}catch(e){}r||(r=window._),t.exports=r},44311,(e,t,n)=>{function r(){var e={};e._next=e._prev=e,this._sentinel=e}function o(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function i(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=r,r.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return o(t),t},r.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&o(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},r.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,i)),n=n._prev;return"["+e.join(", ")+"]"}},15345,(e,t,n)=>{var r=e.r(71951),o=e.r(55587).Graph,i=e.r(44311);t.exports=function(e,t){if(1>=e.nodeCount())return[];var n,u,c,d,f,h,p,m=(n=e,u=t||a,c=new o,d=0,f=0,r.forEach(n.nodes(),function(e){c.setNode(e,{v:e,in:0,out:0})}),r.forEach(n.edges(),function(e){var t=c.edge(e.v,e.w)||0,n=u(e);c.setEdge(e.v,e.w,t+n),f=Math.max(f,c.node(e.v).out+=n),d=Math.max(d,c.node(e.w).in+=n)}),h=r.range(f+d+3).map(function(){return new i}),p=d+1,r.forEach(c.nodes(),function(e){l(h,p,c.node(e))}),{graph:c,buckets:h,zeroIdx:p}),g=function(e,t,n){for(var r,o=[],i=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)s(e,t,n,r);for(;r=i.dequeue();)s(e,t,n,r);if(e.nodeCount()){for(var l=t.length-2;l>0;--l)if(r=t[l].dequeue()){o=o.concat(s(e,t,n,r,!0));break}}}return o}(m.graph,m.buckets,m.zeroIdx);return r.flatten(r.map(g,function(t){return e.outEdges(t.v,t.w)}),!0)};var a=r.constant(1);function s(e,t,n,o,i){var a=i?[]:void 0;return r.forEach(e.inEdges(o.v),function(r){var o=e.edge(r),s=e.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=o,l(t,n,s)}),r.forEach(e.outEdges(o.v),function(r){var o=e.edge(r),i=r.w,a=e.node(i);a.in-=o,l(t,n,a)}),e.removeNode(o.v),a}function l(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},4959,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(15345);t.exports={run:function(e){var t,n,i,a,s,l="greedy"===e.graph().acyclicer?o(e,(t=e,function(e){return t.edge(e).weight})):(n=e,i=[],a={},s={},r.forEach(n.nodes(),function e(t){r.has(s,t)||(s[t]=!0,a[t]=!0,r.forEach(n.outEdges(t),function(t){r.has(a,t.w)?i.push(t):e(t.w)}),delete a[t])}),i);r.forEach(l,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))})},undo:function(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},59426,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph;function i(e,t,n,o){var i;do i=r.uniqueId(o);while(e.hasNode(i))return n.dummy=t,e.setNode(i,n),i}function a(e){return r.max(r.map(e.nodes(),function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:i,simplify:function(e){var t=new o().setGraph(e.graph());return r.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,s=t.y-i,l=e.width/2,u=e.height/2;if(!a&&!s)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a),{x:o+n,y:i+r}},buildLayerMatrix:function(e){var t=r.map(r.range(a(e)+1),function(){return[]});return r.forEach(e.nodes(),function(n){var o=e.node(n),i=o.rank;r.isUndefined(i)||(t[i][o.order]=n)}),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank}));r.forEach(e.nodes(),function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)})},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank})),n=[];r.forEach(e.nodes(),function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)});var o=0,i=e.graph().nodeRankFactor;r.forEach(n,function(t,n){r.isUndefined(t)&&n%i!=0?--o:o&&r.forEach(t,function(t){e.node(t).rank+=o})})},addBorderNode:function(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),i(e,"border",o,t)},maxRank:a,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},34086,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(59426);t.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),function(t){!function(e,t){var n,r,i,a=t.v,s=e.node(a).rank,l=t.w,u=e.node(l).rank,c=t.name,d=e.edge(t),f=d.labelRank;if(u!==s+1){for(e.removeEdge(t),i=0,++s;s<u;++i,++s)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},n=o.addDummyNode(e,"edge",r,"_d"),s===f&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),e.setEdge(a,n,{weight:d.weight},c),0===i&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,l,{weight:d.weight},c)}}(e,t)})},undo:function(e){r.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}}},8914,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports={longestPath:function(e){var t={};r.forEach(e.sources(),function n(o){var i=e.node(o);if(r.has(t,o))return i.rank;t[o]=!0;var a=r.min(r.map(e.outEdges(o),function(t){return n(t.w)-e.edge(t).minlen}));return(a===1/0||null==a)&&(a=0),i.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},47931,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph,i=e.r(8914).slack;t.exports=function(e){var t,n,a,s,l=new o({directed:!1}),u=e.nodes()[0],c=e.nodeCount();for(l.setNode(u,{});t=l,n=e,r.forEach(t.nodes(),function e(o){r.forEach(n.nodeEdges(o),function(r){var a=r.v,s=o===a?r.w:a;t.hasNode(s)||i(n,r)||(t.setNode(s,{}),t.setEdge(o,s,{}),e(s))})}),t.nodeCount()<c;)a=function(e,t){return r.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return i(t,n)})}(l,e),s=l.hasNode(a.v)?i(e,a):-i(e,a),function(e,t,n){r.forEach(e.nodes(),function(e){t.node(e).rank+=n})}(l,e,s);return l}},57363,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(47931),i=e.r(8914).slack,a=e.r(8914).longestPath,s=e.r(55587).alg.preorder,l=e.r(55587).alg.postorder,u=e.r(59426).simplify;function c(e){a(e=u(e));var t,n,r=o(e);for(h(r),d(r,e);t=p(r);)n=m(r,e,t),g(r,e,t,n)}function d(e,t){var n=l(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){var r,o,i,a;r=e,o=t,i=n,a=r.node(i).parent,r.edge(i,a).cutvalue=f(r,o,i)})}function f(e,t,n){var o=e.node(n).parent,i=!0,a=t.edge(n,o),s=0;return a||(i=!1,a=t.edge(o,n)),s=a.weight,r.forEach(t.nodeEdges(n),function(r){var a=r.v===n,l=a?r.w:r.v;if(l!==o){var u,c,d,f=a===i,h=t.edge(r).weight;if(s+=f?h:-h,u=e,c=n,d=l,u.hasEdge(c,d)){var p=e.edge(n,l).cutvalue;s+=f?-p:p}}}),s}function h(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,n,o,i,a){var s=o,l=t.node(i);return n[i]=!0,r.forEach(t.neighbors(i),function(a){r.has(n,a)||(o=e(t,n,o,a,i))}),l.low=s,l.lim=o++,a?l.parent=a:delete l.parent,o}(e,{},1,t)}function p(e){return r.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function m(e,t,n){var o=n.v,a=n.w;t.hasEdge(o,a)||(o=n.w,a=n.v);var s=e.node(o),l=e.node(a),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var d=r.filter(t.edges(),function(t){return c===v(e,e.node(t.v),u)&&c!==v(e,e.node(t.w),u)});return r.minBy(d,function(e){return i(t,e)})}function g(e,t,n,o){var i,a,l,u,c=n.v,f=n.w;e.removeEdge(c,f),e.setEdge(o.v,o.w,{}),h(e),d(e,t),i=e,a=t,l=r.find(i.nodes(),function(e){return!a.node(e).parent}),u=(u=s(i,l)).slice(1),r.forEach(u,function(e){var t=i.node(e).parent,n=a.edge(e,t),r=!1;n||(n=a.edge(t,e),r=!0),a.node(e).rank=a.node(t).rank+(r?n.minlen:-n.minlen)})}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=c,c.initLowLimValues=h,c.initCutValues=d,c.calcCutValue=f,c.leaveEdge=p,c.enterEdge=m,c.exchangeEdges=g},9217,(e,t,n)=>{"use strict";var r=e.r(8914).longestPath,o=e.r(47931),i=e.r(57363);t.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:i(e);break;case"tight-tree":var t;r(t=e),o(t);break;case"longest-path":a(e)}};var a=r},34995,(e,t,n)=>{var r=e.r(71951);t.exports=function(e){var t,n,o,i=(t=e,n={},o=0,r.forEach(t.children(),function e(i){var a=o;r.forEach(t.children(i),e),n[i]={low:a,lim:o++}}),n);r.forEach(e.graph().dummyChains,function(t){for(var n=e.node(t),r=n.edgeObj,o=function(e,t,n,r){var o,i,a=[],s=[],l=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim);o=n;do a.push(o=e.parent(o));while(o&&(t[o].low>l||u>t[o].lim))for(i=o,o=r;(o=e.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(e,i,r.v,r.w),a=o.path,s=o.lca,l=0,u=a[0],c=!0;t!==r.w;){if(n=e.node(t),c){for(;(u=a[l])!==s&&e.node(u).maxRank<n.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=n.rank;)l++;u=a[l]}e.setParent(t,u),t=e.successors(t)[0]}})}},35961,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);t.exports={run:function(e){var t,n,i,a=o.addDummyNode(e,"root",{},"_root"),s=(t=e,n={},r.forEach(t.children(),function(e){!function e(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,function(t){e(t,i+1)}),n[o]=i}(e,1)}),n),l=r.max(r.values(s))-1,u=2*l+1;e.graph().nestingRoot=a,r.forEach(e.edges(),function(t){e.edge(t).minlen*=u});var c=(i=e,r.reduce(i.edges(),function(e,t){return e+i.edge(t).weight},0)+1);r.forEach(e.children(),function(t){!function e(t,n,i,a,s,l,u){var c=t.children(u);if(!c.length){u!==n&&t.setEdge(n,u,{weight:0,minlen:i});return}var d=o.addBorderNode(t,"_bt"),f=o.addBorderNode(t,"_bb"),h=t.node(u);t.setParent(d,u),h.borderTop=d,t.setParent(f,u),h.borderBottom=f,r.forEach(c,function(r){e(t,n,i,a,s,l,r);var o=t.node(r),c=o.borderTop?o.borderTop:r,h=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,m=c!==h?1:s-l[u]+1;t.setEdge(d,c,{weight:p,minlen:m,nestingEdge:!0}),t.setEdge(h,f,{weight:p,minlen:m,nestingEdge:!0})}),t.parent(u)||t.setEdge(n,d,{weight:0,minlen:s+l[u]})}(e,a,u,c,l,s,t)}),e.graph().nodeRankFactor=u},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},19422,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);function i(e,t,n,r,i,a){var s=i[t][a-1],l=o.addDummyNode(e,"border",{width:0,height:0,rank:a,borderType:t},n);i[t][a]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}t.exports=function(e){r.forEach(e.children(),function t(n){var o=e.children(n),a=e.node(n);if(o.length&&r.forEach(o,t),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)i(e,"borderLeft","_bl",n,a,s),i(e,"borderRight","_br",n,a,s)}})}},64519,(e,t,n)=>{"use strict";var r=e.r(71951);function o(e){r.forEach(e.nodes(),function(t){i(e.node(t))}),r.forEach(e.edges(),function(t){i(e.edge(t))})}function i(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&o(e)},undo:function(e){var t,n,i=e.graph().rankdir.toLowerCase();("bt"===i||"rl"===i)&&(t=e,r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)})),("lr"===i||"rl"===i)&&(n=e,r.forEach(n.nodes(),function(e){s(n.node(e))}),r.forEach(n.edges(),function(e){var t=n.edge(e);r.forEach(t.points,s),r.has(t,"x")&&s(t)}),o(e))}}},51318,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports=function(e){var t={},n=r.filter(e.nodes(),function(t){return!e.children(t).length}),o=r.max(r.map(n,function(t){return e.node(t).rank})),i=r.map(r.range(o+1),function(){return[]}),a=r.sortBy(n,function(t){return e.node(t).rank});return r.forEach(a,function n(o){r.has(t,o)||(t[o]=!0,i[e.node(o).rank].push(o),r.forEach(e.successors(o),n))}),i}},31577,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports=function(e,t){for(var n=0,o=1;o<t.length;++o)n+=function(e,t,n){for(var o=r.zipObject(n,r.map(n,function(e,t){return t})),i=r.flatten(r.map(t,function(t){return r.sortBy(r.map(e.outEdges(t),function(t){return{pos:o[t.w],weight:e.edge(t).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var l=r.map(Array(s),function(){return 0}),u=0;return r.forEach(i.forEach(function(e){var t=e.pos+a;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),t=t-1>>1,l[t]+=e.weight;u+=e.weight*n})),u}(e,t[o-1],t[o]);return n}},4055,(e,t,n)=>{var r=e.r(71951);t.exports=function(e,t){return r.map(t,function(t){var n=e.inEdges(t);if(!n.length)return{v:t};var o=r.reduce(n,function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}})}},26918,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports=function(e,t){var n={};return r.forEach(e,function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)}),r.forEach(t.edges(),function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))}),function(e){for(var t=[];e.length;){var n=e.pop();t.push(n),r.forEach(n.in.reverse(),function(e){return function(t){!t.merged&&(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(n)),r.forEach(n.out,function(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}(n))}return r.map(r.filter(t,function(e){return!e.merged}),function(e){return r.pick(e,["vs","i","barycenter","weight"])})}(r.filter(n,function(e){return!e.indegree}))}},71966,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);function i(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}t.exports=function(e,t){var n,a=o.partition(e,function(e){return r.has(e,"barycenter")}),s=a.lhs,l=r.sortBy(a.rhs,function(e){return-e.i}),u=[],c=0,d=0,f=0;s.sort((n=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i})),f=i(u,l,f),r.forEach(s,function(e){f+=e.vs.length,u.push(e.vs),c+=e.barycenter*e.weight,d+=e.weight,f=i(u,l,f)});var h={vs:r.flatten(u,!0)};return d&&(h.barycenter=c/d,h.weight=d),h}},28580,(e,t,n)=>{var r=e.r(71951),o=e.r(4055),i=e.r(26918),a=e.r(71966);t.exports=function e(t,n,s,l){var u,c,d=t.children(n),f=t.node(n),h=f?f.borderLeft:void 0,p=f?f.borderRight:void 0,m={};h&&(d=r.filter(d,function(e){return e!==h&&e!==p}));var g=o(t,d);r.forEach(g,function(n){if(t.children(n.v).length){var o,i,a=e(t,n.v,s,l);m[n.v]=a,r.has(a,"barycenter")&&(o=n,i=a,r.isUndefined(o.barycenter)?(o.barycenter=i.barycenter,o.weight=i.weight):(o.barycenter=(o.barycenter*o.weight+i.barycenter*i.weight)/(o.weight+i.weight),o.weight+=i.weight))}});var v=i(g,s);u=v,c=m,r.forEach(u,function(e){e.vs=r.flatten(e.vs.map(function(e){return c[e]?c[e].vs:e}),!0)});var x=a(v,l);if(h&&(x.vs=r.flatten([h,x.vs,p],!0),t.predecessors(h).length)){var y=t.node(t.predecessors(h)[0]),b=t.node(t.predecessors(p)[0]);r.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+y.order+b.order)/(x.weight+2),x.weight+=2}return x}},41885,(e,t,n)=>{var r=e.r(71951),o=e.r(55587).Graph;t.exports=function(e,t,n){var i=function(e){for(var t;e.hasNode(t=r.uniqueId("_root")););return t}(e),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return r.forEach(e.nodes(),function(o){var s=e.node(o),l=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(o),a.setParent(o,l||i),r.forEach(e[n](o),function(t){var n=t.v===o?t.w:t.v,i=a.edge(n,o),s=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:e.edge(t).weight+s})}),r.has(s,"minRank")&&a.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),a}},18716,(e,t,n)=>{var r=e.r(71951);t.exports=function(e,t,n){var o,i={};r.forEach(n,function(n){for(var r,a,s=e.parent(n);s;){if((r=e.parent(s))?(a=i[r],i[r]=s):(a=o,o=s),a&&a!==s)return void t.setEdge(a,s);s=r}})}},64836,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(51318),i=e.r(31577),a=e.r(28580),s=e.r(41885),l=e.r(18716),u=e.r(55587).Graph,c=e.r(59426);function d(e,t,n){return r.map(t,function(t){return s(e,t,n)})}function f(e,t){r.forEach(t,function(t){r.forEach(t,function(t,n){e.node(t).order=n})})}t.exports=function(e){var t=c.maxRank(e),n=d(e,r.range(1,t+1),"inEdges"),s=d(e,r.range(t-1,-1,-1),"outEdges"),h=o(e);f(e,h);for(var p,m=1/0,g=0,v=0;v<4;++g,++v){(function(e,t){var n=new u;r.forEach(e,function(e){var o=e.graph().root,i=a(e,o,n,t);r.forEach(i.vs,function(t,n){e.node(t).order=n}),l(e,n,i.vs)})})(g%2?n:s,g%4>=2),h=c.buildLayerMatrix(e);var x=i(e,h);x<m&&(v=0,p=r.cloneDeep(h),m=x)}f(e,p)}},23322,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph,i=e.r(59426);function a(e,t){var n={};return r.reduce(t,function(t,o){var i=0,a=0,s=t.length,u=r.last(o);return r.forEach(o,function(t,c){var d=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),f=d?e.node(d).order:s;(d||t===u)&&(r.forEach(o.slice(a,c+1),function(t){r.forEach(e.predecessors(t),function(r){var o=e.node(r),a=o.order;(a<i||f<a)&&!(o.dummy&&e.node(t).dummy)&&l(n,r,t)})}),a=c+1,i=f)}),o}),n}function s(e,t){var n={};function o(t,o,i,a,s){var u;r.forEach(r.range(o,i),function(o){u=t[o],e.node(u).dummy&&r.forEach(e.predecessors(u),function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>s)&&l(n,t,u)})})}return r.reduce(t,function(t,n){var i,a=-1,s=0;return r.forEach(n,function(r,l){if("border"===e.node(r).dummy){var u=e.predecessors(r);u.length&&(i=e.node(u[0]).order,o(n,s,l,a,i),s=l,a=i)}o(n,s,n.length,i,t.length)}),n}),n}function l(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function u(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function c(e,t,n,o){var i={},a={},s={};return r.forEach(t,function(e){r.forEach(e,function(e,t){i[e]=e,a[e]=e,s[e]=t})}),r.forEach(t,function(e){var t=-1;r.forEach(e,function(e){var l=o(e);if(l.length)for(var c=((l=r.sortBy(l,function(e){return s[e]})).length-1)/2,d=Math.floor(c),f=Math.ceil(c);d<=f;++d){var h=l[d];a[e]===e&&t<s[h]&&!u(n,e,h)&&(a[h]=e,a[e]=i[e]=i[h],t=s[h])}})}),{root:i,align:a}}function d(e,t,n,i,a){var s,l,u,c,d,f,h,p,m,g,v={},x=(s=e,l=t,u=n,c=a,p=new o,g=(d=(m=s.graph()).nodesep,f=m.edgesep,h=c,function(e,t,n){var o,i,a=e.node(t),s=e.node(n);if(o=0+a.width/2,r.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=-a.width/2;break;case"r":i=a.width/2}if(i&&(o+=h?i:-i),i=0,o+=(a.dummy?f:d)/2,o+=(s.dummy?f:d)/2,o+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":i=s.width/2;break;case"r":i=-s.width/2}return i&&(o+=h?i:-i),i=0,o}),r.forEach(l,function(e){var t;r.forEach(e,function(e){var n=u[e];if(p.setNode(n),t){var r=u[t],o=p.edge(r,n);p.setEdge(r,n,Math.max(g(s,e,t),o||0))}t=e})}),p),y=a?"borderLeft":"borderRight";function b(e,t){for(var n=x.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return b(function(e){v[e]=x.inEdges(e).reduce(function(e,t){return Math.max(e,v[t.v]+x.edge(t))},0)},x.predecessors.bind(x)),b(function(t){var n=x.outEdges(t).reduce(function(e,t){return Math.min(e,v[t.w]-x.edge(t))},1/0),r=e.node(t);n!==1/0&&r.borderType!==y&&(v[t]=Math.max(v[t],n))},x.successors.bind(x)),r.forEach(i,function(e){v[e]=v[n[e]]}),v}function f(e,t){return r.minBy(r.values(t),function(t){var n=-1/0,o=1/0;return r.forIn(t,function(t,r){var i,a,s=(i=e,a=r,i.node(a).width/2);n=Math.max(t+s,n),o=Math.min(t-s,o)}),n-o})}function h(e,t){var n=r.values(t),o=r.min(n),i=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,l=n+a,u=e[l];if(u!==t){var c=r.values(u);(s="l"===a?o-r.min(c):i-r.max(c))&&(e[l]=r.mapValues(u,function(e){return e+s}))}})})}function p(e,t){return r.mapValues(e.ul,function(n,o){if(t)return e[t.toLowerCase()][o];var i=r.sortBy(r.map(e,o));return(i[1]+i[2])/2})}t.exports={positionX:function(e){var t,n=i.buildLayerMatrix(e),o=r.merge(a(e,n),s(e,n)),l={};r.forEach(["u","d"],function(i){t="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(t=r.map(t,function(e){return r.values(e).reverse()}));var a=("u"===i?e.predecessors:e.successors).bind(e),s=c(e,t,o,a),u=d(e,t,s.root,s.align,"r"===n);"r"===n&&(u=r.mapValues(u,function(e){return-e})),l[i+n]=u})});var u=f(e,l);return h(l,u),p(l,e.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:u,verticalAlignment:c,horizontalCompaction:d,alignCoordinates:h,findSmallestWidthAlignment:f,balance:p}},62959,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(59426),i=e.r(23322).positionX;t.exports=function(e){var t,n,a,s;t=e=o.asNonCompoundGraph(e),n=o.buildLayerMatrix(t),a=t.graph().ranksep,s=0,r.forEach(n,function(e){var n=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=s+n/2}),s+=n+a}),r.forEach(i(e),function(t,n){e.node(n).x=t})}},39068,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(4959),i=e.r(34086),a=e.r(9217),s=e.r(59426).normalizeRanks,l=e.r(34995),u=e.r(59426).removeEmptyRanks,c=e.r(35961),d=e.r(19422),f=e.r(64519),h=e.r(64836),p=e.r(62959),m=e.r(59426),g=e.r(55587).Graph;t.exports=function(e,t){var n=t&&t.debugTiming?m.time:m.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){var t,n,o;return t=e,n=new g({multigraph:!0,compound:!0}),o=N(t.graph()),n.setGraph(r.merge({},x,E(o,v),r.pick(o,y))),r.forEach(t.nodes(),function(e){var o=N(t.node(e));n.setNode(e,r.defaults(E(o,b),w)),n.setParent(e,t.parent(e))}),r.forEach(t.edges(),function(e){var o=N(t.edge(e));n.setEdge(e,r.merge({},j,E(o,k),r.pick(o,_)))}),n});n("  runLayout",function(){var e,g;e=t,(g=n)("    makeSpaceForEdgeLabels",function(){var t,n;n=(t=e).graph(),n.ranksep/=2,r.forEach(t.edges(),function(e){var r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}),g("    removeSelfEdges",function(){var t;t=e,r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",function(){o.run(e)}),g("    nestingGraph.run",function(){c.run(e)}),g("    rank",function(){a(m.asNonCompoundGraph(e))}),g("    injectEdgeLabelProxies",function(){var t;t=e,r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};m.addDummyNode(t,"edge-proxy",o,"_ep")}})}),g("    removeEmptyRanks",function(){u(e)}),g("    nestingGraph.cleanup",function(){c.cleanup(e)}),g("    normalizeRanks",function(){s(e)}),g("    assignRankMinMax",function(){var t,n;t=e,n=0,r.forEach(t.nodes(),function(e){var o=t.node(e);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,n=r.max(n,o.maxRank))}),t.graph().maxRank=n}),g("    removeEdgeLabelProxies",function(){var t;t=e,r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}),g("    normalize.run",function(){i.run(e)}),g("    parentDummyChains",function(){l(e)}),g("    addBorderSegments",function(){d(e)}),g("    order",function(){h(e)}),g("    insertSelfEdges",function(){var t,n;t=e,n=m.buildLayerMatrix(t),r.forEach(n,function(e){var n=0;r.forEach(e,function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,function(e){m.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}),g("    adjustCoordinateSystem",function(){f.adjust(e)}),g("    position",function(){p(e)}),g("    positionSelfEdges",function(){var t;t=e,r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})}),g("    removeBorderNodes",function(){var t;t=e,r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",function(){i.undo(e)}),g("    fixupEdgeLabelCoords",function(){var t;t=e,r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}),g("    undoCoordinateSystem",function(){f.undo(e)}),g("    translateGraph",function(){!function(e){var t=1/0,n=0,o=1/0,i=0,a=e.graph(),s=a.marginx||0,l=a.marginy||0;function u(e){var r=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,r-s/2),n=Math.max(n,r+s/2),o=Math.min(o,a-l/2),i=Math.max(i,a+l/2)}r.forEach(e.nodes(),function(t){u(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.has(n,"x")&&u(n)}),t-=s,o-=l,r.forEach(e.nodes(),function(n){var r=e.node(n);r.x-=t,r.y-=o}),r.forEach(e.edges(),function(n){var i=e.edge(n);r.forEach(i.points,function(e){e.x-=t,e.y-=o}),r.has(i,"x")&&(i.x-=t),r.has(i,"y")&&(i.y-=o)}),a.width=n-t+s,a.height=i-o+l}(e)}),g("    assignNodeIntersects",function(){var t;t=e,r.forEach(t.edges(),function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(m.intersectRect(i,n)),o.points.push(m.intersectRect(a,r))})}),g("    reversePoints",function(){var t;t=e,r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}),g("    acyclic.undo",function(){o.undo(e)})}),n("  updateInputGraph",function(){var n,o;n=e,o=t,r.forEach(n.nodes(),function(e){var t=n.node(e),r=o.node(e);t&&(t.x=r.x,t.y=r.y,o.children(e).length&&(t.width=r.width,t.height=r.height))}),r.forEach(n.edges(),function(e){var t=n.edge(e),i=o.edge(e);t.points=i.points,r.has(i,"x")&&(t.x=i.x,t.y=i.y)}),n.graph().width=o.graph().width,n.graph().height=o.graph().height})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function E(e,t){return r.mapValues(r.pick(e,t),Number)}function N(e){var t={};return r.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}},23156,(e,t,n)=>{var r=e.r(71951),o=e.r(59426),i=e.r(55587).Graph;t.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),r.forEach(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),r.forEach(t,function(e,t){n.setNode("layer"+t,{rank:"same"}),r.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},31187,(e,t,n)=>{t.exports="0.8.5"},59495,(e,t,n)=>{t.exports={graphlib:e.r(55587),layout:e.r(39068),debug:e.r(23156),util:{time:e.r(59426).time,notime:e.r(59426).notime},version:e.r(31187)}},75746,28347,29917,43231,65986,18183,8756,66909,26801,91058,82436,17582,32798,57979,5685,32555,68957,1122,28736,e=>{"use strict";var t,n,r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,x=e.i(95),y=e.i(86375);function b(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=b(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}e.i(52909);var w={value:()=>{}};function k(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new j(r)}function j(e){this._=e}function _(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=w,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function E(){}function N(e){return null==e?E:function(){return this.querySelector(e)}}function S(){return[]}function C(e){return null==e?S:function(){return this.querySelectorAll(e)}}function M(e){return function(){return this.matches(e)}}function O(e){return function(t){return t.matches(e)}}j.prototype=k.prototype={constructor:j,on:function(e,t){var n,r=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((n=(e=o[i]).type)&&(n=function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++i<a;)if(n=(e=o[i]).type)r[n]=_(r[n],e.name,t);else if(null==t)for(n in r)r[n]=_(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new j(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var A=Array.prototype.find;function P(){return this.firstElementChild}var L=Array.prototype.filter;function R(){return Array.from(this.children)}function I(e){return Array(e.length)}function T(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function D(e,t,n,r,o,i){for(var a,s=0,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new T(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function z(e,t,n,r,o,i,a){var s,l,u,c=new Map,d=t.length,f=i.length,h=Array(d);for(s=0;s<d;++s)(l=t[s])&&(h[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?o[s]=l:c.set(u,l));for(s=0;s<f;++s)u=a.call(e,i[s],s,i)+"",(l=c.get(u))?(r[s]=l,l.__data__=i[s],c.delete(u)):n[s]=new T(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(h[s])===l&&(o[s]=l)}function $(e){return e.__data__}function B(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}T.prototype={constructor:T,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var q="http://www.w3.org/1999/xhtml";let H={svg:"http://www.w3.org/2000/svg",xhtml:q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),H.hasOwnProperty(t)?{space:H[t],local:e}:e}function V(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function U(e,t){return e.style.getPropertyValue(t)||V(e).getComputedStyle(e,null).getPropertyValue(t)}function X(e){return e.trim().split(/^|\s+/)}function Q(e){return e.classList||new K(e)}function K(e){this._node=e,this._names=X(e.getAttribute("class")||"")}function Y(e,t){for(var n=Q(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function W(e,t){for(var n=Q(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function G(){this.textContent=""}function Z(){this.innerHTML=""}function J(){this.nextSibling&&this.parentNode.appendChild(this)}function ee(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function et(e){var t=F(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===q&&t.documentElement.namespaceURI===q?t.createElement(e):t.createElementNS(n,e)}})(t)}function en(){return null}function er(){var e=this.parentNode;e&&e.removeChild(this)}function eo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ei(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ea(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function es(e,t,n){return function(){var r,o=this.__on,i=function(e){t.call(this,e,this.__data__)};if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function el(e,t,n){var r=V(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}K.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eu=[null];function ec(e,t){this._groups=e,this._parents=t}function ed(){return new ec([[document.documentElement]],eu)}function ef(e){return"string"==typeof e?new ec([[document.querySelector(e)]],[document.documentElement]):new ec([[e]],eu)}function eh(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}ec.prototype=ed.prototype={constructor:ec,select:function(e){"function"!=typeof e&&(e=N(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,u=r[o]=Array(l),c=0;c<l;++c)(i=s[c])&&(a=e.call(i,i.__data__,c,s))&&("__data__"in i&&(a.__data__=i.__data__),u[c]=a);return new ec(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=C(e);for(var n=this._groups,r=n.length,o=[],i=[],a=0;a<r;++a)for(var s,l=n[a],u=l.length,c=0;c<u;++c)(s=l[c])&&(o.push(e.call(s,s.__data__,c,l)),i.push(s));return new ec(o,i)},selectChild:function(e){var t;return this.select(null==e?P:(t="function"==typeof e?e:O(e),function(){return A.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?R:(t="function"==typeof e?e:O(e),function(){return L.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=M(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new ec(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,$);var n=t?z:D,r=this._parents,o=this._groups;"function"!=typeof e&&(x=e,e=function(){return x});for(var i=o.length,a=Array(i),s=Array(i),l=Array(i),u=0;u<i;++u){var c=r[u],d=o[u],f=d.length,h="object"==typeof(v=e.call(c,c&&c.__data__,u,r))&&"length"in v?v:Array.from(v),p=h.length,m=s[u]=Array(p),g=a[u]=Array(p);n(c,d,m,g,l[u]=Array(f),h,t);for(var v,x,y,b,w=0,k=0;w<p;++w)if(y=m[w]){for(w>=k&&(k=w+1);!(b=g[k])&&++k<p;);y._next=b||null}}return(a=new ec(a,r))._enter=s,a._exit=l,a},enter:function(){return new ec(this._enter||this._groups.map(I),this._parents)},exit:function(){return new ec(this._exit||this._groups.map(I),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=Array(o),l=0;l<a;++l)for(var u,c=n[l],d=r[l],f=c.length,h=s[l]=Array(f),p=0;p<f;++p)(u=c[p]||d[p])&&(h[p]=u);for(;l<o;++l)s[l]=n[l];return new ec(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=B);for(var n=this._groups,r=n.length,o=Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,u=o[i]=Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new ec(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=F(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):U(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=X(e+"");if(arguments.length<2){for(var r=Q(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Y:W)(this,e)}}:t?function(e){return function(){Y(this,e)}}:function(e){return function(){W(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?G:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Z:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(J)},lower:function(){return this.each(ee)},append:function(e){var t="function"==typeof e?e:et(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:et(e),r=null==t?en:"function"==typeof t?t:N(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(er)},clone:function(e){return this.select(e?ei:eo)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=i.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value}return}for(r=0,s=t?es:ea;r<a;++r)this.each(s(i[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return el(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return el(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};let ep={passive:!1},em={capture:!0,passive:!1};function eg(e){e.stopImmediatePropagation()}function ev(e){e.preventDefault(),e.stopImmediatePropagation()}function ex(e){var t=e.document.documentElement,n=ef(e).on("dragstart.drag",ev,em);"onselectstart"in t?n.on("selectstart.drag",ev,em):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ey(e,t){var n=e.document.documentElement,r=ef(e).on("dragstart.drag",null);t&&(r.on("click.drag",ev,em),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let eb=e=>()=>e;function ew(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function ek(e){return!e.ctrlKey&&!e.button}function ej(){return this.parentNode}function e_(e,t){return null==t?{x:e.x,y:e.y}:t}function eE(){return navigator.maxTouchPoints||"ontouchstart"in this}function eN(){var e,t,n,r,o=ek,i=ej,a=e_,s=eE,l={},u=k("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,ep).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,s){if(!r&&o.call(this,a,s)){var l=y(this,i.call(this,a,s),a,s,"mouse");l&&(ef(a.view).on("mousemove.drag",p,em).on("mouseup.drag",m,em),ex(a.view),eg(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if(ev(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function m(e){ef(e.view).on("mousemove.drag mouseup.drag",null),ey(e.view,n),ev(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=y(this,s,e,t,a[n].identifier,a[n]))&&(eg(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(ev(e),n("drag",e,r[t]))}function x(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=l[o[t].identifier])&&(eg(e),n("end",e,o[t]))}function y(e,t,n,r,o,i){var s,d,h,p=u.copy(),m=eh(i||n,t);if(null!=(h=a.call(e,new ew("beforestart",{sourceEvent:n,target:f,identifier:o,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=h.x-m[0]||0,d=h.y-m[1]||0,function n(i,a,u){var g,v=m;switch(i){case"start":l[o]=n,g=c++;break;case"end":delete l[o],--c;case"drag":m=eh(u||a,t),g=c}p.call(i,e,new ew(i,{sourceEvent:a,subject:h,target:f,identifier:o,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:eb(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:eb(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:eb(e),f):a},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:eb(!!e),f):s},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,f):Math.sqrt(d)},f}function eS(e){return((e=Math.exp(e))+1/e)/2}ew.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let eC=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],u=e[2],c=o[0],d=o[1],f=o[2],h=c-s,p=d-l,m=h*h+p*p;if(m<1e-12)a=Math.log(f/u)/t,i=function(e){return[s+e*h,l+e*p,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),v=(f*f-u*u+r*m)/(2*u*n*g),x=(f*f-u*u-r*m)/(2*f*n*g),y=Math.log(Math.sqrt(v*v+1)-v);a=(Math.log(Math.sqrt(x*x+1)-x)-y)/t,i=function(e){var r,o,i=e*a,c=eS(y),d=u/(n*g)*(c*(((r=Math.exp(2*(r=t*i+y)))-1)/(r+1))-((o=Math.exp(o=y))-1/o)/2);return[s+d*h,l+d*p,u*c/eS(t*i+y)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var eM,eO,eA=0,eP=0,eL=0,eR=0,eI=0,eT=0,eD="object"==typeof performance&&performance.now?performance:Date,ez="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function e$(){return eI||(ez(eB),eI=eD.now()+eT)}function eB(){eI=0}function eq(){this._call=this._time=this._next=null}function eH(e,t,n){var r=new eq;return r.restart(e,t,n),r}function eF(){eI=(eR=eD.now())+eT,eA=eP=0;try{e$(),++eA;for(var e,t=eM;t;)(e=eI-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eA}finally{eA=0,function(){for(var e,t,n=eM,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eM=t);eO=e,eU(r)}(),eI=0}}function eV(){var e=eD.now(),t=e-eR;t>1e3&&(eT-=t,eR=e)}function eU(e){!eA&&(eP&&(eP=clearTimeout(eP)),e-eI>24?(e<1/0&&(eP=setTimeout(eF,e-eD.now()-eT)),eL&&(eL=clearInterval(eL))):(eL||(eR=eD.now(),eL=setInterval(eV,1e3)),eA=1,ez(eF)))}function eX(e,t,n){var r=new eq;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eq.prototype=eH.prototype={constructor:eq,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?e$():+n)+(null==t?0:+t),this._next||eO===this||(eO?eO._next=this:eM=this,eO=this),this._call=e,this._time=n,eU()},stop:function(){this._call&&(this._call=null,this._time=1/0,eU())}};var eQ=k("start","end","cancel","interrupt"),eK=[];function eY(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(l){var u,c,d,f;if(1!==n.state)return s();for(u in o)if((f=o[u]).name===n.name){if(3===f.state)return eX(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(eX(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(u=0,n.state=3,r=Array(d=n.tween.length),c=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=eH(function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:eQ,tween:eK,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function eW(e,t){var n=eZ(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eG(e,t){var n=eZ(e,t);if(n.state>3)throw Error("too late; already running");return n}function eZ(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eJ(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i){if((n=i[o]).name!==t){a=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]}a&&delete e.__transition}}function e0(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var e1=180/Math.PI,e2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e5(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*e1,skewX:Math.atan(l)*e1,scaleX:a,scaleY:s}}function e3(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s,l,u,c,d=[],f=[];return i=e(i),a=e(a),!function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:e0(e,o)},{i:l-2,x:e0(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,d,f),s=i.rotate,l=a.rotate,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:e0(s,l)})):l&&d.push(o(d)+"rotate("+l+r),u=i.skewX,c=a.skewX,u!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:e0(u,c)}):c&&d.push(o(d)+"skewX("+c+r),!function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:e0(e,n)},{i:s-2,x:e0(t,r)})}else(1!==n||1!==r)&&i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,d,f),i=a=null,function(e){for(var t,n=-1,r=f.length;++n<r;)d[(t=f[n]).i]=t.x(e);return d.join("")}}}var e4=e3(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?e2:e5(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e6=e3(function(e){return null==e?e2:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",e),e=u.transform.baseVal.consolidate())?e5((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):e2},", ",")",")");function e8(e,t,n){var r=e._id;return e.each(function(){var e=eG(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eZ(e,r).value[t]}}function e7(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function e9(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function te(){}var tt="\\s*([+-]?\\d+)\\s*",tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",to=/^#([0-9a-f]{3,8})$/,ti=RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),ta=RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),ts=RegExp(`^rgba\\(${tt},${tt},${tt},${tn}\\)$`),tl=RegExp(`^rgba\\(${tr},${tr},${tr},${tn}\\)$`),tu=RegExp(`^hsl\\(${tn},${tr},${tr}\\)$`),tc=RegExp(`^hsla\\(${tn},${tr},${tr},${tn}\\)$`),td={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function tf(){return this.rgb().formatHex()}function th(){return this.rgb().formatRgb()}function tp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=to.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tm(t):3===n?new tx(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ti.exec(e))?new tx(t[1],t[2],t[3],1):(t=ta.exec(e))?new tx(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ts.exec(e))?tg(t[1],t[2],t[3],t[4]):(t=tl.exec(e))?tg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=tu.exec(e))?t_(t[1],t[2]/100,t[3]/100,1):(t=tc.exec(e))?t_(t[1],t[2]/100,t[3]/100,t[4]):td.hasOwnProperty(e)?tm(td[e]):"transparent"===e?new tx(NaN,NaN,NaN,0):null}function tm(e){return new tx(e>>16&255,e>>8&255,255&e,1)}function tg(e,t,n,r){return r<=0&&(e=t=n=NaN),new tx(e,t,n,r)}function tv(e,t,n,r){var o;return 1==arguments.length?((o=e)instanceof te||(o=tp(o)),o)?new tx((o=o.rgb()).r,o.g,o.b,o.opacity):new tx:new tx(e,t,n,null==r?1:r)}function tx(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ty(){return`#${tj(this.r)}${tj(this.g)}${tj(this.b)}`}function tb(){let e=tw(this.opacity);return`${1===e?"rgb(":"rgba("}${tk(this.r)}, ${tk(this.g)}, ${tk(this.b)}${1===e?")":`, ${e})`}`}function tw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tk(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tj(e){return((e=tk(e))<16?"0":"")+e.toString(16)}function t_(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tN(e,t,n,r)}function tE(e){if(e instanceof tN)return new tN(e.h,e.s,e.l,e.opacity);if(e instanceof te||(e=tp(e)),!e)return new tN;if(e instanceof tN)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+(n<r)*6:n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new tN(a,s,l,e.opacity)}function tN(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function tS(e){return(e=(e||0)%360)<0?e+360:e}function tC(e){return Math.max(0,Math.min(1,e||0))}function tM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tO(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}e7(te,tp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tf,formatHex:tf,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tE(this).formatHsl()},formatRgb:th,toString:th}),e7(tx,tv,e9(te,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tx(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tx(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tx(tk(this.r),tk(this.g),tk(this.b),tw(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ty,formatHex:ty,formatHex8:function(){return`#${tj(this.r)}${tj(this.g)}${tj(this.b)}${tj((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:tb,toString:tb})),e7(tN,function(e,t,n,r){return 1==arguments.length?tE(e):new tN(e,t,n,null==r?1:r)},e9(te,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tN(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tN(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new tx(tM(e>=240?e-240:e+120,o,r),tM(e,o,r),tM(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new tN(tS(this.h),tC(this.s),tC(this.l),tw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=tw(this.opacity);return`${1===e?"hsl(":"hsla("}${tS(this.h)}, ${100*tC(this.s)}%, ${100*tC(this.l)}%${1===e?")":`, ${e})`}`}}));let tA=e=>()=>e;function tP(e,t){var n=t-e;return n?function(t){return e+t*n}:tA(isNaN(e)?t:e)}let tL=function e(t){var n,r=1==(n=+t)?tP:function(e,t){var r,o,i;return t-e?(r=e,o=t,r=Math.pow(r,i=n),o=Math.pow(o,i)-r,i=1/i,function(e){return Math.pow(r+e*o,i)}):tA(isNaN(e)?t:e)};function o(e,t){var n=r((e=tv(e)).r,(t=tv(t)).r),o=r(e.g,t.g),i=r(e.b,t.b),a=tP(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function tR(e){return function(t){var n,r,o=t.length,i=Array(o),a=Array(o),s=Array(o);for(n=0;n<o;++n)r=tv(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}tR(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return tO((n-r/t)*t,a,o,i,s)}}),tR(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return tO((n-r/t)*t,o,i,a,s)}});var tI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tT=RegExp(tI.source,"g");function tD(e,t){var n,r,o,i,a,s=tI.lastIndex=tT.lastIndex=0,l=-1,u=[],c=[];for(e+="",t+="";(o=tI.exec(e))&&(i=tT.exec(t));)(a=i.index)>s&&(a=t.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(o=o[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,c.push({i:l,x:e0(o,i)})),s=tT.lastIndex;return s<t.length&&(a=t.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(r=t,function(){return r}):(t=c.length,function(e){for(var n,r=0;r<t;++r)u[(n=c[r]).i]=n.x(e);return u.join("")})}function tz(e,t){var n;return("number"==typeof t?e0:t instanceof tp?tL:(n=tp(t))?(t=n,tL):tD)(e,t)}var t$=ed.prototype.constructor;function tB(e){return function(){this.style.removeProperty(e)}}var tq=0;function tH(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var tF=ed.prototype;tH.prototype=(function(e){return ed().transition(e)}).prototype={constructor:tH,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=N(e));for(var r=this._groups,o=r.length,i=Array(o),a=0;a<o;++a)for(var s,l,u=r[a],c=u.length,d=i[a]=Array(c),f=0;f<c;++f)(s=u[f])&&(l=e.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,eY(d[f],t,n,f,d,eZ(s,n)));return new tH(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=C(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var f,h=e.call(l,l.__data__,d,u),p=eZ(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&eY(f,t,n,m,h,p);i.push(h),a.push(l)}return new tH(i,a,t,n)},selectChild:tF.selectChild,selectChildren:tF.selectChildren,filter:function(e){"function"!=typeof e&&(e=M(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],u=0;u<s;++u)(i=a[u])&&e.call(i,i.__data__,u,a)&&l.push(i);return new tH(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=Array(r),s=0;s<i;++s)for(var l,u=t[s],c=n[s],d=u.length,f=a[s]=Array(d),h=0;h<d;++h)(l=u[h]||c[h])&&(f[h]=l);for(;s<r;++s)a[s]=t[s];return new tH(a,this._parents,this._name,this._id)},selection:function(){return new t$(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++tq,r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=eZ(a,t);eY(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tH(r,this._parents,e,n)},call:tF.call,nodes:tF.nodes,node:tF.node,size:tF.size,empty:tF.empty,each:tF.each,on:function(e,t){var n,r,o,i,a,s,l=this._id;return arguments.length<2?eZ(this.node(),l).on.on(e):this.each((n=l,r=e,o=t,s=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eW:eG,function(){var e=s(this,n),t=e.on;t!==i&&(a=(i=t).copy()).on(r,o),e.on=a}))},attr:function(e,t){var n=F(e),r="transform"===n?e6:tz;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l))}}:function(e,t,n){var r,o,i;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l))}})(n,r,e8(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=F(e);return this.tween(n,(r.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(r,t))},style:function(e,t,n){var r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,x,y,b,w,k,j,_="transform"==(e+="")?e4:tz;return null==t?this.styleTween(e,(r=e,function(){var e=U(this,r),t=(this.style.removeProperty(r),U(this,r));return e===t?null:e===o&&t===i?a:a=_(o=e,i=t)})).on("end.style."+e,tB(e)):"function"==typeof t?this.styleTween(e,(s=e,l=e8(this,"style."+e,t),function(){var e=U(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=U(this,s)),e===n?null:e===u&&n===c?d:(c=n,d=_(u=e,t))})).each((f=this._id,y="end."+(x="style."+(h=e)),function(){var e=eG(this,f),t=e.on,n=null==e.value[x]?v||(v=tB(h)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(y,g=n),e.on=m})):this.styleTween(e,(b=e,j=t+"",function(){var e=U(this,b);return e===j?null:e===w?k:k=_(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(t){this.style.setProperty(e,i.call(this,t),n)}),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=e8(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=eZ(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=eG(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var i=eG(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=s;break}l===u&&o.push(s)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eW(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eW(this,e).delay=t}})(t,e)):eZ(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eG(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eG(this,e).duration=t}})(t,e)):eZ(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eG(this,e).ease=t}}(t,e)):eZ(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eG(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0==--o&&i()}};n.each(function(){var n=eG(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&i()})},[Symbol.iterator]:tF[Symbol.iterator]};var tV={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};ed.prototype.interrupt=function(e){return this.each(function(){eJ(this,e)})},ed.prototype.transition=function(e){var t,n;e instanceof tH?(t=e._id,e=e._name):(t=++tq,(n=tV).time=e$(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,u=0;u<l;++u)(a=s[u])&&eY(a,e,t,u,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(a,t));return new tH(r,this._parents,e,t)};let tU=e=>()=>e;function tX(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function tQ(e,t,n){this.k=e,this.x=t,this.y=n}tQ.prototype={constructor:tQ,scale:function(e){return 1===e?this:new tQ(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tQ(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tK=new tQ(1,0,0);function tY(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tK;return e.__zoom}function tW(e){e.stopImmediatePropagation()}function tG(e){e.preventDefault(),e.stopImmediatePropagation()}function tZ(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tJ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function t0(){return this.__zoom||tK}function t1(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function t2(){return navigator.maxTouchPoints||"ontouchstart"in this}function t5(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function t3(){var e,t,n,r=tZ,o=tJ,i=t5,a=t1,s=t2,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=eC,f=k("start","zoom","end"),h=0,p=10;function m(e){e.property("__zoom",t0).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",N).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tQ(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new tQ(e.k,r,o)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,i=b(this,e).event(r),a=o.apply(this,e),s=null==n?x(a):"function"==typeof n?n.apply(this,e):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=this.__zoom,c="function"==typeof t?t.apply(this,e):t,f=d(u.invert(s).concat(l/u.k),c.invert(s).concat(l/c.k));return function(e){if(1===e)e=c;else{var t=f(e),n=l/t[2];e=new tQ(n,s[0]-t[0]*n,s[1]-t[1]*n)}i.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function j(e,...t){if(r.apply(this,arguments)){var n=b(this,t).event(e),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,a.apply(this,arguments)))),c=eh(e);if(n.wheel)(n.mouse[0][0]!==c[0]||n.mouse[0][1]!==c[1])&&(n.mouse[1]=o.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(o.k===s)return;n.mouse=[c,o.invert(c)],eJ(this),n.start()}tG(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",i(v(g(o,s),n.mouse[0],n.mouse[1]),n.extent,u))}}function _(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,a=b(this,t,!0).event(e),s=ef(e.view).on("mousemove.zoom",function(e){if(tG(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>h}a.event(e).zoom("mouse",i(v(a.that.__zoom,a.mouse[0]=eh(e,o),a.mouse[1]),a.extent,u))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),ey(e.view,a.moved),tG(e),a.event(e).end()},!0),l=eh(e,o),c=e.clientX,d=e.clientY;ex(e.view),tW(e),a.mouse=[l,this.__zoom.invert(l)],eJ(this),a.start()}}function E(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,a=eh(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),d=i(v(g(n,l),a,s),o.apply(this,t),u);tG(e),c>0?ef(this).transition().duration(c).call(y,d,a,e):ef(this).call(m.transform,d,a,e)}}function N(n,...o){if(r.apply(this,arguments)){var i,a,s,l,u=n.touches,c=u.length,d=b(this,o,n.changedTouches.length===c).event(n);for(tW(n),a=0;a<c;++a)l=[l=eh(s=u[a],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),eJ(this),d.start())}}function S(e,...t){if(this.__zooming){var n,r,o,a,s=b(this,t).event(e),l=e.changedTouches,c=l.length;for(tG(e),n=0;n<c;++n)o=eh(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,x=(x=p[0]-f[0])*x+(x=p[1]-f[1])*x;r=g(r,Math.sqrt(m/x)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(v(r,o,a),s.extent,u))}}function C(e,...r){if(this.__zooming){var o,i,a=b(this,r).event(e),s=e.changedTouches,l=s.length;for(tW(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)i=s[o],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=eh(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<p)){var u=ef(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",t0),e!==o?y(e,t,n,r):o.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(v(g(r,l),a,s),e,u)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),u)},null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?x(e):"function"==typeof r?r.apply(this,arguments):r;return i(tK.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)},r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ef(this.that).datum();f.call(e,this.that,new tX(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:tU(+e),m):a},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:tU(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tU(!!e),m):s},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:tU([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e*=1)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}function t4(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?tA(t):("number"===o?e0:"string"===o?(r=tp(t))?(t=r,tL):tD:t instanceof tp?tL:t instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(r){return n.setTime(e*(1-r)+t*r),n}}:!ArrayBuffer.isView(n=t)||n instanceof DataView?Array.isArray(t)?function(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=Array(o),a=Array(r);for(n=0;n<o;++n)i[n]=t4(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=i[n](e);return a}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,r={},o={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=t4(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}:e0:function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}})(e,t)}tY.prototype=tQ.prototype;let t6=[[-1/0,-1/0],[1/0,1/0]],t8=["Enter"," ","Escape"],t7={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(t=c||(c={})).Strict="strict",t.Loose="loose",(n=d||(d={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(r=f||(f={})).Partial="partial",r.Full="full";let t9={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};(o=h||(h={})).Bezier="default",o.Straight="straight",o.Step="step",o.SmoothStep="smoothstep",o.SimpleBezier="simplebezier",(i=p||(p={})).Arrow="arrow",i.ArrowClosed="arrowclosed",(a=m||(m={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";let ne={[m.Left]:m.Right,[m.Right]:m.Left,[m.Top]:m.Bottom,[m.Bottom]:m.Top};function nt(e){return null===e?null:e?"valid":"invalid"}let nn=e=>"id"in e&&"source"in e&&"target"in e,nr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),no=(e,t=[0,0])=>{let{width:n,height:r}=nP(e),o=e.origin??t,i=n*o[0],a=r*o[1];return{x:e.position.x-i,y:e.position.y-a}},ni=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=nm(n,ny(e)),r=!0)}),r?nv(n):{x:0,y:0,width:0,height:0}},na=(e,t,[n,r,o]=[0,0,1],i=!1,a=!1)=>{let s={...nN(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(a&&!n||r)continue;let o=e.width??t.width??t.initialWidth??null,u=e.height??t.height??t.initialHeight??null,c=nw(s,nx(t)),d=(o??0)*(u??0),f=i&&c>0;(!t.internals.handleBounds||f||c>=d||t.dragging)&&l.push(t)}return l};async function ns({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},a){let s,l;if(0===e.size)return Promise.resolve(!0);let u=nM(ni((s=new Map,l=a?.nodes?new Set(a.nodes.map(e=>e.id)):null,e.forEach(e=>{e.measured.width&&e.measured.height&&(a?.includeHiddenNodes||!e.hidden)&&(!l||l.has(e.id))&&s.set(e.id,e)}),s)),t,n,a?.minZoom??o,a?.maxZoom??i,a?.padding??.1);return await r.setViewport(u,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function nl({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){let a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},c=a.origin??r,d=a.extent||o;if("parent"!==a.extent||a.expandParent)s&&nA(a.extent)&&(d=[[a.extent[0][0]+l,a.extent[0][1]+u],[a.extent[1][0]+l,a.extent[1][1]+u]]);else if(s){let e=s.measured.width,t=s.measured.height;e&&t&&(d=[[l,u],[l+e,u+t]])}else i?.("005","Only child nodes can use a parent extent.");let f=nA(d)?nd(t,d,a.measured):t;return(void 0===a.measured.width||void 0===a.measured.height)&&i?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:f.x-l+(a.measured.width??0)*c[0],y:f.y-u+(a.measured.height??0)*c[1]},positionAbsolute:f}}async function nu({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let i,a=new Set(e.map(e=>e.id)),s=[];for(let e of n){if(!1===e.deletable)continue;let t=a.has(e.id),n=!t&&e.parentId&&s.find(t=>t.id===e.parentId);(t||n)&&s.push(e)}let l=new Set(t.map(e=>e.id)),u=r.filter(e=>!1!==e.deletable),c=(i=new Set,s.forEach(e=>{i.add(e.id)}),u.filter(e=>i.has(e.source)||i.has(e.target)));for(let e of u)l.has(e.id)&&!c.find(t=>t.id===e.id)&&c.push(e);if(!o)return{edges:c,nodes:s};let d=await o({nodes:s,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}let nc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),nd=(e={x:0,y:0},t,n)=>({x:nc(e.x,t[0][0],t[1][0]-(n?.width??0)),y:nc(e.y,t[0][1],t[1][1]-(n?.height??0))});function nf(e,t,n){let{width:r,height:o}=nP(n),{x:i,y:a}=n.internals.positionAbsolute;return nd(e,[[i,a],[i+r,a+o]],t)}let nh=(e,t,n)=>e<t?nc(Math.abs(e-t),1,t)/t:e>n?-nc(Math.abs(e-n),1,t)/t:0,np=(e,t,n=15,r=40)=>[nh(e.x,r,t.width-r)*n,nh(e.y,r,t.height-r)*n],nm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ng=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),nv=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),nx=(e,t=[0,0])=>{let{x:n,y:r}=nr(e)?e.internals.positionAbsolute:no(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ny=(e,t=[0,0])=>{let{x:n,y:r}=nr(e)?e.internals.positionAbsolute:no(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},nb=(e,t)=>nv(nm(ng(e),ng(t))),nw=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),nk=e=>nj(e.width)&&nj(e.height)&&nj(e.x)&&nj(e.y),nj=e=>!isNaN(e)&&isFinite(e),n_=(e,t)=>{},nE=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),nN=({x:e,y:t},[n,r,o],i=!1,a=[1,1])=>{let s={x:(e-n)/o,y:(t-r)/o};return i?nE(s,a):s},nS=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function nC(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let nM=(e,t,n,r,o,i)=>{let a=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=nC(e,n),o=nC(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){let r=nC(e.top??e.y??0,n),o=nC(e.bottom??e.y??0,n),i=nC(e.left??e.x??0,t),a=nC(e.right??e.x??0,t);return{top:r,right:a,bottom:o,left:i,x:i+a,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=nc(Math.min((t-a.x)/e.width,(n-a.y)/e.height),r,o),l=e.x+e.width/2,u=e.y+e.height/2,c=t/2-l*s,d=n/2-u*s,f=function(e,t,n,r,o,i){let{x:a,y:s}=nS(e,[t,n,r]),{x:l,y:u}=nS({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(o-l),bottom:Math.floor(i-u)}}(e,c,d,s,t,n),h={left:Math.min(f.left-a.left,0),top:Math.min(f.top-a.top,0),right:Math.min(f.right-a.right,0),bottom:Math.min(f.bottom-a.bottom,0)};return{x:c-h.left+h.right,y:d-h.top+h.bottom,zoom:s}},nO=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function nA(e){return null!=e&&"parent"!==e}function nP(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function nL(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function nR(e,t={width:0,height:0},n,r,o){let i={...e},a=r.get(n);if(a){let e=a.origin||o;i.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function nI(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function nT(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){let{x:i,y:a}=nq(e),s=nN({x:i-(o?.left??0),y:a-(o?.top??0)},r),{x:l,y:u}=n?nE(s,t):s;return{xSnapped:l,ySnapped:u,...s}}let nD=e=>({width:e.offsetWidth,height:e.offsetHeight}),nz=e=>e?.getRootNode?.()||window?.document,n$=["INPUT","SELECT","TEXTAREA"];function nB(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(n$.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let nq=(e,t)=>{let n="clientX"in e,r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},nH=(e,t,n,r,o)=>{let i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...nD(t)}}):null};function nF({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){let l=.125*e+.375*o+.375*a+.125*n,u=.125*t+.375*i+.375*s+.125*r,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function nV(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nU({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case m.Left:return[t-nV(t-r,i),n];case m.Right:return[t+nV(r-t,i),n];case m.Top:return[t,n-nV(n-o,i)];case m.Bottom:return[t,n+nV(o-n,i)]}}function nX({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:i=m.Top,curvature:a=.25}){let[s,l]=nU({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[u,c]=nU({pos:i,x1:r,y1:o,x2:e,y2:t,c:a}),[d,f,h,p]=nF({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${r},${o}`,d,f,h,p]}function nQ({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,i=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+i:r-i,o,i]}let nK=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`;function nY({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,i,a,s]=nQ({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,a,s]}let nW={[m.Left]:{x:-1,y:0},[m.Right]:{x:1,y:0},[m.Top]:{x:0,y:-1},[m.Bottom]:{x:0,y:1}},nG=({source:e,sourcePosition:t=m.Bottom,target:n})=>t===m.Left||t===m.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},nZ=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nJ({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:i=m.Top,borderRadius:a=5,centerX:s,centerY:l,offset:u=20,stepPosition:c=.5}){let[d,f,h,p,g]=function({source:e,sourcePosition:t=m.Bottom,target:n,targetPosition:r=m.Top,center:o,offset:i,stepPosition:a}){let s,l,u=nW[t],c=nW[r],d={x:e.x+u.x*i,y:e.y+u.y*i},f={x:n.x+c.x*i,y:n.y+c.y*i},h=nG({source:d,sourcePosition:t,target:f}),p=0!==h.x?"x":"y",g=h[p],v=[],x={x:0,y:0},y={x:0,y:0},[,,b,w]=nQ({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[p]*c[p]==-1){"x"===p?(s=o.x??d.x+(f.x-d.x)*a,l=o.y??(d.y+f.y)/2):(s=o.x??(d.x+f.x)/2,l=o.y??d.y+(f.y-d.y)*a);let e=[{x:s,y:d.y},{x:s,y:f.y}],t=[{x:d.x,y:l},{x:f.x,y:l}];v=u[p]===g?"x"===p?e:t:"x"===p?t:e}else{let o=[{x:d.x,y:f.y}],a=[{x:f.x,y:d.y}];if(v="x"===p?u.x===g?a:o:u.y===g?o:a,t===r){let t=Math.abs(e[p]-n[p]);if(t<=i){let r=Math.min(i-1,i-t);u[p]===g?x[p]=(d[p]>e[p]?-1:1)*r:y[p]=(f[p]>n[p]?-1:1)*r}}if(t!==r){let e="x"===p?"y":"x",t=u[p]===c[e],n=d[e]>f[e],r=d[e]<f[e];(1===u[p]&&(!t&&n||t&&r)||1!==u[p]&&(!t&&r||t&&n))&&(v="x"===p?o:a)}let h={x:d.x+x.x,y:d.y+x.y},m={x:f.x+y.x,y:f.y+y.y};Math.max(Math.abs(h.x-v[0].x),Math.abs(m.x-v[0].x))>=Math.max(Math.abs(h.y-v[0].y),Math.abs(m.y-v[0].y))?(s=(h.x+m.x)/2,l=v[0].y):(s=v[0].x,l=(h.y+m.y)/2)}return[[e,{x:d.x+x.x,y:d.y+x.y},...v,{x:f.x+y.x,y:f.y+y.y},n],s,l,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:s,y:l},offset:u,stepPosition:c});return[d.reduce((e,t,n)=>e+(n>0&&n<d.length-1?function(e,t,n,r){let o=Math.min(nZ(e,t)/2,nZ(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${i+o*t},${a}Q ${i},${a} ${i},${a+o*r}`}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+o*l}Q ${i},${a} ${i+o*s},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`),""),f,h,p,g]}function n0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function n1(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function n2(e,t,n=m.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??nP(e);if(r)return{x:o+a/2,y:i+s/2};switch(t?.position??n){case m.Top:return{x:o+a/2,y:i};case m.Right:return{x:o+a,y:i+s/2};case m.Bottom:return{x:o+a/2,y:i+s};case m.Left:return{x:o,y:i+s/2}}}function n5(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function n3(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}let n4={nodeOrigin:[0,0],nodeExtent:t6,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},n6={...n4,checkEquality:!0};function n8(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function n7(e){return"manual"===e}function n9(e,t,n,r={}){let o=n8(n6,r),i={i:0},a=new Map(t),s=o?.elevateNodesOnSelect&&!n7(o.zIndexMode)?1e3:0,l=e.length>0;for(let u of(t.clear(),n.clear(),e)){let e=a.get(u.id);if(o.checkEquality&&u===e?.internals.userNode)t.set(u.id,e);else{let n=nd(no(u,o.nodeOrigin),nA(u.extent)?u.extent:o.nodeExtent,nP(u));e={...o.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:n,handleBounds:function(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let n=[],r=[];for(let t of e.handles){let o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}(u,e),z:rt(u,s,o.zIndexMode),userNode:u}},t.set(u.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),u.parentId&&re(e,t,n,r,i)}return l}function re(e,t,n,r,o){let{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:s,zIndexMode:l}=n8(n4,r),u=e.parentId,c=t.get(u);if(!c)return void console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n),o&&!c.parentId&&void 0===c.internals.rootParentIndex&&"auto"===l&&(c.internals.rootParentIndex=++o.i,c.internals.z=c.internals.z+10*o.i),o&&void 0!==c.internals.rootParentIndex&&(o.i=c.internals.rootParentIndex);let{x:d,y:f,z:h}=function(e,t,n,r,o,i){let{x:a,y:s}=t.internals.positionAbsolute,l=nP(e),u=no(e,n),c=nA(e.extent)?nd(u,e.extent,l):u,d=nd({x:a+c.x,y:s+c.y},r,l);"parent"===e.extent&&(d=nf(d,l,t));let f=rt(e,o,i),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=f?h+1:f}}(e,c,a,s,i&&!n7(l)?1e3:0,l),{positionAbsolute:p}=e.internals,m=d!==p.x||f!==p.y;(m||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:d,y:f}:p,z:h}})}function rt(e,t,n){let r=nj(e.zIndex)?e.zIndex:0;return n7(n)?r:r+(e.selected?t:0)}function rn(e,t,n,r=[0,0]){let o=[],i=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=nb(i.get(n.parentId)?.expandedRect??nx(e),n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},a)=>{let s=i.internals.positionAbsolute,l=nP(i),u=i.origin??r,c=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,f=Math.max(l.width,Math.round(t.width)),h=Math.max(l.height,Math.round(t.height)),p=(f-l.width)*u[0],m=(h-l.height)*u[1];(c>0||d>0||p||m)&&(o.push({id:a,type:"position",position:{x:i.position.x-c+p,y:i.position.y-d+m}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||c||d)&&o.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:f+(c?u[0]*c-p:0),height:h+(d?u[1]*d-m:0)}})}),o}async function rr({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r);return Promise.resolve(!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]))}function ro(e,t,n,r,o,i){let a=o,s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${o}-${e}`;let l=r.get(a)||new Map;if(r.set(a,l.set(n,t)),i){a=`${o}-${e}-${i}`;let s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function ri(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:i=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:a},l=`${n}-${i}--${o}-${a}`;ro("source",s,`${o}-${a}--${n}-${i}`,e,n,i),ro("target",s,l,e,o,a),t.set(r.id,r)}}function ra(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r)return!1}function rs({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let o=[];for(let[e,i]of t){let t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];let i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:r}:o[0],o]}function rl(e,t,n,r,o,i=!1){let a=r.get(e);if(!a)return null;let s="strict"===o?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&i?{...l,...n2(a,l,l.position,!0)}:l}function ru(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let rc=()=>!0;function rd(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:u=rc,nodeLookup:d}){let f="target"===i,h=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:m}=nq(e),g=a.elementFromPoint(p,m),v=g?.classList.contains(`${s}-flow__handle`)?g:h,x={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){let e=ru(void 0,v),t=v.getAttribute("data-nodeid"),i=v.getAttribute("data-handleid"),a=v.classList.contains("connectable"),s=v.classList.contains("connectableend");if(!t||!e)return x;let l={source:f?t:r,sourceHandle:f?i:o,target:f?r:t,targetHandle:f?o:i};x.connection=l,x.isValid=a&&s&&(n===c.Strict?f&&"source"===e||!f&&"target"===e:t!==r||i!==o)&&u(l),x.toHandle=rl(t,e,i,d,n,!0)}return x}let rf=function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:g,onConnectEnd:v,isValidConnection:x=rc,onReconnectEnd:y,updateConnection:b,getTransform:w,getFromHandle:k,autoPanSpeed:j,dragThreshold:_=1,handleDomNode:E}){let N,S=nz(e.target),C=0,{x:M,y:O}=nq(e),A=ru(i,E),P=s?.getBoundingClientRect(),L=!1;if(!P||!A)return;let R=rl(o,A,r,l,t);if(!R)return;let I=nq(e,P),T=!1,D=null,z=!1,$=null,B={...R,nodeId:o,type:A,position:R.position},q=l.get(o),H={inProgress:!0,isValid:null,from:n2(q,B,m.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:q,to:I,toHandle:null,toPosition:ne[B.position],toNode:null,pointer:I};function F(){L=!0,b(H),p?.(e,{nodeId:o,handleId:r,handleType:A})}function V(e){var i,s;let h;if(!L){let{x:t,y:n}=nq(e),r=t-M,o=n-O;if(!(r*r+o*o>_*_))return;F()}if(!k()||!B)return void U(e);let p=w();N=function(e,t,n,r){let o=[],i=1/0;for(let a of function(e,t,n){let r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())nw(o,nx(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:s,y:l}=n2(a,n,n.position,!0),u=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(l-e.y,2));u>t||(u<i?(o=[{...n,x:s,y:l}],i=u):u===i&&o.push({...n,x:s,y:l}))}if(!o.length)return null;if(o.length>1){let e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(nN(I=nq(e,P),p,!1,[1,1]),n,l,B),T||(!function e(){if(!c||!P)return;let[t,n]=np(I,P,j);f({x:t,y:n}),C=requestAnimationFrame(e)}(),T=!0);let g=rd(e,{handle:N,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:a?"target":"source",isValidConnection:x,doc:S,lib:u,flowId:d,nodeLookup:l});$=g.handleDomNode,D=g.connection,i=!!N,s=g.isValid,h=null,s?h=!0:i&&!s&&(h=!1),z=h;let v=l.get(o),y=v?n2(v,B,m.Left,!0):H.from,E={...H,from:y,isValid:z,to:g.toHandle&&z?nS({x:g.toHandle.x,y:g.toHandle.y},p):I,toHandle:g.toHandle,toPosition:z&&g.toHandle?g.toHandle.position:ne[B.position],toNode:g.toHandle?l.get(g.toHandle.nodeId):null,pointer:I};b(E),H=E}function U(e){if(!("touches"in e)||!(e.touches.length>0)){if(L){(N||$)&&D&&z&&g?.(D);let{inProgress:t,...n}=H,r={...n,toPosition:H.toHandle?H.toPosition:null};v?.(e,r),i&&y?.(e,r)}h(),cancelAnimationFrame(C),T=!1,z=!1,D=null,$=null,S.removeEventListener("mousemove",V),S.removeEventListener("mouseup",U),S.removeEventListener("touchmove",V),S.removeEventListener("touchend",U)}}0===_&&F(),S.addEventListener("mousemove",V),S.addEventListener("mouseup",U),S.addEventListener("touchmove",V),S.addEventListener("touchend",U)},rh=e=>({x:e.x,y:e.y,zoom:e.k}),rp=({x:e,y:t,zoom:n})=>tK.translate(e,t).scale(n),rm=(e,t)=>e.target.closest(`.${t}`),rg=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),rv=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,rx=(e,t=0,n=rv,r=()=>{})=>{let o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},ry=e=>{let t=e.ctrlKey&&nO()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function rb(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:e.includes("left"),affectsY:e.includes("top")}}function rw(e,t){return Math.max(0,t-e)}function rk(e,t){return Math.max(0,e-t)}function rj(e,t,n){return Math.max(0,t-e,e-n)}(s=g||(g={})).Line="line",s.Handle="handle";let r_={width:0,height:0,x:0,y:0},rE={...r_,pointerX:0,pointerY:0,aspectRatio:1};var rN=e.i(96177);let rS={get url(){return`file://${e.P("node_modules/.pnpm/zustand@4.5.7_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/vanilla.mjs")}`}},rC=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(rS.env?rS.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},{useDebugValue:rM}=y.default,{useSyncExternalStoreWithSelector:rO}=rN.default,rA=e=>e;function rP(e,t=rA,n){let r=rO(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rM(r),r}let rL=(e,t)=>{let n=e?rC(e):rC,r=(e,r=t)=>rP(n,e,r);return Object.assign(r,n),r};function rR(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}e.i(34063);let rI=(0,y.createContext)(null),rT=rI.Provider,rD="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function rz(e,t){let n=(0,y.useContext)(rI);if(null===n)throw Error(rD);return rP(n,e,t)}function r$(){let e=(0,y.useContext)(rI);if(null===e)throw Error(rD);return(0,y.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let rB={display:"none"},rq={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rH="react-flow__node-desc",rF="react-flow__edge-desc",rV=e=>e.ariaLiveMessage,rU=e=>e.ariaLabelConfig;function rX({rfId:e}){let t=rz(rV);return(0,x.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rq,children:t})}function rQ({rfId:e,disableKeyboardA11y:t}){let n=rz(rU);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{id:`${rH}-${e}`,style:rB,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,x.jsx)("div",{id:`${rF}-${e}`,style:rB,children:n["edge.a11yDescription.default"]}),!t&&(0,x.jsx)(rX,{rfId:e})]})}let rK=(0,y.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{let a=`${e}`.split("-");return(0,x.jsx)("div",{className:b(["react-flow__panel",n,...a]),style:r,ref:i,...o,children:t})});function rY({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,x.jsx)(rK,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,x.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}rK.displayName="Panel";let rW=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},rG=e=>e.id;function rZ(e,t){return rR(e.selectedNodes.map(rG),t.selectedNodes.map(rG))&&rR(e.selectedEdges.map(rG),t.selectedEdges.map(rG))}function rJ({onSelectionChange:e}){let t=r$(),{selectedNodes:n,selectedEdges:r}=rz(rW,rZ);return(0,y.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}let r0=e=>!!e.onSelectionChangeHandlers;function r1({onSelectionChange:e}){let t=rz(r0);return e||t?(0,x.jsx)(rJ,{onSelectionChange:e}):null}let r2=[0,0],r5={x:0,y:0,zoom:1},r3=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode","rfId"],r4=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),r6={translateExtent:t6,nodeOrigin:r2,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function r8(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l}=rz(r4,rR),u=r$();(0,y.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=r6,s()}),[]);let c=(0,y.useRef)(r6);return(0,y.useEffect)(()=>{for(let s of r3){let l=e[s];if(l!==c.current[s]&&void 0!==e[s])if("nodes"===s)t(l);else if("edges"===s)n(l);else if("minZoom"===s)r(l);else if("maxZoom"===s)o(l);else if("translateExtent"===s)i(l);else if("nodeExtent"===s)a(l);else if("ariaLabelConfig"===s)u.setState({ariaLabelConfig:{...t7,...l||{}}});else"fitView"===s?u.setState({fitViewQueued:l}):"fitViewOptions"===s?u.setState({fitViewOptions:l}):u.setState({[s]:l})}c.current=e},r3.map(t=>e[t])),null}function r7(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let r9="undefined"!=typeof document?document:null;function oe(e=null,t={target:r9,actInsideInputWithModifier:!0}){let[n,r]=(0,y.useState)(!1),o=(0,y.useRef)(!1),i=(0,y.useRef)(new Set([])),[a,s]=(0,y.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,y.useEffect)(()=>{let n=t?.target??r9,l=t?.actInsideInputWithModifier??!0;if(null!==e){let e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!o.current||o.current&&!l)&&nB(e))return!1;let n=on(e.code,s);if(i.current.add(e[n]),ot(a,i.current,!1)){let n=e.composedPath?.()?.[0]||e.target,i=n?.nodeName==="BUTTON"||n?.nodeName==="A";!1!==t.preventDefault&&(o.current||!i)&&e.preventDefault(),r(!0)}},u=e=>{let t=on(e.code,s);ot(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),o.current=!1},c=()=>{i.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",u),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",u),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}},[e,r]),n}function ot(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function on(e,t){return t.includes(e)?"code":"key"}function or(e,t){let n=[],r=new Map,o=[];for(let t of e)if("add"===t.type){o.push(t);continue}else if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let o={...e};for(let e of t){var i=e,a=o;switch(i.type){case"select":a.selected=i.selected;break;case"position":void 0!==i.position&&(a.position=i.position),void 0!==i.dragging&&(a.dragging=i.dragging);break;case"dimensions":void 0!==i.dimensions&&(a.measured={...i.dimensions},i.setAttributes&&((!0===i.setAttributes||"width"===i.setAttributes)&&(a.width=i.dimensions.width),(!0===i.setAttributes||"height"===i.setAttributes)&&(a.height=i.dimensions.height))),"boolean"==typeof i.resizing&&(a.resizing=i.resizing)}}n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function oo(e,t){return{id:e,type:"select",selected:t}}function oi(e,t=new Set,n=!1){let r=[];for(let[o,i]of e){let e=t.has(o);(void 0!==i.selected||e)&&i.selected!==e&&(n&&(i.selected=e),r.push(oo(i.id,e)))}return r}function oa({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,o]of e.entries()){let e=t.get(o.id),i=e?.internals?.userNode??e;void 0!==i&&i!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===i&&n.push({item:o,type:"add",index:r})}for(let[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function os(e){return{id:e.id,type:"remove"}}let ol=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e);function ou(e){return(0,y.forwardRef)(e)}let oc="undefined"!=typeof window?y.useLayoutEffect:y.useEffect;function od(e){let[t,n]=(0,y.useState)(BigInt(0)),[r]=(0,y.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return oc(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}let of=(0,y.createContext)(null);function oh({children:e}){let t=r$(),n=od((0,y.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:a,fitViewQueued:s,onNodesChangeMiddlewareMap:l}=t.getState(),u=n;for(let t of e)u="function"==typeof t?t(u):t;let c=oa({items:u,lookup:a});for(let e of l.values())c=e(c);o&&r(u),c.length>0?i?.(c):s&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=od((0,y.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:a}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;o?r(s):i&&i(oa({items:s,lookup:a}))},[])),o=(0,y.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,x.jsx)(of.Provider,{value:o,children:e})}let op=e=>!!e.panZoom;function om(){let e,t=(e=r$(),(0,y.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,o,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{let{width:r,height:o,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=nM(t,r,o,i,a,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:o,snapToGrid:i,domNode:a}=e.getState();if(!a)return t;let{x:s,y:l}=a.getBoundingClientRect(),u={x:t.x-s,y:t.y-l},c=n.snapGrid??o;return nN(u,r,n.snapToGrid??i,c)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:i}=r.getBoundingClientRect(),a=nS(t,n);return{x:a.x+o,y:a.y+i}}}),[])),n=r$(),r=function(){let e=(0,y.useContext)(of);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),o=rz(op),i=(0,y.useMemo)(()=>{let e=e=>n.getState().nodeLookup.get(e),t=e=>{r.nodeQueue.push(e)},o=e=>{r.edgeQueue.push(e)},i=e=>{let{nodeLookup:t,nodeOrigin:r}=n.getState(),o=ol(e)?e:t.get(e.id),i=o.parentId?nR(o.position,o.measured,o.parentId,t,r):o.position;return nx({...o,position:i,width:o.measured?.width??o.width,height:o.measured?.height??o.height})},a=(e,n,r={replace:!1})=>{t(t=>t.map(t=>{if(t.id===e){let e="function"==typeof n?n(t):n;return r.replace&&ol(e)?e:{...t,...e}}return t}))},s=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&nn(e)?e:{...r,...e}}return r}))};return{getNodes:()=>n.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=n.getState();return e.map(e=>({...e}))},getEdge:e=>n.getState().edgeLookup.get(e),setNodes:t,setEdges:o,addNodes:e=>{let t=Array.isArray(e)?e:[e];r.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];r.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:t=[],transform:r}=n.getState(),[o,i,a]=r;return{nodes:e.map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:o,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:t=[]})=>{let{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:u,onBeforeDelete:c}=n.getState(),{nodes:d,edges:f}=await nu({nodesToRemove:e,edgesToRemove:t,nodes:r,edges:o,onBeforeDelete:c}),h=f.length>0,p=d.length>0;if(h){let e=f.map(os);a?.(f),l(e)}if(p){let e=d.map(os);i?.(d),s(e)}return(p||h)&&u?.({nodes:d,edges:f}),{deletedNodes:d,deletedEdges:f}},getIntersectingNodes:(e,t=!0,r)=>{let o=nk(e),a=o?e:i(e),s=void 0!==r;return a?(r||n.getState().nodes).filter(r=>{let i=n.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;let l=nx(s?r:i),u=nw(l,a);return t&&u>0||u>=l.width*l.height||u>=a.width*a.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=nk(e)?e:i(e);if(!r)return!1;let o=nw(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:t,nodeOrigin:r}=n.getState();return((e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:nv(e.reduce((e,n)=>{let r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):nr(n)?n:t.nodeLookup.get(n.id)),nm(e,o?ny(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})))(e,{nodeLookup:t,nodeOrigin:r})},getHandleConnections:({type:e,id:t,nodeId:r})=>Array.from(n.getState().connectionLookup.get(`${r}-${e}${t?`-${t}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:t,nodeId:r})=>Array.from(n.getState().connectionLookup.get(`${r}${e?t?`-${e}-${t}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{let t,o,i=n.getState().fitViewResolver??{promise:new Promise((e,n)=>{t=e,o=n}),resolve:t,reject:o};return n.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:i}),r.nodeQueue.push(e=>[...e]),i.promise}}},[]);return(0,y.useMemo)(()=>({...i,...t,viewportInitialized:o}),[o])}let og=e=>e.selected,ov="undefined"!=typeof window?window:void 0,ox={position:"absolute",width:"100%",height:"100%",top:0,left:0},oy=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ob({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=d.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:m,noWheelClassName:g,noPanClassName:v,onViewportChange:b,isControlledViewport:w,paneClickDistance:k,selectionOnDrag:j}){let _,E=r$(),N=(0,y.useRef)(null),{userSelectionActive:S,lib:C,connectionInProgress:M}=rz(oy,rR),O=oe(h),A=(0,y.useRef)();_=r$(),(0,y.useEffect)(()=>{let e=()=>{if(!N.current||!(N.current.checkVisibility?.()??!0))return!1;let e=nD(N.current);(0===e.height||0===e.width)&&_.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),_.setState({width:e.width||500,height:e.height||500})};if(N.current){e(),window.addEventListener("resize",e);let t=new ResizeObserver(()=>e());return t.observe(N.current),()=>{window.removeEventListener("resize",e),t&&N.current&&t.unobserve(N.current)}}},[]);let P=(0,y.useCallback)(e=>{b?.({x:e[0],y:e[1],zoom:e[2]}),w||E.setState({transform:e})},[b,w]);return(0,y.useEffect)(()=>{if(N.current){A.current=function({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:s,onDraggingChange:l}){let u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),f=t3().scaleExtent([t,n]).translateExtent(r),h=ef(e).call(f);x({x:o.x,y:o.y,zoom:nc(o.zoom,t,n)},[[0,0],[c.width,c.height]],r);let p=h.on("wheel.zoom"),m=h.on("dblclick.zoom");function g(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?t4:eC).transform(rx(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function x(e,t,n){let r=rp(e),o=f?.constrain()(r,t,n);return o&&await g(o),new Promise(e=>e(o))}return f.wheelDelta(ry),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:c,panOnScrollMode:g,panOnScrollSpeed:x,preventScrolling:y,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:k,zoomActivationKeyPressed:j,lib:_,onTransformChange:E,connectionInProgress:N,paneClickDistance:S,selectionOnDrag:C}){r&&!u.isZoomingOrPanning&&v();let M=o&&!j&&!r;f.clickDistance(C?1/0:!nj(S)||S<0?0:S);let O=M?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(rm(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();let f=n.property("__zoom").k||1;if(c.ctrlKey&&a){let e=eh(c),t=f*Math.pow(2,ry(c));r.scaleTo(n,t,e,c);return}let h=1===c.deltaMode?20:1,p=o===d.Vertical?0:c.deltaX*h,m=o===d.Horizontal?0:c.deltaY*h;!nO()&&c.shiftKey&&o!==d.Vertical&&(p=c.deltaY*h,m=0),r.translateBy(n,-(p/f)*i,-(m/f)*i,{internal:!0});let g=rh(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(c,g),e.panScrollTimeout=setTimeout(()=>{u?.(c,g),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(c,g))}}({zoomPanValues:u,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:g,panOnScrollSpeed:x,zoomOnPinch:b,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:s}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){let i="wheel"===r.type,a=!t&&i&&!r.ctrlKey,s=rm(r,e);if(r.ctrlKey&&i&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:p});if(h.on("wheel.zoom",O,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let o=rh(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});f.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!!(n&&rg(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,rh(i.transform))}}({zoomPanValues:u,panOnDrag:c,onPaneContextMenu:!!n,onPanZoom:i,onTransformChange:E});f.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&rg(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){let t=rh(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(a.sourceEvent,t)},150*!!n)}}}({zoomPanValues:u,panOnDrag:c,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:s,onDraggingChange:l});f.on("end",r)}let A=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:u,connectionInProgress:c}){return d=>{let f=e||t,h=n&&d.ctrlKey,p="wheel"===d.type;if(1===d.button&&"mousedown"===d.type&&(rm(d,`${u}-flow__node`)||rm(d,`${u}-flow__edge`)))return!0;if(!r&&!f&&!o&&!i&&!n||a||c&&!p||rm(d,s)&&p||rm(d,l)&&(!p||o&&p&&!e)||!n&&d.ctrlKey&&p)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!o&&!h&&p||!r&&("mousedown"===d.type||"touchstart"===d.type)||Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;let m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||p)&&m}}({zoomActivationKeyPressed:j,panOnDrag:c,zoomOnScroll:w,panOnScroll:o,zoomOnDoubleClick:k,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:_,connectionInProgress:N});f.filter(A),k?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)},destroy:v,setViewport:async function e(e,t){let n=rp(e);return await g(n,t),new Promise(e=>e(n))},setViewportConstrained:x,getViewport:function(){let e=h?tY(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?t4:eC).scaleTo(rx(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?t4:eC).scaleBy(rx(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){let t=rp(e),n=h.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){let t=!nj(e)||e<0?0:e;f?.clickDistance(t)}}}({domNode:N.current,minZoom:c,maxZoom:f,translateExtent:u,viewport:l,onDraggingChange:e=>E.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:r}=E.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:r}=E.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:r}=E.getState();r?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=A.current.getViewport();return E.setState({panZoom:A.current,transform:[e,t,n],domNode:N.current.closest(".react-flow")}),()=>{A.current?.destroy()}}},[]),(0,y.useEffect)(()=>{A.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:v,userSelectionActive:S,noWheelClassName:g,lib:C,onTransformChange:P,connectionInProgress:M,selectionOnDrag:j,paneClickDistance:k})},[e,t,n,r,o,i,a,s,O,p,v,S,g,C,P,M,j,k]),(0,x.jsx)("div",{className:"react-flow__renderer",ref:N,style:ox,children:m})}let ow=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ok(){let{userSelectionActive:e,userSelectionRect:t}=rz(ow,rR);return e&&t?(0,x.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let oj=(e,t)=>n=>{n.target===t.current&&e?.(n)},o_=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function oE({isSelecting:e,selectionKeyPressed:t,selectionMode:n=f.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:h,onPaneMouseLeave:p,children:m}){let g=r$(),{userSelectionActive:v,elementsSelectable:w,dragging:k,connectionInProgress:j}=rz(o_,rR),_=w&&(e||v),E=(0,y.useRef)(null),N=(0,y.useRef)(),S=(0,y.useRef)(new Set),C=(0,y.useRef)(new Set),M=(0,y.useRef)(!1),O=e=>{if(M.current||j){M.current=!1;return}l?.(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},A=!0===r||Array.isArray(r)&&r.includes(0);return(0,x.jsxs)("div",{className:b(["react-flow__pane",{draggable:A,dragging:k,selection:e}]),onClick:_?void 0:oj(O,E),onContextMenu:oj(e=>{Array.isArray(r)&&r?.includes(2)?e.preventDefault():u?.(e)},E),onWheel:oj(c?e=>c(e):void 0,E),onPointerEnter:_?void 0:d,onPointerMove:_?e=>{let{userSelectionRect:r,transform:i,nodeLookup:s,edgeLookup:l,connectionLookup:u,triggerNodeChanges:c,triggerEdgeChanges:d,defaultEdgeOptions:h,resetSelectedElements:p}=g.getState();if(!N.current||!r)return;let{x:m,y:v}=nq(e.nativeEvent,N.current),{startX:x,startY:y}=r;if(!M.current){if(Math.hypot(m-x,v-y)<=(t?0:o))return;p(),a?.(e)}M.current=!0;let b={startX:x,startY:y,x:m<x?m:x,y:v<y?v:y,width:Math.abs(m-x),height:Math.abs(v-y)},w=S.current,k=C.current;S.current=new Set(na(s,b,i,n===f.Partial,!0).map(e=>e.id)),C.current=new Set;let j=h?.selectable??!0;for(let e of S.current){let t=u.get(e);if(t)for(let{edgeId:e}of t.values()){let t=l.get(e);t&&(t.selectable??j)&&C.current.add(e)}}nI(w,S.current)||c(oi(s,S.current,!0)),nI(k,C.current)||d(oi(l,C.current)),g.setState({userSelectionRect:b,userSelectionActive:!0,nodesSelectionActive:!1})}:h,onPointerUp:_?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!v&&e.target===E.current&&g.getState().userSelectionRect&&O?.(e),g.setState({userSelectionActive:!1,userSelectionRect:null}),M.current&&(s?.(e),g.setState({nodesSelectionActive:S.current.size>0})))}:void 0,onPointerDownCapture:_?n=>{let{domNode:r}=g.getState();if(N.current=r?.getBoundingClientRect(),!N.current)return;let o=n.target===E.current;if(!o&&n.target.closest(".nokey")||!e||!(i&&o||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),M.current=!1;let{x:a,y:s}=nq(n.nativeEvent,N.current);g.setState({userSelectionRect:{width:0,height:0,startX:a,startY:s,x:a,y:s}}),o||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:_?e=>{M.current&&(e.stopPropagation(),M.current=!1)}:void 0,onPointerLeave:p,ref:E,style:ox,children:[m,(0,x.jsx)(ok,{})]})}function oN({id:e,store:t,unselect:n=!1,nodeRef:r}){let o,{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:l,onError:u}=t.getState(),c=l.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])):u?.("012",(o=e,`Node with id "${o}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function oS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:a}){let s=r$(),[l,u]=(0,y.useState)(!1),c=(0,y.useRef)();return(0,y.useEffect)(()=>{c.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},a=0,s=new Map,l=!1,u={x:0,y:0},c=null,d=!1,f=null,h=!1,p=!1,m=null;return{update:function({noDragClassName:g,handleSelector:v,domNode:x,isSelectable:y,nodeId:b,nodeClickDistance:w=0}){function k({x:e,y:n}){let{nodeLookup:o,nodeExtent:a,snapGrid:l,snapToGrid:u,nodeOrigin:c,onNodeDrag:d,onSelectionDrag:f,onError:h,updateNodePositions:g}=t();i={x:e,y:n};let v=!1,x=s.size>1,y=x&&a?ng(ni(s)):null,w=x&&u?function({dragItems:e,snapGrid:t,x:n,y:r}){let o=e.values().next().value;if(!o)return null;let i={x:n-o.distance.x,y:r-o.distance.y},a=nE(i,t);return{x:a.x-i.x,y:a.y-i.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(let[t,r]of s){if(!o.has(t))continue;let i={x:e-r.distance.x,y:n-r.distance.y};u&&(i=w?{x:Math.round(i.x+w.x),y:Math.round(i.y+w.y)}:nE(i,l));let s=null;if(x&&a&&!r.extent&&y){let{positionAbsolute:e}=r.internals,t=e.x-y.x+a[0][0],n=e.x+r.measured.width-y.x2+a[1][0];s=[[t,e.y-y.y+a[0][1]],[n,e.y+r.measured.height-y.y2+a[1][1]]]}let{position:d,positionAbsolute:f}=nl({nodeId:t,nextPosition:i,nodeLookup:o,nodeExtent:s||a,nodeOrigin:c,onError:h});v=v||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=f}if(p=p||v,v&&(g(s,!0),m&&(r||d||!b&&f))){let[e,t]=rs({nodeId:b,dragItems:s,nodeLookup:o});r?.(m,s,e,t),d?.(m,e,t),b||f?.(m,t)}}async function j(){if(!c)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o){l=!1,cancelAnimationFrame(a);return}let[s,d]=np(u,c,r);(0!==s||0!==d)&&(i.x=(i.x??0)-s/e[2],i.y=(i.y??0)-d/e[2],await n({x:s,y:d})&&k(i)),a=requestAnimationFrame(j)}function _(r){let{nodeLookup:o,multiSelectionActive:a,nodesDraggable:l,transform:u,snapGrid:f,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:v}=t();d=!0,p&&y||a||!b||o.get(b)?.selected||v(),y&&p&&b&&e?.(b);let x=nT(r.sourceEvent,{transform:u,snapGrid:f,snapToGrid:h,containerBounds:c});if(i=x,(s=function(e,t,n,r){let o=new Map;for(let[i,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(a,e))&&(a.draggable||t&&void 0===a.draggable)){let t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,x,b)).size>0&&(n||m||!b&&g)){let[e,t]=rs({nodeId:b,dragItems:s,nodeLookup:o});n?.(r.sourceEvent,s,e,t),m?.(r.sourceEvent,e,t),b||g?.(r.sourceEvent,t)}}f=ef(x);let E=eN().clickDistance(w).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:a,snapToGrid:s}=t();c=n?.getBoundingClientRect()||null,h=!1,p=!1,m=e.sourceEvent,0===r&&_(e),i=nT(e.sourceEvent,{transform:o,snapGrid:a,snapToGrid:s,containerBounds:c}),u=nq(e.sourceEvent,c)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:a,nodeDragThreshold:f,nodeLookup:p}=t(),g=nT(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:a,containerBounds:c});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!p.has(b))&&(h=!0),!h){if(!l&&n&&d&&(l=!0,j()),!d){let t=nq(e.sourceEvent,c),n=t.x-u.x,r=t.y-u.y;Math.sqrt(n*n+r*r)>f&&_(e)}(i.x!==g.xSnapped||i.y!==g.ySnapped)&&s&&d&&(u=nq(e.sourceEvent,c),k(g))}}).on("end",e=>{if(d&&!h&&(l=!1,d=!1,cancelAnimationFrame(a),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:a}=t();if(p&&(r(s,!1),p=!1),o||i||!b&&a){let[t,r]=rs({nodeId:b,dragItems:s,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,s,t,r),i?.(e.sourceEvent,t,r),b||a?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!g||!ra(t,`.${g}`,x))&&(!v||ra(t,v,x))});f.call(E)},destroy:function(){f?.on(".drag",null)}}}({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{oN({id:t,store:s,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,y.useEffect)(()=>{if(t)c.current?.destroy();else if(e.current)return c.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:a}),()=>{c.current?.destroy()}},[n,r,t,i,e,o]),l}function oC(){let e=r$();return(0,y.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:u}=e.getState(),c=new Map,d=e=>e.selected&&(e.draggable||i&&void 0===e.draggable),f=r?o[0]:5,h=r?o[1]:5,p=t.direction.x*f*t.factor,m=t.direction.y*h*t.factor;for(let[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};r&&(t=nE(t,o));let{position:i,positionAbsolute:s}=nl({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:u,onError:a});e.position=i,e.internals.positionAbsolute=s,c.set(e.id,e)}s(c)},[])}let oM=(0,y.createContext)(null),oO=oM.Provider;oM.Consumer;let oA=()=>(0,y.useContext)(oM),oP=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),oL=(0,y.memo)(ou(function({type:e="source",position:t=m.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:l,className:u,onMouseDown:d,onTouchStart:f,...h},p){let g=a||null,v="target"===e,y=r$(),w=oA(),{connectOnClick:k,noPanClassName:j,rfId:_}=rz(oP,rR),{connectingFrom:E,connectingTo:N,clickConnecting:S,isPossibleEndHandle:C,connectionInProcess:M,clickConnectionInProcess:O,valid:A}=rz(t=>{let{connectionClickStartHandle:n,connectionMode:r,connection:o}=t,{fromHandle:i,toHandle:a,isValid:s}=o,l=a?.nodeId===w&&a?.id===g&&a?.type===e;return{connectingFrom:i?.nodeId===w&&i?.id===g&&i?.type===e,connectingTo:l,clickConnecting:n?.nodeId===w&&n?.id===g&&n?.type===e,isPossibleEndHandle:r===c.Strict?i?.type!==e:w!==i?.nodeId||g!==i?.id,connectionInProcess:!!i,clickConnectionInProcess:!!n,valid:l&&s}},rR);w||y.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let P=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=y.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=y.getState();t(((e,t,n={})=>{let r,o;if(!e.source||!e.target)return n_("006","Can't create edge. An edge needs a source and a target."),t;let i=n.getEdgeId||nK;return(o=r=nn(e)?{...e}:{...e,id:i(e)},t.some(e=>e.source===o.source&&e.target===o.target&&(e.sourceHandle===o.sourceHandle||!e.sourceHandle&&!o.sourceHandle)&&(e.targetHandle===o.targetHandle||!e.targetHandle&&!o.targetHandle)))?t:(null===r.sourceHandle&&delete r.sourceHandle,null===r.targetHandle&&delete r.targetHandle,t.concat(r))})(o,e))}n?.(o),s?.(o)},L=e=>{if(!w)return;let t="clientX"in e.nativeEvent;if(o&&(t&&0===e.button||!t)){let t=y.getState();rf(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:v,handleId:g,nodeId:w,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:P,isValidConnection:n||t.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?d?.(e):f?.(e)};return(0,x.jsx)("div",{"data-handleid":g,"data-nodeid":w,"data-handlepos":t,"data-id":`${_}-${w}-${g}-${e}`,className:b(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,u,{source:!v,target:v,connectable:r,connectablestart:o,connectableend:i,clickconnecting:S,connectingfrom:E,connectingto:N,valid:A,connectionindicator:r&&(!M||C)&&(M||O?i:o)}]),onMouseDown:L,onTouchStart:L,onClick:k?t=>{let{onClickConnectStart:r,onClickConnectEnd:i,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:u,rfId:c,nodeLookup:d,connection:f}=y.getState();if(!w||!a&&!o)return;if(!a){r?.(t.nativeEvent,{nodeId:w,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:w,type:e,id:g}});return}let h=nz(t.target),p=n||l,{connection:m,isValid:v}=rd(t.nativeEvent,{handle:{nodeId:w,id:g,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:p,flowId:c,doc:h,lib:u,nodeLookup:d});v&&m&&P(m);let x=structuredClone(f);delete x.inProgress,x.toPosition=x.toHandle?x.toHandle.position:null,i?.(t,x),y.setState({connectionClickStartHandle:null})}:void 0,ref:p,...h,children:l})})),oR={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},oI={input:function({data:e,isConnectable:t,sourcePosition:n=m.Bottom}){return(0,x.jsxs)(x.Fragment,{children:[e?.label,(0,x.jsx)(oL,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=m.Top,sourcePosition:r=m.Bottom}){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(oL,{type:"target",position:n,isConnectable:t}),e?.label,(0,x.jsx)(oL,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=m.Top}){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(oL,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},oT=e=>{let{width:t,height:n,x:r,y:o}=ni(e.nodeLookup,{filter:e=>!!e.selected});return{width:nj(t)?t:null,height:nj(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function oD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=r$(),{width:o,height:i,transformString:a,userSelectionActive:s}=rz(oT,rR),l=oC(),u=(0,y.useRef)(null);if((0,y.useEffect)(()=>{n||u.current?.focus({preventScroll:!0})},[n]),oS({nodeRef:u}),s||!o||!i)return null;let c=e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0;return(0,x.jsx)("div",{className:b(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:(0,x.jsx)("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(oR,e.key)&&(e.preventDefault(),l({direction:oR[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:i}})})}let oz="undefined"!=typeof window?window:void 0,o$=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function oB({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:k,panOnScrollSpeed:j,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:S,translateExtent:C,minZoom:M,maxZoom:O,preventScrolling:A,onSelectionContextMenu:P,noWheelClassName:L,noPanClassName:R,disableKeyboardA11y:I,onViewportChange:T,isControlledViewport:D}){let{nodesSelectionActive:z,userSelectionActive:$}=rz(o$,rR),B=oe(u,{target:oz}),q=oe(m,{target:oz}),H=q||N,F=q||k,V=c&&!0!==H,U=B||$||V;return!function({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=r$(),{deleteElements:r}=om(),o=oe(e,{actInsideInputWithModifier:!1}),i=oe(t,{target:ov});(0,y.useEffect)(()=>{if(o){let{edges:e,nodes:t}=n.getState();r({nodes:t.filter(og),edges:e.filter(og)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,y.useEffect)(()=>{n.setState({multiSelectionActive:i})},[i])}({deleteKeyCode:l,multiSelectionKeyCode:p}),(0,x.jsx)(ob,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:F,panOnScrollSpeed:j,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:!B&&H,defaultViewport:S,translateExtent:C,minZoom:M,maxZoom:O,zoomActivationKeyCode:g,preventScrolling:A,noWheelClassName:L,noPanClassName:R,onViewportChange:T,isControlledViewport:D,paneClickDistance:s,selectionOnDrag:V,children:(0,x.jsxs)(oE,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:H,isSelecting:!!U,selectionMode:d,selectionKeyPressed:B,paneClickDistance:s,selectionOnDrag:V,children:[e,z&&(0,x.jsx)(oD,{onSelectionContextMenu:P,noPanClassName:R,disableKeyboardA11y:I})]})})}oB.displayName="FlowRenderer";let oq=(0,y.memo)(oB),oH=e=>e.updateNodeInternals;var oF=(0,y.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:m,nodeTypes:g,nodeClickDistance:v,onError:w}){let k,{node:j,internals:_,isParent:E}=rz(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},rR),N=j.type||"default",S=g?.[N]||oI[N];void 0===S&&(w?.("003",(k=N,`Node type "${k}" not found. Using fallback type "default".`)),N="default",S=g?.default||oI.default);let C=!!(j.draggable||s&&void 0===j.draggable),M=!!(j.selectable||l&&void 0===j.selectable),O=!!(j.connectable||u&&void 0===j.connectable),A=!!(j.focusable||c&&void 0===j.focusable),P=r$(),L=nL(j),R=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){let o=r$(),i=(0,y.useRef)(null),a=(0,y.useRef)(null),s=(0,y.useRef)(e.sourcePosition),l=(0,y.useRef)(e.targetPosition),u=(0,y.useRef)(t),c=n&&!!e.internals.handleBounds;return(0,y.useEffect)(()=>{!i.current||e.hidden||c&&a.current===i.current||(a.current&&r?.unobserve(a.current),r?.observe(i.current),a.current=i.current)},[c,e.hidden]),(0,y.useEffect)(()=>()=>{a.current&&(r?.unobserve(a.current),a.current=null)},[]),(0,y.useEffect)(()=>{if(i.current){let n=u.current!==t,r=s.current!==e.sourcePosition,a=l.current!==e.targetPosition;(n||r||a)&&(u.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:j,nodeType:N,hasDimensions:L,resizeObserver:d}),I=oS({nodeRef:R,disabled:j.hidden||!C,noDragClassName:f,handleSelector:j.dragHandle,nodeId:e,isSelectable:M,nodeClickDistance:v}),T=oC();if(j.hidden)return null;let D=nP(j),z=void 0===j.internals.handleBounds?{width:j.width??j.initialWidth??j.style?.width,height:j.height??j.initialHeight??j.style?.height}:{width:j.width??j.style?.width,height:j.height??j.style?.height},$=M||C||t||n||r||o,B=n?e=>n(e,{..._.userNode}):void 0,q=r?e=>r(e,{..._.userNode}):void 0,H=o?e=>o(e,{..._.userNode}):void 0,F=i?e=>i(e,{..._.userNode}):void 0,V=a?e=>a(e,{..._.userNode}):void 0;return(0,x.jsx)("div",{className:b(["react-flow__node",`react-flow__node-${N}`,{[h]:C},j.className,{selected:j.selected,selectable:M,parent:E,draggable:C,dragging:I}]),ref:R,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:L?"visible":"hidden",...j.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:q,onMouseLeave:H,onContextMenu:F,onClick:n=>{let{selectNodesOnDrag:r,nodeDragThreshold:o}=P.getState();M&&(!r||!C||o>0)&&oN({id:e,store:P,nodeRef:R}),t&&t(n,{..._.userNode})},onDoubleClick:V,onKeyDown:A?t=>{if(!nB(t.nativeEvent)&&!p){if(t8.includes(t.key)&&M)oN({id:e,store:P,unselect:"Escape"===t.key,nodeRef:R});else if(C&&j.selected&&Object.prototype.hasOwnProperty.call(oR,t.key)){t.preventDefault();let{ariaLabelConfig:e}=P.getState();P.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),T({direction:oR[t.key],factor:t.shiftKey?4:1})}}}:void 0,tabIndex:A?0:void 0,onFocus:A?()=>{if(p||!R.current?.matches(":focus-visible"))return;let{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:i}=P.getState();!o||na(new Map([[e,j]]),{x:0,y:0,width:n,height:r},t,!0).length>0||i(j.position.x+D.width/2,j.position.y+D.height/2,{zoom:t[2]})}:void 0,role:j.ariaRole??(A?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${rH}-${m}`,"aria-label":j.ariaLabel,...j.domAttributes,children:(0,x.jsx)(oO,{value:e,children:(0,x.jsx)(S,{id:e,data:j.data,type:N,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:j.selected??!1,selectable:M,draggable:C,deletable:j.deletable??!0,isConnectable:O,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:I,dragHandle:j.dragHandle,zIndex:_.z,parentId:j.parentId,...D})})})});let oV=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function oU(e){var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,onError:a}=rz(oV,rR),s=(t=e.onlyRenderVisibleElements,rz((0,y.useCallback)(e=>t?na(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(e=>e.id):Array.from(e.nodeLookup.keys()),[t]),rR)),l=function(){let e=rz(oH),[t]=(0,y.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,y.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,x.jsx)("div",{className:"react-flow__nodes",style:ox,children:s.map(t=>(0,x.jsx)(oF,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},t))})}oU.displayName="NodeRenderer";let oX=(0,y.memo)(oU),oQ={[p.Arrow]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e}};return(0,x.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[p.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,x.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},oK=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{let l,u=(l=r$(),(0,y.useMemo)(()=>{let e;return Object.prototype.hasOwnProperty.call(oQ,t)?oQ[t]:(l.getState().onError?.("009",(e=t,`Marker type "${e}" doesn't exist.`)),null)},[t]));return u?(0,x.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:(0,x.jsx)(u,{color:n,strokeWidth:a})}):null},oY=({defaultColor:e,rfId:t})=>{let n=rz(e=>e.edges),r=rz(e=>e.defaultEdgeOptions),o=(0,y.useMemo)(()=>(function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let i=new Set;return e.reduce((e,a)=>([a.markerStart||r,a.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=n3(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?(0,x.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,x.jsx)("defs",{children:o.map(e=>(0,x.jsx)(oK,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};oY.displayName="MarkerDefinitions";var oW=(0,y.memo)(oY);function oG({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:u,...c}){let[d,f]=(0,y.useState)({x:1,y:0,width:0,height:0}),h=b(["react-flow__edge-textwrapper",u]),p=(0,y.useRef)(null);return((0,y.useEffect)(()=>{if(p.current){let e=p.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n)?(0,x.jsxs)("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[o&&(0,x.jsx)("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),(0,x.jsx)("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:p,style:r,children:n}),l]}):null}oG.displayName="EdgeText";let oZ=(0,y.memo)(oG);function oJ({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("path",{...c,d:e,fill:"none",className:b(["react-flow__edge-path",c.className])}),u?(0,x.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&nj(t)&&nj(n)?(0,x.jsx)(oZ,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function o0({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===m.Left||e===m.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function o1({sourceX:e,sourceY:t,sourcePosition:n=m.Bottom,targetX:r,targetY:o,targetPosition:i=m.Top}){let[a,s]=o0({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,u]=o0({pos:i,x1:r,y1:o,x2:e,y2:t}),[c,d,f,h]=nF({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${s} ${l},${u} ${r},${o}`,c,d,f,h]}function o2(e){return(0,y.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a,targetPosition:s,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})=>{let[y,b,w]=o1({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s}),k=e.isInternal?void 0:t;return(0,x.jsx)(oJ,{id:k,path:y,labelX:b,labelY:w,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:g,interactionWidth:v})})}let o5=o2({isInternal:!1}),o3=o2({isInternal:!0});function o4(e){return(0,y.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,sourcePosition:h=m.Bottom,targetPosition:p=m.Top,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:b})=>{let[w,k,j]=nJ({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:i,targetPosition:p,borderRadius:y?.borderRadius,offset:y?.offset,stepPosition:y?.stepPosition}),_=e.isInternal?void 0:t;return(0,x.jsx)(oJ,{id:_,path:w,labelX:k,labelY:j,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:g,markerStart:v,interactionWidth:b})})}o5.displayName="SimpleBezierEdge",o3.displayName="SimpleBezierEdgeInternal";let o6=o4({isInternal:!1}),o8=o4({isInternal:!0});function o7(e){return(0,y.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,x.jsx)(o6,{...n,id:r,pathOptions:(0,y.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}o6.displayName="SmoothStepEdge",o8.displayName="SmoothStepEdgeInternal";let o9=o7({isInternal:!1}),ie=o7({isInternal:!0});function it(e){return(0,y.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})=>{let[g,v,y]=nY({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return(0,x.jsx)(oJ,{id:b,path:g,labelX:v,labelY:y,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:m})})}o9.displayName="StepEdge",ie.displayName="StepEdgeInternal";let ir=it({isInternal:!1}),io=it({isInternal:!0});function ii(e){return(0,y.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a=m.Bottom,targetPosition:s=m.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:b})=>{let[w,k,j]=nX({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s,curvature:y?.curvature}),_=e.isInternal?void 0:t;return(0,x.jsx)(oJ,{id:_,path:w,labelX:k,labelY:j,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:v,interactionWidth:b})})}ir.displayName="StraightEdge",io.displayName="StraightEdgeInternal";let ia=ii({isInternal:!1}),is=ii({isInternal:!0});ia.displayName="BezierEdge",is.displayName="BezierEdgeInternal";let il={default:is,straight:io,step:ie,smoothstep:o8,simplebezier:o3},iu={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ic="react-flow__edgeupdater";function id({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:a,type:s}){return(0,x.jsx)("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:a,className:b([ic,`${ic}-${s}`]),cx:e===m.Left?t-r:e===m.Right?t+r:t,cy:e===m.Top?n-r:e===m.Bottom?n+r:n,r:r,stroke:"transparent",fill:"transparent"})}function ih({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){let p=r$(),m=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:r,domNode:o,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:h,onConnectEnd:m,cancelConnection:g,nodeLookup:v,rfId:x,panBy:y,updateConnection:b}=p.getState(),w="target"===t.type;rf(e.nativeEvent,{autoPanOnConnect:r,connectionMode:a,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:x,cancelConnection:g,panBy:y,isValidConnection:i,onConnect:e=>u?.(n,e),onConnectStart:(r,o)=>{f(!0),c?.(e,n,t.type),h?.(r,o)},onConnectEnd:m,onReconnectEnd:(e,r)=>{f(!1),d?.(e,n,t.type,r)},updateConnection:b,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},g=()=>h(!0),v=()=>h(!1);return(0,x.jsxs)(x.Fragment,{children:[(!0===e||"source"===e)&&(0,x.jsx)(id,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:g,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,x.jsx)(id,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:g,onMouseOut:v,type:"target"})]})}var ip=(0,y.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:g,edgeTypes:v,noPanClassName:w,onError:k,disableKeyboardA11y:j}){let _,E=rz(t=>t.edgeLookup.get(e)),N=rz(e=>e.defaultEdgeOptions),S=(E=N?{...N,...E}:E).type||"default",C=v?.[S]||il[S];void 0===C&&(k?.("011",(_=S,`Edge type "${_}" not found. Using fallback type "default".`)),S="default",C=v?.default||il.default);let M=!!(E.focusable||t&&void 0===E.focusable),O=void 0!==f&&(E.reconnectable||n&&void 0===E.reconnectable),A=!!(E.selectable||r&&void 0===E.selectable),P=(0,y.useRef)(null),[L,R]=(0,y.useState)(!1),[I,T]=(0,y.useState)(!1),D=r$(),{zIndex:z,sourceX:$,sourceY:B,targetX:q,targetY:H,sourcePosition:F,targetPosition:V}=rz((0,y.useCallback)(t=>{let n=t.nodeLookup.get(E.source),r=t.nodeLookup.get(E.target);if(!n||!r)return{zIndex:E.zIndex,...iu};let o=function(e){let{sourceNode:t,targetNode:n}=e;if(!n0(t)||!n0(n))return null;let r=t.internals.handleBounds||n1(t.handles),o=n.internals.handleBounds||n1(n.handles),i=n5(r?.source??[],e.sourceHandle),a=n5(e.connectionMode===c.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!a)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`)(!i?"source":"target",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let s=i?.position||m.Bottom,l=a?.position||m.Top,u=n2(t,i,s),d=n2(n,a,l);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:t.connectionMode,onError:k});return{zIndex:function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:i="basic"}){if("manual"===i)return r;let a=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return(o&&n?r+1e3:r)+a}({selected:E.selected,zIndex:E.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode}),...o||iu}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),rR),U=(0,y.useMemo)(()=>E.markerStart?`url('#${n3(E.markerStart,g)}')`:void 0,[E.markerStart,g]),X=(0,y.useMemo)(()=>E.markerEnd?`url('#${n3(E.markerEnd,g)}')`:void 0,[E.markerEnd,g]);if(E.hidden||null===$||null===B||null===q||null===H)return null;let Q=i?e=>{i(e,{...E})}:void 0,K=a?e=>{a(e,{...E})}:void 0,Y=s?e=>{s(e,{...E})}:void 0,W=l?e=>{l(e,{...E})}:void 0,G=u?e=>{u(e,{...E})}:void 0;return(0,x.jsx)("svg",{style:{zIndex:z},children:(0,x.jsxs)("g",{className:b(["react-flow__edge",`react-flow__edge-${S}`,E.className,w,{selected:E.selected,animated:E.animated,inactive:!A&&!o,updating:L,selectable:A}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:i}=D.getState();A&&(D.setState({nodesSelectionActive:!1}),E.selected&&i?(r({nodes:[],edges:[E]}),P.current?.blur()):n([e])),o&&o(t,E)},onDoubleClick:Q,onContextMenu:K,onMouseEnter:Y,onMouseMove:W,onMouseLeave:G,onKeyDown:M?t=>{if(!j&&t8.includes(t.key)&&A){let{unselectNodesAndEdges:n,addSelectedEdges:r}=D.getState();"Escape"===t.key?(P.current?.blur(),n({edges:[E]})):r([e])}}:void 0,tabIndex:M?0:void 0,role:E.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===E.ariaLabel?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":M?`${rF}-${g}`:void 0,ref:P,...E.domAttributes,children:[!I&&(0,x.jsx)(C,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:A,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:$,sourceY:B,targetX:q,targetY:H,sourcePosition:F,targetPosition:V,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:U,markerEnd:X,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),O&&(0,x.jsx)(ih,{edge:E,isReconnectable:O,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:$,sourceY:B,targetX:q,targetY:H,sourcePosition:F,targetPosition:V,setUpdateHover:R,setReconnecting:T})]})})});let im=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ig({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:m}){let{edgesFocusable:g,edgesReconnectable:v,elementsSelectable:b,onError:w}=rz(im,rR),k=rz((0,y.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let r=e.nodeLookup.get(t.source),o=e.nodeLookup.get(t.target);r&&o&&function({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let i=nm(ny(e),ny(t));return i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1),nw({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},nv(i))>0}({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),rR);return(0,x.jsxs)("div",{className:"react-flow__edges",children:[(0,x.jsx)(oW,{defaultColor:e,rfId:n}),k.map(e=>(0,x.jsx)(ip,{id:e,edgesFocusable:g,edgesReconnectable:v,elementsSelectable:b,noPanClassName:o,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:m},e))]})}ig.displayName="EdgeRenderer";let iv=(0,y.memo)(ig),ix=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function iy({children:e}){let t=rz(ix);return(0,x.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let ib=e=>e.panZoom?.syncViewport;function iw(e){return e.connection.inProgress?{...e.connection,to:nN(e.connection.to,e.transform)}:{...e.connection}}let ik=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ij({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:o,width:i,height:a,isValid:s,inProgress:l}=rz(ik,rR);return i&&o&&l?(0,x.jsx)("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:(0,x.jsx)("g",{className:b(["react-flow__connection",nt(s)]),children:(0,x.jsx)(i_,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}let i_=({style:e,type:t=h.Bezier,CustomComponent:n,isValid:r})=>{let{inProgress:o,from:i,fromNode:a,fromHandle:s,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:f,pointer:p}=rz(iw,rR);if(!o)return;if(n)return(0,x.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:f,connectionStatus:nt(r),toNode:c,toHandle:d,pointer:p});let m="",g={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case h.Bezier:[m]=nX(g);break;case h.SimpleBezier:[m]=o1(g);break;case h.Step:[m]=nJ({...g,borderRadius:0});break;case h.SmoothStep:[m]=nJ(g);break;default:[m]=nY(g)}return(0,x.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};i_.displayName="ConnectionLine";let iE={};function iN(e=iE){(0,y.useRef)(e),r$(),(0,y.useEffect)(()=>{},[e])}function iS({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:g,connectionLineContainerStyle:v,selectionKeyCode:b,selectionOnDrag:w,selectionMode:k,multiSelectionKeyCode:j,panActivationKeyCode:_,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:S,elementsSelectable:C,defaultViewport:M,translateExtent:O,minZoom:A,maxZoom:P,preventScrolling:L,defaultMarkerColor:R,zoomOnScroll:I,zoomOnPinch:T,panOnScroll:D,panOnScrollSpeed:z,panOnScrollMode:$,zoomOnDoubleClick:B,panOnDrag:q,onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:V,onPaneMouseLeave:U,onPaneScroll:X,onPaneContextMenu:Q,paneClickDistance:K,nodeClickDistance:Y,onEdgeContextMenu:W,onEdgeMouseEnter:G,onEdgeMouseMove:Z,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,noDragClassName:eo,noWheelClassName:ei,noPanClassName:ea,disableKeyboardA11y:es,nodeExtent:el,rfId:eu,viewport:ec,onViewportChange:ed}){let ef,eh,ep,em;return iN(e),iN(t),r$(),(0,y.useRef)(!1),(0,y.useEffect)(()=>{},[]),ef=om(),eh=(0,y.useRef)(!1),(0,y.useEffect)(()=>{!eh.current&&ef.viewportInitialized&&n&&(setTimeout(()=>n(ef),1),eh.current=!0)},[n,ef.viewportInitialized]),ep=rz(ib),em=r$(),(0,y.useEffect)(()=>{ec&&(ep?.(ec),em.setState({transform:[ec.x,ec.y,ec.zoom]}))},[ec,ep]),(0,x.jsx)(oq,{onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:V,onPaneMouseLeave:U,onPaneContextMenu:Q,onPaneScroll:X,paneClickDistance:K,deleteKeyCode:N,selectionKeyCode:b,selectionOnDrag:w,selectionMode:k,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:j,panActivationKeyCode:_,zoomActivationKeyCode:E,elementsSelectable:C,zoomOnScroll:I,zoomOnPinch:T,zoomOnDoubleClick:B,panOnScroll:D,panOnScrollSpeed:z,panOnScrollMode:$,panOnDrag:q,defaultViewport:M,translateExtent:O,minZoom:A,maxZoom:P,onSelectionContextMenu:d,preventScrolling:L,noDragClassName:eo,noWheelClassName:ei,noPanClassName:ea,disableKeyboardA11y:es,onViewportChange:ed,isControlledViewport:!!ec,children:(0,x.jsxs)(iy,{children:[(0,x.jsx)(iv,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:a,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,onlyRenderVisibleElements:S,onEdgeContextMenu:W,onEdgeMouseEnter:G,onEdgeMouseMove:Z,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:R,noPanClassName:ea,disableKeyboardA11y:es,rfId:eu}),(0,x.jsx)(ij,{style:m,type:p,component:g,containerStyle:v}),(0,x.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,x.jsx)(oX,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:Y,onlyRenderVisibleElements:S,noPanClassName:ea,noDragClassName:eo,disableKeyboardA11y:es,nodeExtent:el,rfId:eu}),(0,x.jsx)("div",{className:"react-flow__viewport-portal"})]})})}iS.displayName="GraphView";let iC=(0,y.memo)(iS),iM=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:u=2,nodeOrigin:d,nodeExtent:f,zIndexMode:h="basic"}={})=>{let p=new Map,m=new Map,g=new Map,v=new Map,x=r??t??[],y=n??e??[],b=d??[0,0],w=f??t6;ri(g,v,x);let k=n9(y,p,m,{nodeOrigin:b,nodeExtent:w,zIndexMode:h}),j=[0,0,1];if(a&&o&&i){let{x:e,y:t,zoom:n}=nM(ni(p,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),o,i,l,u,s?.padding??.1);j=[e,t,n]}return{rfId:"1",width:o??0,height:i??0,transform:j,nodes:y,nodesInitialized:k,nodeLookup:p,parentLookup:m,edges:x,edgeLookup:v,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:u,translateExtent:t6,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:c.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...t9},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:n_,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:t7,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}};function iO({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:a,initialMaxZoom:s,initialFitViewOptions:l,fitView:u,nodeOrigin:c,nodeExtent:d,zIndexMode:f,children:h}){let[p]=(0,y.useState)(()=>(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,zIndexMode:f})=>{let h,p;return h=(h,p)=>{async function g(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:i,minZoom:a,maxZoom:s}=p();t&&(await ns({nodes:e,width:o,height:i,panZoom:t,minZoom:a,maxZoom:s},n),r?.resolve(!0),h({fitViewResolver:null}))}return{...iM({nodes:e,edges:t,width:o,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:u,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:i,zIndexMode:a}=p(),s=n9(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:o,checkEquality:!0,zIndexMode:a});i&&s?(g(),h({nodes:e,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:e,nodesInitialized:s})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=p();ri(t,n,e),h({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=p();t(e),h({hasDefaultNodes:!0})}if(t){let{setEdges:e}=p();e(t),h({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:i,nodeExtent:a,debug:s,fitViewQueued:l,zIndexMode:u}=p(),{changes:c,updatedInternals:d}=function(e,t,n,r,o,i,a){let s=r?.querySelector(".xyflow__viewport"),l=!1;if(!s)return{changes:[],updatedInternals:l};let u=[],c=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(c.transform),f=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let s=nD(r.nodeElement),c=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(c||!e.internals.handleBounds||r.force)){let h=r.nodeElement.getBoundingClientRect(),p=nA(e.extent)?e.extent:i,{positionAbsolute:m}=e.internals;e.parentId&&"parent"===e.extent?m=nf(m,s,t.get(e.parentId)):p&&(m=nd(m,p,s));let g={...e,measured:s,internals:{...e.internals,positionAbsolute:m,handleBounds:{source:nH("source",r.nodeElement,h,d,e.id),target:nH("target",r.nodeElement,h,d,e.id)}}};t.set(e.id,g),e.parentId&&re(g,t,n,{nodeOrigin:o,zIndexMode:a}),l=!0,c&&(u.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&f.push({id:e.id,parentId:e.parentId,rect:nx(g,o)}))}}if(f.length>0){let e=rn(f,t,n,o);u.push(...e)}return{changes:u,updatedInternals:l}}(e,n,r,o,i,a,u);d&&(!function(e,t,n){let r=n8(n4,n);for(let n of e.values())if(n.parentId)re(n,e,t,r);else{let e=nd(no(n,r.nodeOrigin),nA(n.extent)?n.extent:r.nodeExtent,nP(n));n.internals.positionAbsolute=e}}(n,r,{nodeOrigin:i,nodeExtent:a,zIndexMode:u}),l?(g(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),c?.length>0&&(s&&console.log("React Flow: trigger node changes",c),t?.(c)))},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:o,triggerNodeChanges:i,connection:a,updateConnection:s,onNodesChangeMiddlewareMap:l}=p();for(let[i,l]of e){let e=o.get(i),u=!!(e?.expandParent&&e?.parentId&&l?.position),c={id:i,type:"position",position:u?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:t};if(e&&a.inProgress&&a.fromNode.id===e.id){let t=n2(e,a.fromHandle,m.Left,!0);s({...a,from:t})}u&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:l.measured.width??0,height:l.measured.height??0}}),r.push(c)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=p(),i=rn(n,o,e,t);r.push(...i)}for(let e of l.values())r=e(r);i(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=p();e?.length&&(o&&n(or(e,r)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=p();e?.length&&(o&&n(or(e,r)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();t?o(e.map(e=>oo(e,!0))):(o(oi(r,new Set([...e]),!0)),i(oi(n)))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();t?i(e.map(e=>oo(e,!0))):(i(oi(n,new Set([...e]))),o(oi(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:a}=p(),s=(e||r).map(e=>{let t=o.get(e.id);return t&&(t.selected=!1),oo(e.id,!1)}),l=(t||n).map(e=>oo(e.id,!1));i(s),a(l)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=p();t?.setScaleExtent([e,n]),h({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=p();t?.setScaleExtent([n,e]),h({maxZoom:e})},setTranslateExtent:e=>{p().panZoom?.setTranslateExtent(e),h({translateExtent:e})},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=p();if(!o)return;let i=t.reduce((e,t)=>t.selected?[...e,oo(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,oo(t.id,!1)]:e,[]);n(i),r(a)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,nodeExtent:a,zIndexMode:s}=p();(e[0][0]!==a[0][0]||e[0][1]!==a[0][1]||e[1][0]!==a[1][0]||e[1][1]!==a[1][1])&&(n9(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1,zIndexMode:s}),h({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=p();return rr({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},setCenter:async(e,t,n)=>{let{width:r,height:o,maxZoom:i,panZoom:a}=p();if(!a)return Promise.resolve(!1);let s=void 0!==n?.zoom?n.zoom:i;return await a.setViewport({x:r/2-e*s,y:o/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...t9}})},updateConnection:e=>{h({connection:e})},reset:()=>h({...iM()})}},p=Object.is,h?rL(h,p):rL})({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:u,minZoom:a,maxZoom:s,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:f}));return(0,x.jsx)(rT,{value:p,children:(0,x.jsx)(oh,{children:h})})}function iA({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:s,fitViewOptions:l,minZoom:u,maxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h}){return(0,y.useContext)(rI)?(0,x.jsx)(x.Fragment,{children:e}):(0,x.jsx)(iO,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:a,fitView:s,initialFitViewOptions:l,initialMinZoom:u,initialMaxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h,children:e})}let iP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var iL=ou(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:w,onClickConnectStart:k,onClickConnectEnd:j,onNodeMouseEnter:_,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:C,onNodeDragStart:M,onNodeDrag:O,onNodeDragStop:A,onNodesDelete:P,onEdgesDelete:L,onDelete:R,onSelectionChange:I,onSelectionDragStart:T,onSelectionDrag:D,onSelectionDragStop:z,onSelectionContextMenu:$,onSelectionStart:B,onSelectionEnd:q,onBeforeDelete:H,connectionMode:F,connectionLineType:V=h.Bezier,connectionLineStyle:U,connectionLineComponent:X,connectionLineContainerStyle:Q,deleteKeyCode:K="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:W=!1,selectionMode:G=f.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:J=nO()?"Meta":"Control",zoomActivationKeyCode:ee=nO()?"Meta":"Control",snapToGrid:et,snapGrid:en,onlyRenderVisibleElements:er=!1,selectNodesOnDrag:eo,nodesDraggable:ei,autoPanOnNodeFocus:ea,nodesConnectable:es,nodesFocusable:el,nodeOrigin:eu=r2,edgesFocusable:ec,edgesReconnectable:ed,elementsSelectable:ef=!0,defaultViewport:eh=r5,minZoom:ep=.5,maxZoom:em=2,translateExtent:eg=t6,preventScrolling:ev=!0,nodeExtent:ex,defaultMarkerColor:ey="#b1b1b7",zoomOnScroll:eb=!0,zoomOnPinch:ew=!0,panOnScroll:ek=!1,panOnScrollSpeed:ej=.5,panOnScrollMode:e_=d.Free,zoomOnDoubleClick:eE=!0,panOnDrag:eN=!0,onPaneClick:eS,onPaneMouseEnter:eC,onPaneMouseMove:eM,onPaneMouseLeave:eO,onPaneScroll:eA,onPaneContextMenu:eP,paneClickDistance:eL=1,nodeClickDistance:eR=0,children:eI,onReconnect:eT,onReconnectStart:eD,onReconnectEnd:ez,onEdgeContextMenu:e$,onEdgeDoubleClick:eB,onEdgeMouseEnter:eq,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,reconnectRadius:eV=10,onNodesChange:eU,onEdgesChange:eX,noDragClassName:eQ="nodrag",noWheelClassName:eK="nowheel",noPanClassName:eY="nopan",fitView:eW,fitViewOptions:eG,connectOnClick:eZ,attributionPosition:eJ,proOptions:e0,defaultEdgeOptions:e1,elevateNodesOnSelect:e2=!0,elevateEdgesOnSelect:e5=!1,disableKeyboardA11y:e3=!1,autoPanOnConnect:e4,autoPanOnNodeDrag:e6,autoPanSpeed:e8,connectionRadius:e7,isValidConnection:e9,onError:te,style:tt,id:tn,nodeDragThreshold:tr,connectionDragThreshold:to,viewport:ti,onViewportChange:ta,width:ts,height:tl,colorMode:tu="light",debug:tc,onScroll:td,ariaLabelConfig:tf,zIndexMode:th="basic",...tp},tm){let tg=tn||"1",tv=function(e){let[t,n]=(0,y.useState)("system"===e?null:e);return(0,y.useEffect)(()=>{if("system"!==e)return void n(e);let t=r7(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:r7()?.matches?"dark":"light"}(tu),tx=(0,y.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),td?.(e)},[td]);return(0,x.jsx)("div",{"data-testid":"rf__wrapper",...tp,onScroll:tx,style:{...tt,...iP},ref:tm,className:b(["react-flow",o,tv]),id:tn,role:"application",children:(0,x.jsxs)(iA,{nodes:e,edges:t,width:ts,height:tl,fitView:eW,fitViewOptions:eG,minZoom:ep,maxZoom:em,nodeOrigin:eu,nodeExtent:ex,zIndexMode:th,children:[(0,x.jsx)(iC,{onInit:u,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:a,connectionLineType:V,connectionLineStyle:U,connectionLineComponent:X,connectionLineContainerStyle:Q,selectionKeyCode:Y,selectionOnDrag:W,selectionMode:G,deleteKeyCode:K,multiSelectionKeyCode:J,panActivationKeyCode:Z,zoomActivationKeyCode:ee,onlyRenderVisibleElements:er,defaultViewport:eh,translateExtent:eg,minZoom:ep,maxZoom:em,preventScrolling:ev,zoomOnScroll:eb,zoomOnPinch:ew,zoomOnDoubleClick:eE,panOnScroll:ek,panOnScrollSpeed:ej,panOnScrollMode:e_,panOnDrag:eN,onPaneClick:eS,onPaneMouseEnter:eC,onPaneMouseMove:eM,onPaneMouseLeave:eO,onPaneScroll:eA,onPaneContextMenu:eP,paneClickDistance:eL,nodeClickDistance:eR,onSelectionContextMenu:$,onSelectionStart:B,onSelectionEnd:q,onReconnect:eT,onReconnectStart:eD,onReconnectEnd:ez,onEdgeContextMenu:e$,onEdgeDoubleClick:eB,onEdgeMouseEnter:eq,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,reconnectRadius:eV,defaultMarkerColor:ey,noDragClassName:eQ,noWheelClassName:eK,noPanClassName:eY,rfId:tg,disableKeyboardA11y:e3,nodeExtent:ex,viewport:ti,onViewportChange:ta}),(0,x.jsx)(r8,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:v,onConnectEnd:w,onClickConnectStart:k,onClickConnectEnd:j,nodesDraggable:ei,autoPanOnNodeFocus:ea,nodesConnectable:es,nodesFocusable:el,edgesFocusable:ec,edgesReconnectable:ed,elementsSelectable:ef,elevateNodesOnSelect:e2,elevateEdgesOnSelect:e5,minZoom:ep,maxZoom:em,nodeExtent:ex,onNodesChange:eU,onEdgesChange:eX,snapToGrid:et,snapGrid:en,connectionMode:F,translateExtent:eg,connectOnClick:eZ,defaultEdgeOptions:e1,fitView:eW,fitViewOptions:eG,onNodesDelete:P,onEdgesDelete:L,onDelete:R,onNodeDragStart:M,onNodeDrag:O,onNodeDragStop:A,onSelectionDrag:D,onSelectionDragStart:T,onSelectionDragStop:z,onMove:c,onMoveStart:p,onMoveEnd:m,noPanClassName:eY,nodeOrigin:eu,rfId:tg,autoPanOnConnect:e4,autoPanOnNodeDrag:e6,autoPanSpeed:e8,onError:te,connectionRadius:e7,isValidConnection:e9,selectNodesOnDrag:eo,nodeDragThreshold:tr,connectionDragThreshold:to,onBeforeDelete:H,debug:tc,ariaLabelConfig:tf,zIndexMode:th}),(0,x.jsx)(r1,{onSelectionChange:I}),eI,(0,x.jsx)(rY,{proOptions:e0,position:eJ}),(0,x.jsx)(rQ,{rfId:tg,disableKeyboardA11y:e3})]})})});function iR({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,x.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:b(["react-flow__background-pattern",n,r])})}function iI({radius:e,className:t}){return(0,x.jsx)("circle",{cx:e,cy:e,r:e,className:b(["react-flow__background-pattern","dots",t])})}(l=v||(v={})).Lines="lines",l.Dots="dots",l.Cross="cross";let iT={[v.Dots]:1,[v.Lines]:1,[v.Cross]:6},iD=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function iz({id:e,variant:t=v.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:a,bgColor:s,style:l,className:u,patternClassName:c}){let d=(0,y.useRef)(null),{transform:f,patternId:h}=rz(iD,rR),p=r||iT[t],m=t===v.Dots,g=t===v.Cross,w=Array.isArray(n)?n:[n,n],k=[w[0]*f[2]||1,w[1]*f[2]||1],j=p*f[2],_=Array.isArray(i)?i:[i,i],E=g?[j,j]:k,N=[_[0]*f[2]||1+E[0]/2,_[1]*f[2]||1+E[1]/2],S=`${h}${e||""}`;return(0,x.jsxs)("svg",{className:b(["react-flow__background",u]),style:{...l,...ox,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[(0,x.jsx)("pattern",{id:S,x:f[0]%k[0],y:f[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`,children:m?(0,x.jsx)(iI,{radius:j/2,className:c}):(0,x.jsx)(iR,{dimensions:E,lineWidth:o,variant:t,className:c})}),(0,x.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}iz.displayName="Background";let i$=(0,y.memo)(iz);function iB(){return(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,x.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function iq(){return(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,x.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function iH(){return(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,x.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function iF(){return(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,x.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iV(){return(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,x.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function iU({children:e,className:t,...n}){return(0,x.jsx)("button",{type:"button",className:b(["react-flow__controls-button",t]),...n,children:e})}let iX=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function iQ({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:f="vertical","aria-label":h}){let p=r$(),{isInteractive:m,minZoomReached:g,maxZoomReached:v,ariaLabelConfig:y}=rz(iX,rR),{zoomIn:w,zoomOut:k,fitView:j}=om();return(0,x.jsxs)(rK,{className:b(["react-flow__controls","horizontal"===f?"horizontal":"vertical",u]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??y["controls.ariaLabel"],children:[t&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(iU,{onClick:()=>{w(),i?.()},className:"react-flow__controls-zoomin",title:y["controls.zoomIn.ariaLabel"],"aria-label":y["controls.zoomIn.ariaLabel"],disabled:v,children:(0,x.jsx)(iB,{})}),(0,x.jsx)(iU,{onClick:()=>{k(),a?.()},className:"react-flow__controls-zoomout",title:y["controls.zoomOut.ariaLabel"],"aria-label":y["controls.zoomOut.ariaLabel"],disabled:g,children:(0,x.jsx)(iq,{})})]}),n&&(0,x.jsx)(iU,{className:"react-flow__controls-fitview",onClick:()=>{j(o),s?.()},title:y["controls.fitView.ariaLabel"],"aria-label":y["controls.fitView.ariaLabel"],children:(0,x.jsx)(iH,{})}),r&&(0,x.jsx)(iU,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)},title:y["controls.interactive.ariaLabel"],"aria-label":y["controls.interactive.ariaLabel"],children:m?(0,x.jsx)(iV,{}):(0,x.jsx)(iF,{})}),c]})}iQ.displayName="Controls";let iK=(0,y.memo)(iQ),iY=(0,y.memo)(function({id:e,x:t,y:n,width:r,height:o,style:i,color:a,strokeColor:s,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:f,onClick:h}){let{background:p,backgroundColor:m}=i||{};return(0,x.jsx)("rect",{className:b(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:c,ry:c,width:r,height:o,style:{fill:a||p||m,stroke:s,strokeWidth:l},shapeRendering:d,onClick:h?t=>h(t,e):void 0})}),iW=e=>e.nodes.map(e=>e.id),iG=e=>e instanceof Function?e:()=>e,iZ=(0,y.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:l}){let{node:u,x:c,y:d,width:f,height:h}=rz(t=>{let{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:a,height:s}=nP(r);return{node:r,x:o,y:i,width:a,height:s}},rR);return u&&!u.hidden&&nL(u)?(0,x.jsx)(s,{x:c,y:d,width:f,height:h,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:a,onClick:l,id:u.id}):null});var iJ=(0,y.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=iY,onClick:a}){let s=rz(iW,rR),l=iG(t),u=iG(e),c=iG(n),d="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,x.jsx)(x.Fragment,{children:s.map(e=>(0,x.jsx)(iZ,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:a,shapeRendering:d},e))})});let i0=e=>!e.hidden,i1=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nb(ni(e.nodeLookup,{filter:i0}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function i2({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:g=!1,ariaLabel:v,inversePan:w,zoomStep:k=1,offsetScale:j=5}){let _=r$(),E=(0,y.useRef)(null),{boundingRect:N,viewBB:S,rfId:C,panZoom:M,translateExtent:O,flowWidth:A,flowHeight:P,ariaLabelConfig:L}=rz(i1,rR),R=e?.width??200,I=e?.height??150,T=Math.max(N.width/R,N.height/I),D=T*R,z=T*I,$=j*T,B=N.x-(D-N.width)/2-$,q=N.y-(z-N.height)/2-$,H=D+2*$,F=z+2*$,V=`react-flow__minimap-desc-${C}`,U=(0,y.useRef)(0),X=(0,y.useRef)();U.current=T,(0,y.useEffect)(()=>{if(E.current&&M)return X.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let o=ef(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=1,pannable:l=!0,zoomable:u=!0,inversePan:c=!1}){let d=[0,0],f=t3().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{let s=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;let l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],u=[l[0]-d[0],l[1]-d[1]];d=l;let f=r()*Math.max(s[2],Math.log(s[2]))*(c?-1:1),h={x:s[0]-u[0]*f,y:s[1]-u[1]*f};t.setViewportConstrained({x:h.x,y:h.y,zoom:s[2]},[[0,0],[i,a]],e)}:null).on("zoom.wheel",u?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let r=n(),o=e.sourceEvent.ctrlKey&&nO()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=r[2]*Math.pow(2,i*o);t.scaleTo(a)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:eh}}({domNode:E.current,panZoom:M,getTransform:()=>_.getState().transform,getViewScale:()=>U.current}),()=>{X.current?.destroy()}},[M]),(0,y.useEffect)(()=>{X.current?.update({translateExtent:O,width:A,height:P,inversePan:w,pannable:m,zoomStep:k,zoomable:g})},[m,g,w,k,O,A,P]);let Q=h?e=>{let[t,n]=X.current?.pointer(e)||[0,0];h(e,{x:t,y:n})}:void 0,K=p?(0,y.useCallback)((e,t)=>{p(e,_.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,Y=v??L["minimap.ariaLabel"];return(0,x.jsx)(rK,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof d?d*T:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof a?a:void 0},className:b(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,x.jsxs)("svg",{width:R,height:I,viewBox:`${B} ${q} ${H} ${F}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":V,ref:E,onClick:Q,children:[Y&&(0,x.jsx)("title",{id:V,children:Y}),(0,x.jsx)(iJ,{onClick:K,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:a,nodeComponent:s}),(0,x.jsx)("path",{className:"react-flow__minimap-mask",d:`M${B-$},${q-$}h${H+2*$}v${F+2*$}h${-H-2*$}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}i2.displayName="MiniMap";let i5=(0,y.memo)(i2),i3={[g.Line]:"right",[g.Handle]:"bottom-right"};(0,y.memo)(function({nodeId:e,position:t,variant:n=g.Handle,className:r,style:o,children:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:f,autoScale:h=!0,shouldResize:p,onResizeStart:m,onResize:v,onResizeEnd:w}){let k,j=oA(),_="string"==typeof e?e:j,E=r$(),N=(0,y.useRef)(null),S=n===g.Handle,C=rz((0,y.useCallback)((k=S&&h,e=>k?`${Math.max(1/e.transform[2],1)}`:void 0),[S,h]),rR),M=(0,y.useRef)(null),O=t??i3[n];(0,y.useEffect)(()=>{if(N.current&&_)return M.current||(M.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){let i=ef(e),a={controlDirection:rb("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:s,keepAspectRatio:l,resizeDirection:u,onResizeStart:c,onResize:d,onResizeEnd:f,shouldResize:h}){let p,m,g,v,x={...r_},y={...rE};a={boundaries:s,resizeDirection:u,keepAspectRatio:l,controlDirection:rb(e)};let b=null,w=[],k=!1,j=eN().on("start",e=>{let{nodeLookup:r,transform:o,snapGrid:i,snapToGrid:a,nodeOrigin:s,paneDomNode:l}=n();if(!(p=r.get(t)))return;b=l?.getBoundingClientRect()??null;let{xSnapped:u,ySnapped:d}=nT(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:a,containerBounds:b});if(y={...x={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},pointerX:u,pointerY:d,aspectRatio:x.width/x.height},m=void 0,p.parentId&&("parent"===p.extent||p.expandParent)){var f;g=(m=r.get(p.parentId))&&"parent"===p.extent?[[0,0],[(f=m).measured.width,f.measured.height]]:void 0}for(let[e,n]of(w=[],v=void 0,r))if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){let e=function(e,t,n){let r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[r-s,o-l],[r+i-s,o+a-l]]}(n,p,n.origin??s);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}c?.(e,{...x})}).on("drag",e=>{let{transform:t,snapGrid:o,snapToGrid:i,nodeOrigin:s}=n(),l=nT(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:i,containerBounds:b}),u=[];if(!p)return;let{x:c,y:f,width:j,height:_}=x,E={},N=p.origin??s,{width:S,height:C,x:M,y:O}=function(e,t,n,r,o,i,a,s){var l,u,c,d;let{affectsX:f,affectsY:h}=t,{isHorizontal:p,isVertical:m}=t,g=p&&m,{xSnapped:v,ySnapped:x}=n,{minWidth:y,maxWidth:b,minHeight:w,maxHeight:k}=r,{x:j,y:_,width:E,height:N,aspectRatio:S}=e,C=Math.floor(p?v-e.pointerX:0),M=Math.floor(m?x-e.pointerY:0),O=E+(f?-C:C),A=N+(h?-M:M),P=-i[0]*E,L=-i[1]*N,R=rj(O,y,b),I=rj(A,w,k);if(a){let e=0,t=0;f&&C<0?e=rw(j+C+P,a[0][0]):!f&&C>0&&(e=rk(j+O+P,a[1][0])),h&&M<0?t=rw(_+M+L,a[0][1]):!h&&M>0&&(t=rk(_+A+L,a[1][1])),R=Math.max(R,e),I=Math.max(I,t)}if(s){let e=0,t=0;f&&C>0?e=rk(j+C,s[0][0]):!f&&C<0&&(e=rw(j+O,s[1][0])),h&&M>0?t=rk(_+M,s[0][1]):!h&&M<0&&(t=rw(_+A,s[1][1])),R=Math.max(R,e),I=Math.max(I,t)}if(o){if(p){(R=Math.max(R,rj(O/S,w,k)*S),a)&&(R=Math.max(R,(f||h)&&(!f||h||!g)?rw(_+L+(f?C:-C)/S,a[0][1])*S:rk(_+L+O/S,a[1][1])*S));s&&(R=Math.max(R,(f||h)&&(!f||h||!g)?rk(_+(f?C:-C)/S,s[0][1])*S:rw(_+O/S,s[1][1])*S))}if(m){(I=Math.max(I,rj(A*S,y,b)/S),a)&&(I=Math.max(I,(f||h)&&(!h||f||!g)?rw(j+(h?M:-M)*S+P,a[0][0])/S:rk(j+A*S+P,a[1][0])/S));s&&(I=Math.max(I,(f||h)&&(!h||f||!g)?rk(j+(h?M:-M)*S,s[0][0])/S:rw(j+A*S,s[1][0])/S))}}M+=M<0?I:-I,C+=C<0?R:-R,o&&(g?O>A*S?M=((l=f,u=h,l?!u:u)?-C:C)/S:C=((c=f,d=h,c?!d:d)?-M:M)*S:p?(M=C/S,h=f):(C=M*S,f=h));let T=f?j+C:j,D=h?_+M:_;return{width:E+(f?-C:C),height:N+(h?-M:M),x:i[0]*C*(f?-1:1)+T,y:i[1]*M*(h?-1:1)+D}}(y,a.controlDirection,l,a.boundaries,a.keepAspectRatio,N,g,v),A=S!==j,P=C!==_,L=M!==c&&A,R=O!==f&&P;if(!L&&!R&&!A&&!P)return;if((L||R||1===N[0]||1===N[1])&&(E.x=L?M:x.x,E.y=R?O:x.y,x.x=E.x,x.y=E.y,w.length>0)){let e=M-c,t=O-f;for(let n of w)n.position={x:n.position.x-e+N[0]*(S-j),y:n.position.y-t+N[1]*(C-_)},u.push(n)}if((A||P)&&(E.width=A&&(!a.resizeDirection||"horizontal"===a.resizeDirection)?S:x.width,E.height=P&&(!a.resizeDirection||"vertical"===a.resizeDirection)?C:x.height,x.width=E.width,x.height=E.height),m&&p.expandParent){let e=N[0]*(E.width??0);E.x&&E.x<e&&(x.x=e,y.x=y.x-(E.x-e));let t=N[1]*(E.height??0);E.y&&E.y<t&&(x.y=t,y.y=y.y-(E.y-t))}let I=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){let a=e-t,s=n-r,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&o&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:x.width,prevWidth:j,height:x.height,prevHeight:_,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),T={...x,direction:I};!1!==h?.(e,T)&&(k=!0,d?.(e,T),r(E,u))}).on("end",e=>{k&&(f?.(e,{...x}),o?.({...x}),k=!1)});i.call(j)},destroy:function(){i.on(".drag",null)}}}({domNode:N.current,nodeId:_,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=E.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=E.getState(),a=[],s={x:e.x,y:e.y},l=r.get(_);if(l&&l.expandParent&&l.parentId){let t=l.origin??i,n=e.width??l.measured.width??0,u=e.height??l.measured.height??0,c=rn([{id:l.id,parentId:l.parentId,rect:{width:n,height:u,...nR({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:u},l.parentId,r,t)}}],r,o,i);a.push(...c),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*u,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){let e={id:_,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:_,type:"dimensions",resizing:!0,setAttributes:!f||("horizontal"===f?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(let e of t){let t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{E.getState().triggerNodeChanges([{id:_,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}}])}})),M.current.update({controlPosition:O,boundaries:{minWidth:s,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,resizeDirection:f,onResizeStart:m,onResize:v,onResizeEnd:w,shouldResize:p}),()=>{M.current?.destroy()}},[O,s,l,u,c,d,m,v,w,p]);let A=O.split("-");return(0,x.jsx)("div",{className:b(["react-flow__resize-control","nodrag",...A,n,r]),ref:N,style:{...o,scale:C,...a&&{[S?"backgroundColor":"borderColor"]:a}},children:i})});var i4=e.i(57475);let i6=(0,i4.default)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);e.s(["Keyboard",()=>i6],28347);var i8=e.i(9473),i7=e.i(48064);e.s(["Info",()=>i7.default],29917);var i7=i7,i9=e.i(98844),ae=e.i(52088),at=e.i(99282),an=e.i(91967),ar=e.i(60856),ao=e.i(50439),ai=e.i(59025),aa=e.i(19104),as=e.i(74907),al=e.i(62746),au=e.i(27965),ac=e.i(81026),ad=e.i(36740),af=e.i(68494),ah=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ap=y.forwardRef((e,t)=>(0,x.jsx)(ac.Primitive.span,{...e,ref:t,style:{...ah,...e.style}}));ap.displayName="VisuallyHidden",e.s(["Root",()=>ap,"VISUALLY_HIDDEN_STYLES",()=>ah],43231);var[am,ag]=(0,ao.createContextScope)("Tooltip",[as.createPopperScope]),av=(0,as.createPopperScope)(),ax="TooltipProvider",ay="tooltip.open",[ab,aw]=am(ax),ak=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=e,a=y.useRef(!0),s=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{let e=l.current;return()=>window.clearTimeout(e)},[]),(0,x.jsx)(ab,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:y.useCallback(e=>{s.current=e},[]),disableHoverableContent:o,children:i})};ak.displayName=ax;var aj="Tooltip",[a_,aE]=am(aj),aN=e=>{let{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:a,delayDuration:s}=e,l=aw(aj,e.__scopeTooltip),u=av(t),[c,d]=y.useState(null),f=(0,aa.useId)(),h=y.useRef(0),p=a??l.disableHoverableContent,m=s??l.delayDuration,g=y.useRef(!1),[v,b]=(0,af.useControllableState)({prop:r,defaultProp:o??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(ay))):l.onClose(),i?.(e)},caller:aj}),w=y.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),k=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,b(!0)},[b]),j=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),_=y.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,b(!0),h.current=0},m)},[m,b]);return y.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),(0,x.jsx)(as.Root,{...u,children:(0,x.jsx)(a_,{scope:t,contentId:f,open:v,stateAttribute:w,trigger:c,onTriggerChange:d,onTriggerEnter:y.useCallback(()=>{l.isOpenDelayedRef.current?_():k()},[l.isOpenDelayedRef,_,k]),onTriggerLeave:y.useCallback(()=>{p?j():(window.clearTimeout(h.current),h.current=0)},[j,p]),onOpen:k,onClose:j,disableHoverableContent:p,children:n})})};aN.displayName=aj;var aS="TooltipTrigger",aC=y.forwardRef((e,t)=>{let{__scopeTooltip:n,...r}=e,o=aE(aS,n),i=aw(aS,n),a=av(n),s=y.useRef(null),l=(0,ar.useComposedRefs)(t,s,o.onTriggerChange),u=y.useRef(!1),c=y.useRef(!1),d=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),(0,x.jsx)(as.Anchor,{asChild:!0,...a,children:(0,x.jsx)(ac.Primitive.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:(0,an.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(c.current||i.isPointerInTransitRef.current||(o.onTriggerEnter(),c.current=!0))}),onPointerLeave:(0,an.composeEventHandlers)(e.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:(0,an.composeEventHandlers)(e.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:(0,an.composeEventHandlers)(e.onFocus,()=>{u.current||o.onOpen()}),onBlur:(0,an.composeEventHandlers)(e.onBlur,o.onClose),onClick:(0,an.composeEventHandlers)(e.onClick,o.onClose)})})});aC.displayName=aS;var aM="TooltipPortal",[aO,aA]=am(aM,{forceMount:void 0}),aP=e=>{let{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,i=aE(aM,t);return(0,x.jsx)(aO,{scope:t,forceMount:n,children:(0,x.jsx)(au.Presence,{present:n||i.open,children:(0,x.jsx)(al.Portal,{asChild:!0,container:o,children:r})})})};aP.displayName=aM;var aL="TooltipContent",aR=y.forwardRef((e,t)=>{let n=aA(aL,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=e,a=aE(aL,e.__scopeTooltip);return(0,x.jsx)(au.Presence,{present:r||a.open,children:a.disableHoverableContent?(0,x.jsx)(a$,{side:o,...i,ref:t}):(0,x.jsx)(aI,{side:o,...i,ref:t})})}),aI=y.forwardRef((e,t)=>{let n=aE(aL,e.__scopeTooltip),r=aw(aL,e.__scopeTooltip),o=y.useRef(null),i=(0,ar.useComposedRefs)(t,o),[a,s]=y.useState(null),{trigger:l,onClose:u}=n,c=o.current,{onPointerInTransitChange:d}=r,f=y.useCallback(()=>{s(null),d(!1)},[d]),h=y.useCallback((e,t)=>{let n,r=e.currentTarget,o={x:e.clientX,y:e.clientY},i=function(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw Error("unreachable")}}(o,r.getBoundingClientRect());s(((n=[...function(e,t,n=5){let r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(o,i),...function(e){let{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(n))),d(!0)},[d]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(l&&c){let e=e=>h(e,c),t=e=>h(e,l);return l.addEventListener("pointerleave",e),c.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),c.removeEventListener("pointerleave",t)}}},[l,c,h,f]),y.useEffect(()=>{if(a){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},r=l?.contains(t)||c?.contains(t),o=!function(e,t){let{x:n,y:r}=e,o=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let a=t[e],s=t[i],l=a.x,u=a.y,c=s.x,d=s.y;u>r!=d>r&&n<(c-l)*(r-u)/(d-u)+l&&(o=!o)}return o}(n,a);r?f():o&&(f(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,c,a,u,f]),(0,x.jsx)(a$,{...e,ref:i})}),[aT,aD]=am(aj,{isInside:!1}),az=(0,ad.createSlottable)("TooltipContent"),a$=y.forwardRef((e,t)=>{let{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:a,...s}=e,l=aE(aL,n),u=av(n),{onClose:c}=l;return y.useEffect(()=>(document.addEventListener(ay,c),()=>document.removeEventListener(ay,c)),[c]),y.useEffect(()=>{if(l.trigger){let e=e=>{let t=e.target;t?.contains(l.trigger)&&c()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,c]),(0,x.jsx)(ai.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:c,children:(0,x.jsxs)(as.Content,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,x.jsx)(az,{children:r}),(0,x.jsx)(aT,{scope:n,isInside:!0,children:(0,x.jsx)(ap,{id:l.contentId,role:"tooltip",children:o||r})})]})})});aR.displayName=aL;var aB="TooltipArrow",aq=y.forwardRef((e,t)=>{let{__scopeTooltip:n,...r}=e,o=av(n);return aD(aB,n).isInside?null:(0,x.jsx)(as.Arrow,{...o,...r,ref:t})});function aH({delayDuration:e=0,...t}){return(0,x.jsx)(ak,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function aF({...e}){return(0,x.jsx)(aH,{children:(0,x.jsx)(aN,{"data-slot":"tooltip",...e})})}function aV({...e}){return(0,x.jsx)(aC,{"data-slot":"tooltip-trigger",...e})}function aU({className:e,sideOffset:t=0,children:n,...r}){return(0,x.jsx)(aP,{children:(0,x.jsxs)(aR,{"data-slot":"tooltip-content",sideOffset:t,className:(0,ae.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,(0,x.jsx)(aq,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}aq.displayName=aB,e.s(["Tooltip",()=>aF,"TooltipContent",()=>aU,"TooltipTrigger",()=>aV],65986);let aX={backgroundColor:at.STATUS_COLORS.locked.primary},aQ={backgroundColor:"#FFD700"},aK={color:at.STATUS_COLORS.locked.primary},aY={color:at.EFT_COLORS.goldOne},aW={color:at.STATUS_COLORS.completed.primary},aG=(0,y.memo)(function({data:e,selected:t}){let{quest:n,onDetails:r,isRoot:o,isLeaf:i,isFocused:a,isInFocusChain:s,hasFocusMode:l,playerLevel:u,isSaving:c,isKeyboardSelected:d}=e,f=(0,at.getTraderColor)(n.traderId),h=at.STATUS_COLORS[n.computedStatus],p=null!==u&&n.levelRequired<=u,g=null!==u&&n.levelRequired>u&&n.levelRequired<=u+5,v=(0,y.useMemo)(()=>n.dependsOn?n.dependsOn.filter(e=>e.requiredQuest.traderId.toLowerCase()!==n.traderId.toLowerCase()).map(e=>({traderId:e.requiredQuest.traderId.toLowerCase(),traderName:e.requiredQuest.trader.name,questTitle:e.requiredQuest.title})):[],[n.dependsOn,n.traderId]),b=(0,y.useMemo)(()=>{let e=new Map;for(let t of v){let n=e.get(t.traderId);n?n.count++:e.set(t.traderId,{name:t.traderName,count:1})}return Array.from(e.entries()).map(([e,t])=>({traderId:e,...t}))},[v]),w=l&&!s&&!a,k=(0,y.useMemo)(()=>{let e=w?"#636363":f.primary;return{width:155,minHeight:58,backgroundColor:w?"#424242":h.bg,borderColor:e}},[w,h.bg,f.primary]),j=(0,y.useMemo)(()=>({color:p?at.STATUS_COLORS.completed.primary:g?at.STATUS_COLORS.available.primary:at.STATUS_COLORS.locked.primary,fontWeight:p?600:400}),[p,g]),_=function({threshold:e=500,onLongPress:t,onClick:n}){let r=(0,y.useRef)(null),o=(0,y.useRef)(!1),i=(0,y.useRef)(null),a=(0,y.useCallback)(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),s=(0,y.useCallback)((n,s)=>{a(),o.current=!1,i.current={x:n,y:s},r.current=setTimeout(()=>{o.current=!0,t()},e)},[a,t,e]),l=(0,y.useCallback)(()=>{!o.current&&n&&n(),a(),i.current=null},[a,n]),u=(0,y.useCallback)((e,t)=>{if(!i.current)return;let n=Math.abs(e-i.current.x),r=Math.abs(t-i.current.y);(n>10||r>10)&&(a(),i.current=null)},[a]),c=(0,y.useCallback)(e=>{let t=e.touches[0];s(t.clientX,t.clientY)},[s]),d=(0,y.useCallback)(()=>{l()},[l]),f=(0,y.useCallback)(e=>{let t=e.touches[0];u(t.clientX,t.clientY)},[u]),h=(0,y.useCallback)(e=>{0===e.button&&s(e.clientX,e.clientY)},[s]);return{onTouchStart:c,onTouchEnd:d,onTouchMove:f,onMouseDown:h,onMouseUp:(0,y.useCallback)(()=>{l()},[l]),onMouseLeave:(0,y.useCallback)(()=>{a(),i.current=null},[a])}}({threshold:500,onLongPress:()=>{r&&!w&&r(n.id)}});return(0,x.jsxs)(x.Fragment,{children:[!o&&(0,x.jsx)(oL,{type:"target",position:m.Left,className:"!w-1.5 !h-1.5",style:aX}),(0,x.jsxs)("div",{onContextMenu:e=>{e.preventDefault(),r&&r(n.id)},..._,className:(0,ae.cn)("relative cursor-pointer rounded border-2 p-2 transition-all duration-150","hover:shadow-md active:scale-95",t&&"ring-2 ring-offset-2 ring-blue-500","locked"===n.computedStatus&&!w&&"opacity-70","completed"===n.computedStatus&&!w&&"opacity-80","available"===n.computedStatus&&!w&&"shadow-sm hover:shadow-lg",o&&!w&&"border-l-4 border-l-emerald-500",i&&!w&&"border-r-4 border-r-violet-500",a&&"ring-4 ring-blue-500 shadow-lg scale-105",s&&!a&&"ring-2 ring-blue-300",w&&"opacity-40 pointer-events-auto",p&&"available"===n.computedStatus&&!w&&!a&&!d&&!n.kappaRequired&&"ring-2 ring-emerald-400 shadow-emerald-100",g&&"completed"!==n.computedStatus&&!w&&!a&&!d&&!n.kappaRequired&&"ring-1 ring-amber-300",d&&!a&&"ring-2 ring-orange-400 ring-offset-1 shadow-lg"),style:k,children:[n.kappaRequired&&(0,x.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full flex items-center justify-center text-[7px] font-bold text-white",style:aQ,title:"Required for Kappa",children:"K"}),b.length>0&&!w&&(0,x.jsxs)("div",{className:"absolute -top-1 left-1 flex gap-px",children:[b.slice(0,2).map(e=>{let t=(0,at.getTraderColor)(e.traderId);return(0,x.jsx)("div",{className:"px-0.5 rounded text-[7px] font-medium text-white",style:{backgroundColor:t.primary},title:`Requires quest(s) from ${e.name}`,children:e.name.slice(0,2)},e.traderId)}),b.length>2&&(0,x.jsxs)("div",{className:"px-0.5 rounded text-[7px] font-medium text-white",style:aX,children:["+",b.length-2]})]}),c&&(0,x.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none bg-black/20 rounded",children:(0,x.jsx)(i9.Loader2,{className:"w-5 h-5 animate-spin text-primary"})}),"completed"===n.computedStatus&&!c&&(0,x.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,x.jsx)("svg",{className:"w-5 h-5 opacity-40",style:aW,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,x.jsx)("div",{className:"font-semibold text-[14px] leading-tight line-clamp-2",style:aY,title:n.title,children:n.title}),n.objectivesSummary&&n.objectivesSummary.total>0&&"locked"!==n.computedStatus&&!w&&(0,x.jsx)("div",{className:"mt-1",children:(0,x.jsx)("div",{className:"h-1 w-full bg-black/30 rounded-full overflow-hidden",children:(0,x.jsx)("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${n.objectivesSummary.completed/n.objectivesSummary.total*100}%`}})})}),(0,x.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,x.jsxs)("span",{className:"flex items-center gap-0.5",children:[(0,x.jsx)("span",{className:"text-[10px] uppercase tracking-wide",style:{color:"var(--text-tertiary)"},children:"Lv"}),(0,x.jsx)("span",{className:"text-[12px] font-semibold",style:j,children:n.levelRequired}),n.objectivesSummary&&n.objectivesSummary.total>0&&"locked"!==n.computedStatus&&!w&&(0,x.jsxs)("span",{className:"ml-1 text-[10px]",style:{color:"var(--text-tertiary)"},children:["(",n.objectivesSummary.completed,"/",n.objectivesSummary.total,")"]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-1",children:[!w&&r&&(0,x.jsxs)(aF,{delayDuration:300,children:[(0,x.jsx)(aV,{asChild:!0,children:(0,x.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),r&&r(n.id)},onMouseDown:e=>{e.stopPropagation()},onTouchStart:e=>e.stopPropagation(),onTouchEnd:e=>{e.stopPropagation(),e.preventDefault(),r&&r(n.id)},className:"w-6 h-6 flex items-center justify-center opacity-60 hover:opacity-100 transition-colors duration-150 rounded-full hover:bg-black/20 focus:outline-none focus:ring-1 focus:ring-offset-1 pointer-events-auto",style:aK,"aria-label":`View ${n.title} details`,children:(0,x.jsx)(i7.default,{className:"w-[14px] h-[14px]"})})}),(0,x.jsx)(aU,{side:"top",sideOffset:4,children:(0,x.jsx)("p",{className:"text-xs",children:"View Details"})})]}),n.wikiLink&&!w&&(0,x.jsxs)(aF,{delayDuration:300,children:[(0,x.jsx)(aV,{asChild:!0,children:(0,x.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),n.wikiLink&&window.open(n.wikiLink,"_blank","noopener,noreferrer")},onMouseDown:e=>{e.stopPropagation()},onTouchStart:e=>e.stopPropagation(),onTouchEnd:e=>{e.stopPropagation(),e.preventDefault(),n.wikiLink&&window.open(n.wikiLink,"_blank","noopener,noreferrer")},className:"w-6 h-6 flex items-center justify-center opacity-60 hover:opacity-100 transition-colors duration-150 rounded-full hover:bg-black/20 focus:outline-none focus:ring-1 focus:ring-offset-1 pointer-events-auto",style:aK,"aria-label":`Open ${n.title} wiki page`,children:(0,x.jsx)(i8.ExternalLink,{className:"w-[14px] h-[14px]"})})}),(0,x.jsx)(aU,{side:"top",sideOffset:4,children:(0,x.jsx)("p",{className:"text-xs",children:"View on Tarkov Wiki"})})]})]})]})]}),!i&&(0,x.jsx)(oL,{type:"source",position:m.Right,className:"!w-1.5 !h-1.5",style:aX})]})});var aZ=e.i(59495);let aJ={TRADER_NODE_WIDTH:60,TRADER_NODE_HEIGHT:40,BASE_LANE_HEIGHT:80,LANE_SPACING:25,TRADER_TO_QUEST_GAP:20,QUEST_VERTICAL_GAP:25},a0=["prapor","therapist","skier","peacekeeper","mechanic","ragman","jaeger","fence","lightkeeper"];function a1(e){return 58+(Math.min(Math.ceil(e.length/15),2)-1)*18}function a2(e,t){let n=new Map(t.map(e=>[e.id,e])),r=new Set;return r.add(e),!function e(t){let o=n.get(t);if(o)for(let t of o.dependsOn||[])r.has(t.requiredQuest.id)||(r.add(t.requiredQuest.id),e(t.requiredQuest.id))}(e),!function e(t){let o=n.get(t);if(o)for(let t of o.dependedOnBy||[])r.has(t.dependentQuest.id)||(r.add(t.dependentQuest.id),e(t.dependentQuest.id))}(e),r}function a5(e,t){let n=new Map(t.map(e=>[e.id,e])),r=[],o=new Set;return!function e(t){let i=n.get(t);if(i)for(let t of i.dependsOn||[]){let i=t.requiredQuest.id;if(o.has(i))continue;o.add(i),e(i);let a=n.get(i);a&&"completed"!==a.computedStatus&&r.push(a)}}(e),r}function a3(e,t,n,r){let{maxColumns:o}=r,i=function(e){let t=new Map,n=new Map(e.map(e=>[e.id,e])),r=new Set;for(let o of e)!function e(o){if(t.has(o))return t.get(o);if(r.has(o))return 0;r.add(o);let i=n.get(o);if(!i)return r.delete(o),0;if(!i.dependsOn||0===i.dependsOn.length)return r.delete(o),t.set(o,0),0;let a=0;for(let t of i.dependsOn)a=Math.max(a,e(t.requiredQuest.id));let s=a+1;return r.delete(o),t.set(o,s),s}(o.id);return t}(t),a=function(e){let t=new Map;for(let n of e){let e=n.traderId.toLowerCase();t.has(e)||t.set(e,{traderId:e,trader:n.trader,quests:[],rootQuests:[],intraTraderDeps:[],crossTraderDeps:[]}),t.get(e).quests.push(n)}for(let n of e){let e=n.traderId.toLowerCase(),r=t.get(e),o=!1;for(let i of n.dependsOn||[]){let a=i.requiredQuest.traderId.toLowerCase();if(a===e)r.intraTraderDeps.push({sourceId:i.requiredQuest.id,targetId:n.id}),o=!0;else{r.crossTraderDeps.push({sourceQuestId:i.requiredQuest.id,sourceTraderId:a,targetQuestId:n.id,targetTraderId:e});let o=t.get(a);o&&o.crossTraderDeps.push({sourceQuestId:i.requiredQuest.id,sourceTraderId:a,targetQuestId:n.id,targetTraderId:e})}}o||r.rootQuests.push(n)}return t}(e);if(null!=o)for(let[t,n]of a){let r=function(e,t,n,r){if(null===n)return e;let o=e.filter(e=>e.traderId.toLowerCase()===t.toLowerCase()),i=r??function(e,t){let n=new Map,r=e.filter(e=>e.traderId.toLowerCase()===t.toLowerCase()),o=new Map(r.map(e=>[e.id,e]));for(let e of r)!function e(t,r){if(r.has(t))return 0;if(r.add(t),n.has(t))return n.get(t);let i=o.get(t);if(!i)return 0;let a=(i.dependsOn||[]).filter(e=>void 0!==o.get(e.requiredQuest.id));if(0===a.length)return n.set(t,0),0;let s=0;for(let t of a)s=Math.max(s,e(t.requiredQuest.id,new Set(r)));let l=s+1;return n.set(t,l),l}(e.id,new Set);return n}(e,t);return o.filter(e=>(i.get(e.id)??0)<n)}(e,t,o,i);n.quests=r;let a=new Set(r.map(e=>e.id));n.intraTraderDeps=n.intraTraderDeps.filter(e=>a.has(e.sourceId)&&a.has(e.targetId));let s=new Set(n.intraTraderDeps.map(e=>e.targetId));n.rootQuests=r.filter(e=>!s.has(e.id)),n.crossTraderDeps=n.crossTraderDeps.filter(e=>a.has(e.sourceQuestId)||a.has(e.targetQuestId))}let s=function(e){let t=new Map;for(let n of e.values())for(let e of(t.has(n.traderId)||t.set(n.traderId,new Map),n.crossTraderDeps)){let r=t.get(n.traderId),o=r.get(e.sourceTraderId)||0;r.set(e.sourceTraderId,o+1)}let n=Array.from(e.keys());return n.sort((e,t)=>{let n=a0.indexOf(e),r=a0.indexOf(t);return -1===n&&-1===r?0:-1===n?1:-1===r?-1:n-r}),n}(a),l=[];for(let e of s){let t=a.get(e);t&&t.quests.length>0&&l.push(function(e,t,n){let{onStatusChange:r,onClick:o,onFocus:i,onDetails:a,selectedQuestId:s,focusedQuestId:l,focusChain:u,playerLevel:c,savingQuestIds:d,keyboardSelectedId:f}=t,h=null!=l,p=new aZ.default.graphlib.Graph().setDefaultEdgeLabel(()=>({}));p.setGraph({rankdir:"LR",nodesep:aJ.QUEST_VERTICAL_GAP,ranksep:20,marginx:0,marginy:0});let m=1/0;for(let t of e.quests)m=Math.min(m,n.get(t.id)??0);for(let t of(m===1/0&&(m=0),e.quests)){let e=a1(t.title);p.setNode(t.id,{width:155,height:e})}let g=e.quests.filter(t=>e.crossTraderDeps.some(e=>e.targetQuestId===t.id)),v=new Map,x=0;for(let e of g){let t=(n.get(e.id)??0)-m;t>0&&(x=Math.max(x,t))}if(x>0){for(let t=0;t<=x;t++){let n=`__spacer_${e.traderId}_${t}`;if(v.set(t,n),p.setNode(n,{width:1,height:1}),t>0){let e=v.get(t-1);p.setEdge(e,n)}}let t=v.get(0);if(t)for(let n of e.rootQuests)g.some(e=>e.id===n.id)||p.setEdge(t,n.id)}for(let e of g){let t=(n.get(e.id)??0)-m;if(t>0){let n=v.get(t-1);n&&p.setEdge(n,e.id)}}let y=[],b=new Map(e.quests.map(e=>[e.id,e]));for(let t of e.intraTraderDeps){p.setEdge(t.sourceId,t.targetId);let e=b.get(t.sourceId),n=b.get(t.targetId);if(e&&n){let r=u?.has(n.id)&&u?.has(t.sourceId),o=h&&!r,i=n.dependsOn?.find(e=>e.requiredQuest.id===t.sourceId),a=i?.requirementStatus||["complete"],s=a.includes("active")&&!a.includes("complete");y.push({id:`${t.sourceId}-${t.targetId}`,source:t.sourceId,target:t.targetId,type:"default",animated:"available"===n.computedStatus&&!o,style:{stroke:o?"#D1D5DB":"completed"===n.computedStatus?"#10B981":"available"===n.computedStatus?"#3B82F6":"locked"===n.computedStatus?"#6B7280":"#9CA3AF",strokeWidth:r||n.kappaRequired?3:2,strokeDasharray:s?"5,5":void 0,opacity:o?.4:"locked"===n.computedStatus?.5:1},data:{sourceStatus:e.computedStatus,targetStatus:n.computedStatus,requirementStatus:a}})}}aZ.default.layout(p);let w=0,k=0,j=1/0;for(let t of e.quests){let e=p.node(t.id);e&&(w=Math.max(w,e.x+77.5),k=Math.max(k,e.y+29),j=Math.min(j,e.y-29))}let _=e.quests.length>0?k-j:58,E=Math.max(aJ.BASE_LANE_HEIGHT,_+20),N=new Set(e.rootQuests.map(e=>e.id)),S=new Set(e.intraTraderDeps.map(e=>e.sourceId)),C=new Set(e.quests.filter(e=>!S.has(e.id)).map(e=>e.id)),M=e.quests.map(e=>{let t=p.node(e.id);return{quest:e,x:t.x-77.5,y:t.y-29}}),O=Math.min(...M.map(e=>e.y)),A=M.map(({quest:e,x:t,y:n})=>{let p=u?.has(e.id)??!1,m=a1(e.title);return{id:e.id,type:"quest",position:{x:t,y:n-O},data:{quest:e,nodeHeight:m,isSelected:e.id===s,isRoot:N.has(e.id),isLeaf:C.has(e.id),isFocused:e.id===l,isInFocusChain:p,hasFocusMode:h,playerLevel:c??null,isSaving:d?.has(e.id)??!1,isKeyboardSelected:e.id===f,onStatusChange:r,onClick:o,onFocus:i,onDetails:a}}});return{traderId:e.traderId,nodes:A,edges:y,laneHeight:E,laneWidth:w}}(t,r,i))}let u=function(e,t,n){let r=[],o=[],i=new Map,a=10;for(let s of t){let t=e.find(e=>e.traderId===s),l=n.get(s);if(!t||!l)continue;i.set(s,{y:a,height:t.laneHeight});let u=(0,at.getTraderColor)(s),c=l.quests.filter(e=>"completed"===e.computedStatus).length,d={id:`trader-${s}`,type:"trader",position:{x:0,y:a},data:{traderId:s,traderName:l.trader.name,color:u.primary,questCount:l.quests.length,completedCount:c,laneHeight:t.laneHeight}};r.push(d);let f=aJ.TRADER_NODE_WIDTH+aJ.TRADER_TO_QUEST_GAP;for(let e of t.nodes)r.push({...e,position:{x:e.position.x+f,y:e.position.y+a}});o.push(...t.edges),a+=t.laneHeight+aJ.LANE_SPACING}if(r.length>0){let e=Math.min(...r.map(e=>e.position.x)),t=Math.min(...r.map(e=>e.position.y));return{nodes:r.map(n=>({...n,position:{x:n.position.x-e+5,y:n.position.y-t+10}})),edges:o,laneYOffsets:i}}return{nodes:r,edges:o,laneYOffsets:i}}(l,s,a);return{nodes:u.nodes,edges:u.edges,laneYOffsets:u.laneYOffsets,traderOrder:s}}e.s(["LANE_CONFIG",0,aJ,"buildTraderLaneGraph",()=>a3,"getIncompletePrerequisites",()=>a5,"getQuestChain",()=>a2],18183);let a4=(0,y.memo)(function({data:e}){let{traderName:t,color:n,questCount:r,completedCount:o,laneHeight:i}=e,a=i||aJ.TRADER_NODE_HEIGHT;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:(0,ae.cn)("rounded border flex items-center justify-center","shadow-md font-medium bg-background"),style:{width:aJ.TRADER_NODE_WIDTH,height:a,borderColor:n},children:(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:[(0,x.jsx)("span",{className:"font-bold text-xs",style:{color:n},children:t}),(0,x.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:[o,"/",r]})]})})})});function a6(){let[e,t]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{let e=()=>t(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}e.s(["useIsMobile",()=>a6],8756);let a8={quest:aG,trader:a4};function a7({quests:e,allQuests:t,traders:n,selectedQuestId:r,playerLevel:o,maxColumns:i,savingQuestIds:a,onQuestSelect:s,onStatusChange:l,onQuestDetails:u}){let c=a6(),{fitView:d,setViewport:f,getViewport:h}=om(),p=(0,y.useRef)(!1),m=(0,y.useRef)([]),g=(0,y.useRef)(null),b=(0,y.useRef)(void 0),[w,k]=(0,y.useState)(null),[j,_]=(0,y.useState)(null),E=(0,y.useMemo)(()=>{if(w)return a2(w,t)},[w,t]),N=(0,y.useCallback)(e=>{k(t=>t===e?null:e)},[]),{initialNodes:S,initialEdges:C}=(0,y.useMemo)(()=>{let c=a3(e,t,n,{onStatusChange:l,onClick:s,onFocus:N,onDetails:u,selectedQuestId:r,focusedQuestId:w,focusChain:E,playerLevel:o,maxColumns:i,savingQuestIds:a,keyboardSelectedId:j});return{initialNodes:c.nodes,initialEdges:c.edges}},[e,t,n,r,o,i,a,w,E,l,s,N,u,j]),[M,O,A]=function(e){let[t,n]=(0,y.useState)(e),r=(0,y.useCallback)(e=>n(t=>or(e,t)),[]);return[t,n,r]}(S),[P,L,R]=function(e){let[t,n]=(0,y.useState)(e),r=(0,y.useCallback)(e=>n(t=>or(e,t)),[]);return[t,n,r]}(C);(0,y.useEffect)(()=>{O(S),L(C)},[S,C,O,L]),(0,y.useEffect)(()=>{m.current=M},[M]);let I=(0,y.useMemo)(()=>M.filter(e=>"quest"===e.type),[M]),T=(0,y.useCallback)((e,t)=>{let n=I.find(t=>t.id===e);if(!n)return I[0]?.id||null;let{x:r,y:o}=n.position,i=I.filter(n=>{if(n.id===e)return!1;let{x:i,y:a}=n.position;switch(t){case"up":return a<o;case"down":return a>o;case"left":return i<r;case"right":return i>r}});if(0===i.length)return null;let a=e=>{let n=Math.abs(e.position.x-r),i=Math.abs(e.position.y-o);return"up"===t||"down"===t?i+.5*n:n+.5*i};return i.sort((e,t)=>a(e)-a(t)),i[0]?.id||null},[I]);(0,y.useEffect)(()=>{let e=e=>{let t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;if("Escape"===e.key)return void(w?k(null):j&&_(null));if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){if(e.preventDefault(),!j){let e=I[0];e&&_(e.id);return}let t=T(j,e.key.replace("Arrow","").toLowerCase());if(t){_(t);let e=m.current.find(e=>e.id===t);e&&d({nodes:[e],duration:150,padding:.5,maxZoom:1.5})}return}if(!j)return;let n=m.current.find(e=>e.id===j),r=n?.data;if(r?.quest){if("Enter"===e.key){e.preventDefault(),l(r.quest.id,r.quest.computedStatus);return}if(" "===e.key){e.preventDefault(),u&&u(r.quest.id);return}if("f"===e.key||"F"===e.key){e.preventDefault(),N(r.quest.id);return}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[w,j,I,T,l,u,N,d]);let D=(0,y.useCallback)(()=>{!p.current&&m.current.length>0&&(d({padding:.1,duration:0}),setTimeout(()=>{let{x:e,y:t,zoom:n}=h();f({x:e,y:t,zoom:1.5*n},{duration:0})},50),p.current=!0)},[d,h,f]),z=(0,y.useMemo)(()=>{if(0!==M.length)return[[Math.min(...M.map(e=>e.position.x))-50,Math.min(...M.map(e=>e.position.y))-50],[Math.max(...M.map(e=>e.position.x+155))+50,Math.max(...M.map(e=>e.position.y+58))+50]]},[M]);(0,y.useEffect)(()=>{b.current=z},[z]),(0,y.useEffect)(()=>{if(w){let e=m.current.find(e=>e.id===w);e&&d({nodes:[e],duration:300,padding:.5,maxZoom:1})}},[w,d]),(0,y.useEffect)(()=>{let e=g.current;if(!e)return;let t=t=>{if(t.ctrlKey)return;t.preventDefault();let{x:n,y:r,zoom:o}=h(),i=r-.8*t.deltaY,a=b.current;if(a){let[[,t],[,n]]=a;i=Math.max(e.clientHeight-n*o,Math.min(-t*o,i))}f({x:n,y:i,zoom:o},{duration:0})};return e.addEventListener("wheel",t,{passive:!1}),()=>e.removeEventListener("wheel",t)},[h,f]);let $=(0,y.useCallback)(()=>{w&&k(null)},[w]),B=(0,y.useCallback)((e,t)=>{let n=t.data;if(n?.quest){let e=n.quest;l(e.id,e.computedStatus)}},[l]),q=(0,y.useCallback)((e,t)=>{let n=t.data;n?.quest&&N(n.quest.id)},[N]),H=(0,y.useCallback)(e=>{let t=e.data;return t?.quest?(0,at.getTraderColor)(t.quest.traderId).primary:"#636363"},[]);return(0,x.jsxs)("div",{ref:g,className:"w-full h-full touch-pan-y relative",children:[(0,x.jsx)("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-2",children:w&&(0,x.jsxs)("div",{className:"text-xs px-3 py-1.5 rounded-full shadow-md flex items-center gap-2",style:{backgroundColor:"#9a8866",color:"#1b1919"},children:[(0,x.jsx)("span",{children:"Focus Mode"}),(0,x.jsx)("button",{onClick:()=>k(null),className:"rounded-full p-0.5 hover:opacity-80",title:"Exit focus mode (ESC)",children:(0,x.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),!c&&(0,x.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,x.jsxs)(aF,{delayDuration:200,children:[(0,x.jsx)(aV,{asChild:!0,children:(0,x.jsx)("button",{className:"p-2 rounded-md bg-background/80 border border-border shadow-sm hover:bg-background transition-colors","aria-label":"Keyboard shortcuts",children:(0,x.jsx)(i6,{className:"w-4 h-4 text-muted-foreground"})})}),(0,x.jsx)(aU,{side:"left",align:"start",className:"max-w-xs",children:(0,x.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,x.jsx)("p",{className:"font-semibold text-foreground",children:"Keyboard Shortcuts"}),(0,x.jsxs)("div",{className:"space-y-1 text-muted-foreground",children:[(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Navigate quests"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"Arrow keys"})]}),(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Toggle status"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"Enter"})]}),(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Quest details"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"Space"})]}),(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Focus mode"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"F"})]}),(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Search quests"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"/"})]}),(0,x.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,x.jsx)("span",{children:"Exit / Clear"}),(0,x.jsx)("kbd",{className:"px-1.5 py-0.5 bg-muted rounded text-[10px] font-mono",children:"Esc"})]})]})]})})]})}),(0,x.jsxs)(iL,{nodes:M,edges:P,onNodesChange:A,onEdgesChange:R,onPaneClick:$,onNodeClick:B,onNodeDoubleClick:q,onInit:D,nodeTypes:a8,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,defaultViewport:{x:0,y:0,zoom:1},translateExtent:z,minZoom:.1,maxZoom:c?2:4,defaultEdgeOptions:{type:"default"},proOptions:{hideAttribution:!0},panOnScroll:!1,zoomOnScroll:!1,panOnDrag:[1,2],zoomOnPinch:!0,zoomOnDoubleClick:!1,children:[(0,x.jsx)(iK,{showInteractive:!1,className:"!shadow-md",position:"bottom-left"}),(0,x.jsx)(i$,{variant:v.Dots,gap:100,size:0,color:"transparent",style:{backgroundColor:"#1e1e20"}}),!c&&(0,x.jsx)(i5,{nodeColor:H,nodeStrokeWidth:3,zoomable:!0,pannable:!0,className:"!bg-background/80 !border-border"})]})]})}function a9(e){return(0,x.jsx)(iO,{children:(0,x.jsx)(a7,{...e})})}e.s(["QuestTree",()=>a9],66909);let se=(0,i4.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>se],26801);var st=e.i(59467);let sn=(0,i4.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>sn],91058);let sr=(0,i4.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>sr],82436);let so=(0,i4.default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>so],17582);var si=e.i(14294),sa="Progress",[ss,sl]=function(e,t=[]){let n=[],r=()=>{let t=n.map(e=>y.createContext(e));return function(n){let r=n?.[e]||t;return y.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){let o=y.createContext(r);o.displayName=t+"Context";let i=n.length;n=[...n,r];let a=t=>{let{scope:n,children:r,...a}=t,s=n?.[e]?.[i]||o,l=y.useMemo(()=>a,Object.values(a));return(0,x.jsx)(s.Provider,{value:l,children:r})};return a.displayName=t+"Provider",[a,function(n,a){let s=a?.[e]?.[i]||o,l=y.useContext(s);if(l)return l;if(void 0!==r)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let o=n(e)[`__scope${r}`];return{...t,...o}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}(r,...t)]}(sa),[su,sc]=ss(sa),sd=y.forwardRef((e,t)=>{var n,r;let{__scopeProgress:o,value:i=null,max:a,getValueLabel:s=sp,...l}=e;(a||0===a)&&!sv(a)&&console.error((n=`${a}`,`Invalid prop \`max\` of value \`${n}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=sv(a)?a:100;null===i||sx(i,u)||console.error((r=`${i}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let c=sx(i,u)?i:null,d=sg(c)?s(c,u):void 0;return(0,x.jsx)(su,{scope:o,value:c,max:u,children:(0,x.jsx)(si.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":sg(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":sm(c,u),"data-value":c??void 0,"data-max":u,...l,ref:t})})});sd.displayName=sa;var sf="ProgressIndicator",sh=y.forwardRef((e,t)=>{let{__scopeProgress:n,...r}=e,o=sc(sf,n);return(0,x.jsx)(si.Primitive.div,{"data-state":sm(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:t})});function sp(e,t){return`${Math.round(e/t*100)}%`}function sm(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function sg(e){return"number"==typeof e}function sv(e){return sg(e)&&!isNaN(e)&&e>0}function sx(e,t){return sg(e)&&!isNaN(e)&&e<=t&&e>=0}sh.displayName=sf;let sy=y.forwardRef(({className:e,value:t,indicatorClassName:n,style:r,...o},i)=>(0,x.jsx)(sd,{ref:i,className:(0,ae.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...o,children:(0,x.jsx)(sh,{className:(0,ae.cn)("h-full w-full flex-1 transition-all",n||"bg-primary"),style:{transform:`translateX(-${100-(t||0)}%)`,backgroundColor:r?.["--progress-color"]}})}));sy.displayName=sd.displayName;var sb=e.i(64614),sw=e.i(67194),sk=e.i(73772),sj=e.i(14329),s_="Popover",[sE,sN]=(0,ao.createContextScope)(s_,[as.createPopperScope]),sS=(0,as.createPopperScope)(),[sC,sM]=sE(s_),sO=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:a=!1}=e,s=sS(t),l=y.useRef(null),[u,c]=y.useState(!1),[d,f]=(0,af.useControllableState)({prop:r,defaultProp:o??!1,onChange:i,caller:s_});return(0,x.jsx)(as.Root,{...s,children:(0,x.jsx)(sC,{scope:t,contentId:(0,aa.useId)(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>c(!0),[]),onCustomAnchorRemove:y.useCallback(()=>c(!1),[]),modal:a,children:n})})};sO.displayName=s_;var sA="PopoverAnchor";y.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=sM(sA,n),i=sS(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=o;return y.useEffect(()=>(a(),()=>s()),[a,s]),(0,x.jsx)(as.Anchor,{...i,...r,ref:t})}).displayName=sA;var sP="PopoverTrigger",sL=y.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=sM(sP,n),i=sS(n),a=(0,ar.useComposedRefs)(t,o.triggerRef),s=(0,x.jsx)(ac.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":sU(o.open),...r,ref:a,onClick:(0,an.composeEventHandlers)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:(0,x.jsx)(as.Anchor,{asChild:!0,...i,children:s})});sL.displayName=sP;var sR="PopoverPortal",[sI,sT]=sE(sR,{forceMount:void 0}),sD=e=>{let{__scopePopover:t,forceMount:n,children:r,container:o}=e,i=sM(sR,t);return(0,x.jsx)(sI,{scope:t,forceMount:n,children:(0,x.jsx)(au.Presence,{present:n||i.open,children:(0,x.jsx)(al.Portal,{asChild:!0,container:o,children:r})})})};sD.displayName=sR;var sz="PopoverContent",s$=y.forwardRef((e,t)=>{let n=sT(sz,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,i=sM(sz,e.__scopePopover);return(0,x.jsx)(au.Presence,{present:r||i.open,children:i.modal?(0,x.jsx)(sq,{...o,ref:t}):(0,x.jsx)(sH,{...o,ref:t})})});s$.displayName=sz;var sB=(0,ad.createSlot)("PopoverContent.RemoveScroll"),sq=y.forwardRef((e,t)=>{let n=sM(sz,e.__scopePopover),r=y.useRef(null),o=(0,ar.useComposedRefs)(t,r),i=y.useRef(!1);return y.useEffect(()=>{let e=r.current;if(e)return(0,sk.hideOthers)(e)},[]),(0,x.jsx)(sj.RemoveScroll,{as:sB,allowPinchZoom:!0,children:(0,x.jsx)(sF,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,an.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:(0,an.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;i.current=2===t.button||n},{checkForDefaultPrevented:!1}),onFocusOutside:(0,an.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),sH=y.forwardRef((e,t)=>{let n=sM(sz,e.__scopePopover),r=y.useRef(!1),o=y.useRef(!1);return(0,x.jsx)(sF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));let i=t.target;n.triggerRef.current?.contains(i)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),sF=y.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=e,f=sM(sz,n),h=sS(n);return(0,sb.useFocusGuards)(),(0,x.jsx)(sw.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,x.jsx)(ai.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:c,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:(0,x.jsx)(as.Content,{"data-state":sU(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),sV="PopoverClose";function sU(e){return e?"open":"closed"}function sX({...e}){return(0,x.jsx)(sO,{"data-slot":"popover",...e})}function sQ({...e}){return(0,x.jsx)(sL,{"data-slot":"popover-trigger",...e})}function sK({className:e,align:t="center",sideOffset:n=4,...r}){return(0,x.jsx)(sD,{children:(0,x.jsx)(s$,{"data-slot":"popover-content",align:t,sideOffset:n,className:(0,ae.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-elevation-lg outline-none",e),...r})})}function sY({quests:e,traders:t}){let n=(0,y.useMemo)(()=>{let t=e.length,n=e.filter(e=>"completed"===e.computedStatus).length;return{total:t,completed:n,available:e.filter(e=>"available"===e.computedStatus).length,locked:e.filter(e=>"locked"===e.computedStatus).length,percentage:t>0?Math.round(n/t*100):0}},[e]),r=(0,y.useMemo)(()=>{let t=e.filter(e=>e.kappaRequired),n=t.length,r=t.filter(e=>"completed"===e.computedStatus).length;return{total:n,completed:r,available:t.filter(e=>"available"===e.computedStatus).length,remaining:n-r,percentage:n>0?Math.round(r/n*100):0}},[e]),o=(0,y.useMemo)(()=>{let n=[];for(let r of t){let t=e.filter(e=>e.traderId===r.id),o=t.length,i=t.filter(e=>"completed"===e.computedStatus).length,a=t.filter(e=>"available"===e.computedStatus).length,s=t.filter(e=>"locked"===e.computedStatus).length;o>0&&n.push({traderId:r.id,traderName:r.name,total:o,completed:i,available:a,locked:s,percentage:Math.round(i/o*100)})}return n.sort((e,t)=>t.percentage-e.percentage)},[e,t]);return(0,x.jsxs)(sX,{children:[(0,x.jsx)(sQ,{asChild:!0,children:(0,x.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-background/80 border border-border hover:bg-muted transition-colors text-sm",children:[(0,x.jsx)(sr,{className:"w-4 h-4 text-[#d4a574]"}),(0,x.jsxs)("span",{className:"font-medium",children:[n.percentage,"%"]}),(0,x.jsx)(st.ChevronDown,{className:"w-3 h-3 text-muted-foreground"})]})}),(0,x.jsx)(sK,{className:"w-80 p-0",align:"start",children:(0,x.jsxs)("div",{className:"p-4 space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(so,{className:"w-4 h-4 text-[#0292c0]"}),(0,x.jsx)("span",{className:"font-medium text-sm",children:"Overall Progress"})]}),(0,x.jsxs)("span",{className:"text-sm text-muted-foreground",children:[n.completed,"/",n.total]})]}),(0,x.jsx)(sy,{value:n.percentage,className:"h-2",indicatorClassName:"bg-[#00a700]"}),(0,x.jsxs)("div",{className:"flex justify-between mt-1.5 text-xs text-muted-foreground",children:[(0,x.jsxs)("span",{className:"flex items-center gap-1",children:[(0,x.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#00a700"}}),n.completed," done"]}),(0,x.jsxs)("span",{className:"flex items-center gap-1",children:[(0,x.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#0292c0"}}),n.available," available"]}),(0,x.jsxs)("span",{className:"flex items-center gap-1",children:[(0,x.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#636363"}}),n.locked," locked"]})]})]}),(0,x.jsxs)("div",{className:"pt-2 border-t",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(sn,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),(0,x.jsx)("span",{className:"font-medium text-sm",children:"Kappa Container"})]}),(0,x.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r.completed,"/",r.total]})]}),(0,x.jsx)(sy,{value:r.percentage,className:"h-2",indicatorClassName:"bg-yellow-500"}),(0,x.jsx)("p",{className:"mt-1.5 text-xs text-muted-foreground",children:r.remaining>0?`${r.remaining} Kappa quests remaining`:"All Kappa quests completed!"})]}),(0,x.jsxs)("div",{className:"pt-2 border-t",children:[(0,x.jsx)("p",{className:"font-medium text-sm mb-3",children:"By Trader"}),(0,x.jsx)("div",{className:"space-y-2.5 max-h-[200px] overflow-y-auto",children:o.map(e=>{let t=(0,at.getTraderColor)(e.traderId);return(0,x.jsxs)("div",{className:"space-y-1",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,x.jsx)("span",{className:"font-medium",style:{color:t.primary},children:e.traderName}),(0,x.jsxs)("span",{className:"text-muted-foreground",children:[e.completed,"/",e.total," (",e.percentage,"%)"]})]}),(0,x.jsx)(sy,{value:e.percentage,className:"h-1.5",indicatorClassName:"transition-all",style:{"--progress-color":t.primary}})]},e.traderId)})})]})]})})]})}y.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=sM(sV,n);return(0,x.jsx)(ac.Primitive.button,{type:"button",...r,ref:t,onClick:(0,an.composeEventHandlers)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=sV,y.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=sS(n);return(0,x.jsx)(as.Arrow,{...o,...r,ref:t})}).displayName="PopoverArrow",e.s(["ProgressStats",()=>sY],32798),e.s([],57979);var sW=e.i(10012),sG=e.i(73554);function sZ(e){let t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>sZ],5685);var sJ=e.i(40844),s0="Switch",[s1,s2]=(0,ao.createContextScope)(s0),[s5,s3]=s1(s0),s4=y.forwardRef((e,t)=>{let{__scopeSwitch:n,name:r,checked:o,defaultChecked:i,required:a,disabled:s,value:l="on",onCheckedChange:u,form:c,...d}=e,[f,h]=y.useState(null),p=(0,ar.useComposedRefs)(t,e=>h(e)),m=y.useRef(!1),g=!f||c||!!f.closest("form"),[v,b]=(0,af.useControllableState)({prop:o,defaultProp:i??!1,onChange:u,caller:s0});return(0,x.jsxs)(s5,{scope:n,checked:v,disabled:s,children:[(0,x.jsx)(ac.Primitive.button,{type:"button",role:"switch","aria-checked":v,"aria-required":a,"data-state":s9(v),"data-disabled":s?"":void 0,disabled:s,value:l,...d,ref:p,onClick:(0,an.composeEventHandlers)(e.onClick,e=>{b(e=>!e),g&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}),g&&(0,x.jsx)(s7,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:a,disabled:s,form:c,style:{transform:"translateX(-100%)"}})]})});s4.displayName=s0;var s6="SwitchThumb",s8=y.forwardRef((e,t)=>{let{__scopeSwitch:n,...r}=e,o=s3(s6,n);return(0,x.jsx)(ac.Primitive.span,{"data-state":s9(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});s8.displayName=s6;var s7=y.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...o},i)=>{let a=y.useRef(null),s=(0,ar.useComposedRefs)(a,i),l=sZ(n),u=(0,sJ.useSize)(t);return y.useEffect(()=>{let e=a.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==n&&t){let o=new Event("click",{bubbles:r});t.call(e,n),e.dispatchEvent(o)}},[l,n,r]),(0,x.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function s9(e){return e?"checked":"unchecked"}function le({className:e,...t}){return(0,x.jsx)(s4,{"data-slot":"switch",className:(0,ae.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,x.jsx)(s8,{"data-slot":"switch-thumb",className:(0,ae.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}s7.displayName="SwitchBubbleInput",e.s(["Switch",()=>le],32555);var lt=e.i(85902),ln=e.i(45715),lr=e.i(36804),lo=e.i(8139);let li=[{value:"available",label:"Available",color:"#0292c0"},{value:"completed",label:"Completed",color:"#00a700"},{value:"locked",label:"Locked",color:"#636363"}];function la({selectedStatuses:e,onChange:t}){return(0,x.jsxs)(sX,{children:[(0,x.jsx)(sQ,{asChild:!0,children:(0,x.jsxs)(lt.Button,{variant:"outline",size:"sm",className:"h-9 min-w-[120px] justify-between gap-1",children:[(0,x.jsx)("span",{className:"truncate",children:0===e.length?"All Status":1===e.length?li.find(t=>t.value===e[0])?.label:`Status (${e.length})`}),(0,x.jsx)(st.ChevronDown,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),(0,x.jsxs)(sK,{className:"w-[180px] p-2",align:"start",children:[(0,x.jsx)("div",{className:"flex flex-col gap-1",children:li.map(n=>{let r=e.includes(n.value);return(0,x.jsxs)("button",{type:"button",onClick:()=>{var r;return r=n.value,void t(e.includes(r)?e.filter(e=>e!==r):[...e,r])},className:`flex items-center gap-2 w-full px-2 py-1.5 text-sm rounded transition-colors text-left ${r?"bg-primary/10 text-foreground":"hover:bg-muted text-muted-foreground"}`,children:[(0,x.jsx)("span",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:n.color}}),(0,x.jsx)("span",{className:"flex-1",children:n.label}),r&&(0,x.jsx)(lo.Check,{className:"h-4 w-4 shrink-0 text-primary"})]},n.value)})}),(0,x.jsx)("div",{className:"mt-2 pt-2 border-t",children:(0,x.jsx)("button",{type:"button",onClick:()=>t([]),className:"w-full px-2 py-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Clear selection (show all)"})})]})]})}var ls=e.i(83832);let ll={available:"Available",in_progress:"In Progress",completed:"Completed",locked:"Locked"};function lu({label:e,onRemove:t}){return(0,x.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-primary/10 border border-primary/30 rounded-full text-xs text-primary",children:[e,(0,x.jsx)("button",{type:"button",onClick:t,className:"hover:text-primary/80 transition-colors","aria-label":`Remove ${e} filter`,children:(0,x.jsx)(ls.X,{className:"h-3 w-3"})})]})}function lc({filters:e,onRemoveFilter:t,onClearAll:n}){let r=[];return(e.statuses.forEach(e=>{r.push({key:`status-${e}`,label:ll[e],onRemove:()=>t("statuses",e)})}),e.kappaOnly&&r.push({key:"kappa",label:"Kappa Only",onRemove:()=>t("kappaOnly")}),e.playerLevel&&1!==e.playerLevel&&r.push({key:"level",label:`Level ${e.playerLevel}`,onRemove:()=>t("playerLevel")}),0===r.length)?null:(0,x.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,x.jsx)("span",{className:"text-xs text-muted-foreground",children:"Active:"}),r.map(e=>(0,x.jsx)(lu,{label:e.label,onRemove:e.onRemove},e.key)),(0,x.jsx)("button",{type:"button",onClick:n,className:"text-xs text-muted-foreground hover:text-foreground transition-colors ml-1",children:"Clear all"})]})}function ld({traders:e,quests:t,filters:n,onFilterChange:r,onApplyFilters:o}){let i=(0,lr.useUpdateUserPrefs)(),[a,s]=(0,y.useState)(n.search),[l,u]=(0,y.useState)(!1),c=(0,y.useRef)(null),d=(0,y.useRef)(o);(0,y.useEffect)(()=>{d.current=o}),(0,y.useEffect)(()=>{let e=setTimeout(()=>{void 0!==n.playerLevel&&null!==n.playerLevel&&i.mutate({playerLevel:n.playerLevel})},1e3);return()=>clearTimeout(e)},[n.playerLevel]),(0,y.useEffect)(()=>{let e=setTimeout(()=>{a!==n.search&&(r({search:a}),setTimeout(()=>d.current(),100))},500);return()=>clearTimeout(e)},[a,n.search,r]),(0,y.useEffect)(()=>{let e=e=>{let t=e.target;"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||"/"===e.key&&(e.preventDefault(),c.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let f=()=>{s(""),r({statuses:["available","locked"],search:"",kappaOnly:!1,playerLevel:1}),setTimeout(()=>d.current(),0)},h=(0,y.useCallback)(e=>{r(e),setTimeout(()=>d.current(),0)},[r]),p=(0,y.useRef)(null),m=(0,y.useCallback)(e=>{r({playerLevel:e}),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{d.current()},500)},[r]),g=(e,t)=>{"statuses"===e&&t?h({statuses:n.statuses.filter(e=>e!==t)}):"kappaOnly"===e?h({kappaOnly:!1}):"playerLevel"===e&&h({playerLevel:1})},v=[n.statuses.length>0?n.statuses:null,n.kappaOnly,1!==n.playerLevel?n.playerLevel:null].filter(Boolean).length;return(0,x.jsxs)("div",{className:"bg-background border-b",children:[(0,x.jsxs)("div",{className:"md:hidden",children:[(0,x.jsxs)("div",{className:"flex gap-2 px-4 py-2",children:[(0,x.jsx)("div",{className:"flex-1 min-w-0",children:(0,x.jsx)(sW.Input,{type:"text",placeholder:"Search quests...",value:a,onChange:e=>s(e.target.value),className:"h-9"})}),(0,x.jsxs)(ln.Sheet,{open:l,onOpenChange:u,children:[(0,x.jsx)(ln.SheetTrigger,{asChild:!0,children:(0,x.jsxs)(lt.Button,{variant:"outline",size:"sm",className:"relative h-9 px-3",children:[(0,x.jsx)(se,{className:"h-4 w-4 mr-1"}),"Filters",v>0&&(0,x.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-primary-foreground text-xs rounded-full flex items-center justify-center",children:v})]})}),(0,x.jsxs)(ln.SheetContent,{side:"bottom",className:"h-auto max-h-[85vh]",children:[(0,x.jsxs)(ln.SheetHeader,{children:[(0,x.jsx)(ln.SheetTitle,{children:"Filter Quests"}),(0,x.jsx)(ln.SheetDescription,{className:"sr-only",children:"Filter quests by status, level, and more"})]}),(0,x.jsxs)("div",{className:"py-4 space-y-4 overflow-y-auto",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)(sG.Label,{className:"text-xs text-muted-foreground",children:"Status"}),(0,x.jsx)("div",{className:"mt-1",children:(0,x.jsx)(la,{selectedStatuses:n.statuses,onChange:e=>h({statuses:e})})})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)(sG.Label,{htmlFor:"kappa-mobile",className:"text-sm cursor-pointer",children:"Kappa Required Only"}),(0,x.jsx)(le,{id:"kappa-mobile",checked:n.kappaOnly,onCheckedChange:e=>h({kappaOnly:e})})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)(sG.Label,{className:"text-sm",children:"Player Level"}),(0,x.jsx)(sW.Input,{type:"number",min:1,max:79,placeholder:"1-79",value:n.playerLevel??"",onChange:e=>{let t=parseInt(e.target.value);m(isNaN(t)?null:Math.min(79,Math.max(1,t)))},className:"h-9 w-20"})]}),(0,x.jsx)("div",{className:"pt-4 border-t",children:(0,x.jsx)(lt.Button,{variant:"ghost",size:"sm",onClick:f,children:"Reset All"})})]})]})]})]}),v>0&&(0,x.jsx)("div",{className:"px-4 pb-2 overflow-x-auto",children:(0,x.jsx)(lc,{filters:n,onRemoveFilter:g,onClearAll:f})})]}),(0,x.jsxs)("div",{className:"hidden md:block",children:[(0,x.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between gap-4",children:[(0,x.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,x.jsx)("div",{className:"w-[200px]",children:(0,x.jsx)(sW.Input,{ref:c,type:"text",placeholder:"Search quests... (press /)",value:a,onChange:e=>s(e.target.value),className:"h-9"})}),(0,x.jsx)(la,{selectedStatuses:n.statuses,onChange:e=>h({statuses:e})}),(0,x.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,x.jsx)(le,{id:"kappa-desktop",checked:n.kappaOnly,onCheckedChange:e=>h({kappaOnly:e})}),(0,x.jsx)(sG.Label,{htmlFor:"kappa-desktop",className:"text-sm cursor-pointer whitespace-nowrap",children:"Kappa"})]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(sG.Label,{htmlFor:"player-level-desktop",className:"text-sm whitespace-nowrap",children:"Level:"}),(0,x.jsx)(sW.Input,{id:"player-level-desktop",type:"number",min:1,max:79,placeholder:"1-79",value:n.playerLevel??"",onChange:e=>{let t=parseInt(e.target.value);m(isNaN(t)?null:Math.min(79,Math.max(1,t)))},className:"h-9 w-16"})]})]}),(0,x.jsx)(sY,{quests:t,traders:e})]}),v>0&&(0,x.jsx)("div",{className:"px-4 pb-2",children:(0,x.jsx)(lc,{filters:n,onRemoveFilter:g,onClearAll:f})})]})]})}function lf({className:e,...t}){return(0,x.jsx)("div",{"data-slot":"skeleton",className:(0,ae.cn)("bg-accent animate-pulse rounded-md",e),...t})}e.s(["QuestFilters",()=>ld],68957);let lh=[{name:"Prapor",color:at.TRADER_COLORS.prapor.primary,quests:[4,3,2,1]},{name:"Therapist",color:at.TRADER_COLORS.therapist.primary,quests:[3,4,3,2]},{name:"Skier",color:at.TRADER_COLORS.skier.primary,quests:[3,2,3,1]},{name:"Peacekeeper",color:at.TRADER_COLORS.peacekeeper.primary,quests:[2,3,2]}];function lp(){return(0,x.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,x.jsx)(lm,{}),(0,x.jsx)("div",{className:"flex-1 overflow-hidden relative bg-[#1a1a1a]",children:(0,x.jsxs)("div",{className:"absolute inset-0 p-6",children:[(0,x.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:(0,x.jsx)(lb,{})}),(0,x.jsx)("div",{className:"relative",children:lh.map((e,t)=>(0,x.jsx)(lv,{lane:e,laneIndex:t},e.name))})]})})]})}function lm(){return(0,x.jsxs)("div",{className:"flex flex-wrap items-center gap-3 p-3 bg-background border-b",children:[(0,x.jsx)("div",{className:"flex-1 min-w-[200px] max-w-[400px]",children:(0,x.jsx)(lf,{className:"h-9 w-full rounded-md"})}),(0,x.jsx)(lf,{className:"h-9 w-[140px] rounded-md"}),(0,x.jsx)(lf,{className:"h-9 w-[120px] rounded-md"}),(0,x.jsx)(lf,{className:"h-9 w-[80px] rounded-md"}),(0,x.jsx)(lf,{className:"h-9 w-[70px] rounded-md"}),(0,x.jsxs)("div",{className:"flex gap-1 ml-auto",children:[(0,x.jsx)(lf,{className:"h-8 w-8 rounded"}),(0,x.jsx)(lf,{className:"h-8 w-8 rounded"})]})]})}function lg(e){let t=0;for(let n=0;n<e;n++)t+=83*Math.max(...lh[n].quests)+25;return t}function lv({lane:e,laneIndex:t}){let n=Math.max(...e.quests),r=lg(t);return(0,x.jsxs)("div",{className:"absolute flex",style:{top:r,left:0},children:[(0,x.jsx)(lx,{color:e.color,height:83*n}),(0,x.jsx)("div",{className:"flex",style:{marginLeft:20},children:e.quests.map((e,t)=>(0,x.jsx)("div",{className:"flex flex-col",style:{marginLeft:80*(t>0),gap:25},children:Array.from({length:e}).map((e,t)=>(0,x.jsx)(ly,{},t))},t))})]})}function lx({color:e,height:t}){return(0,x.jsx)("div",{className:"rounded border-2 flex items-center justify-center bg-background",style:{width:60,height:Math.max(t,80),borderColor:e},children:(0,x.jsxs)("div",{className:"flex flex-col items-center gap-2",style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:[(0,x.jsx)(lf,{className:"w-3 rounded",style:{height:60,backgroundColor:`${e}40`}}),(0,x.jsx)(lf,{className:"w-2 h-6 rounded"})]})})}function ly(){return(0,x.jsxs)("div",{className:"rounded border-2 p-2 animate-pulse",style:{width:155,height:58,borderColor:"#636363",backgroundColor:"#383945"},children:[(0,x.jsx)(lf,{className:"h-3.5 w-[90%] mb-1.5 bg-[#4a4a4a]"}),(0,x.jsx)(lf,{className:"h-3 w-[60%] mb-2 bg-[#4a4a4a]"}),(0,x.jsx)(lf,{className:"h-3 w-8 rounded bg-[#4a4a4a]"})]})}function lb(){let e=[],t=0;return lh.forEach((n,r)=>{let o=lg(r)+24;n.quests.forEach((r,i)=>{if(i===n.quests.length-1)return;let a=n.quests[i+1],s=104+235*i+155,l=s+80;for(let n=0;n<r;n++){var u,c,d;let i=o+83*n+29;for(let f of(u=n,c=r,0===(d=a)?[]:d>=c?[Math.min(u,d-1)]:[Math.min(Math.floor(u/c*d),d-1)])){let n=o+83*f+29,r=(s+l)/2;e.push((0,x.jsx)("path",{d:`M ${s} ${i} C ${r} ${i}, ${r} ${n}, ${l} ${n}`,stroke:"#4a4a4a",strokeWidth:2,fill:"none",className:"animate-pulse",style:{animationDelay:`${50*t}ms`}},t++))}}})}),(0,x.jsx)(x.Fragment,{children:e})}e.s(["QuestTreeSkeleton",()=>lp],1122);let lw=(0,i4.default)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),lk=(0,i4.default)("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),lj=(0,i4.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function l_({lastSynced:e,isOnline:t,isSaving:n,pendingOfflineCount:r=0}){let[o,i]=(0,y.useState)("");return((0,y.useEffect)(()=>{if(!e)return;let t=()=>{var t;let n,r,o;i((t=e,o=Math.floor((r=Math.floor((n=Math.floor((new Date().getTime()-t.getTime())/1e3))/60))/60),n<5?"just now":n<60?`${n}s ago`:r<60?`${r}m ago`:o<24?`${o}h ago`:t.toLocaleDateString()))};t();let n=setInterval(t,1e4);return()=>clearInterval(n)},[e]),t)?r>0&&!n?(0,x.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-amber-500",children:[(0,x.jsx)(lj,{className:"w-3.5 h-3.5"}),(0,x.jsxs)("span",{children:[r," change",r>1?"s":""," ","pending sync"]})]}):n?(0,x.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,x.jsx)(i9.Loader2,{className:"w-3.5 h-3.5 animate-spin"}),(0,x.jsx)("span",{children:"Saving..."})]}):e?(0,x.jsxs)("div",{className:(0,ae.cn)("flex items-center gap-1.5 text-xs text-muted-foreground","just now"===o&&"text-green-500"),children:["just now"===o?(0,x.jsx)(lo.Check,{className:"w-3.5 h-3.5"}):(0,x.jsx)(lw,{className:"w-3.5 h-3.5"}),(0,x.jsxs)("span",{children:["Synced ",o]})]}):null:(0,x.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-amber-500",children:[(0,x.jsx)(lk,{className:"w-3.5 h-3.5"}),(0,x.jsxs)("span",{children:["Offline",r>0&&` (${r} pending)`]})]})}e.s(["SyncStatusIndicator",()=>l_],28736),e.s([],75746)},22064,e=>{"use strict";let t=(0,e.i(57475).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],22064)},25693,50168,e=>{"use strict";var t=e.i(95),n=e.i(47608),r=e.i(85902),o=e.i(57475);let i=(0,o.default)("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);var a=e.i(26801),s=e.i(82436);let l=(0,o.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var u=e.i(28347);let c=(0,o.default)("focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);var d=e.i(23158);let f=[{icon:i,title:"Click to Complete",description:"Click any quest to mark it as completed. Long-press on mobile for details."},{icon:c,title:"Focus Mode",description:"Double-click a quest to highlight its entire chain of prerequisites and dependents."},{icon:u.Keyboard,title:"Keyboard Navigation",description:"Use arrow keys to navigate, Enter to complete, Space for details, F for focus."},{icon:a.Filter,title:"Smart Filters",description:"Filter by trader, status, or search. Set your PMC level to highlight available quests."},{icon:s.Trophy,title:"Kappa Container",description:"Toggle Kappa-only mode to focus on quests required for the Kappa container."}];function h({open:e,onOpenChange:o,onGetStarted:i,onCatchUp:a}){return(0,t.jsx)(n.Dialog,{open:e,onOpenChange:o,children:(0,t.jsxs)(n.DialogContent,{className:"max-w-md",showCloseButton:!1,children:[(0,t.jsxs)(n.DialogHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-2 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:(0,t.jsx)(l,{className:"h-6 w-6 text-primary"})}),(0,t.jsx)(n.DialogTitle,{className:"text-xl",children:"Welcome to EFT Quest Tracker"}),(0,t.jsx)(n.DialogDescription,{children:"Track your Escape from Tarkov quest progress across all traders."})]}),(0,t.jsx)("div",{className:"py-4 space-y-4",children:f.map((e,n)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-md bg-muted",children:(0,t.jsx)(e.icon,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},n))}),(0,t.jsxs)(n.DialogFooter,{className:"flex-col gap-2 sm:flex-col",children:[(0,t.jsx)(r.Button,{onClick:i,className:"w-full",children:"Start Fresh"}),a&&(0,t.jsxs)(r.Button,{variant:"outline",onClick:a,className:"w-full",children:[(0,t.jsx)(d.FastForward,{className:"h-4 w-4 mr-2"}),"Already mid-wipe? Catch up"]})]})]})})}e.s(["WelcomeModal",()=>h],50168),e.s([],25693)},48541,94363,41118,43040,72150,68946,97203,42673,48828,e=>{"use strict";var t=e.i(57475);let n=(0,t.default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>n],48541);let r=(0,t.default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>r],94363);let o=(0,t.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>o],41118);let i=(0,t.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);e.s(["Key",()=>i],43040);let a=(0,t.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],72150);let s=(0,t.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);e.s(["Square",()=>s],68946);let l=(0,t.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>l],97203);var u=e.i(95);let c=(0,t.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var d=e.i(68169),f=e.i(8139),h=e.i(98844);function p({current:e,target:t,onIncrement:n,onDecrement:r,onComplete:o,disabled:i=!1,isLoading:a=!1}){let s=e>=t,l=e>0&&!i&&!a,p=e<t&&!i&&!a;return(0,u.jsxs)("div",{className:"flex items-center gap-1.5",onClick:e=>e.stopPropagation(),children:[(0,u.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),l&&r()},disabled:!l,className:`
          w-8 h-8 flex items-center justify-center rounded border-2 transition-all
          ${l?"border-muted-foreground/30 hover:border-primary hover:bg-primary/10 text-muted-foreground hover:text-primary":"border-muted/30 text-muted/30 cursor-not-allowed"}
        `,"aria-label":"Decrement progress",children:(0,u.jsx)(c,{className:"w-3.5 h-3.5"})}),(0,u.jsx)("div",{className:`
          text-sm font-medium min-w-[48px] text-center px-2 py-1 rounded
          ${s?"bg-primary/20 text-primary":"bg-muted/50 text-foreground/80"}
        `,role:"spinbutton","aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":t,"aria-label":`Progress: ${e} of ${t}`,children:a?(0,u.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin mx-auto"}):`${e}/${t}`}),(0,u.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),p&&n()},disabled:!p,className:`
          w-8 h-8 flex items-center justify-center rounded border-2 transition-all
          ${p?"border-muted-foreground/30 hover:border-primary hover:bg-primary/10 text-muted-foreground hover:text-primary":"border-muted/30 text-muted/30 cursor-not-allowed"}
        `,"aria-label":"Increment progress",children:(0,u.jsx)(d.Plus,{className:"w-3.5 h-3.5"})}),e<t&&!i&&!a&&(0,u.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),o()},className:" ml-1 px-2 py-1 text-xs rounded border border-primary/30 hover:bg-primary/10 hover:border-primary text-primary/80 hover:text-primary transition-all flex items-center gap-1 ","aria-label":"Mark as complete",children:[(0,u.jsx)(f.Check,{className:"w-3 h-3"}),(0,u.jsx)("span",{className:"hidden sm:inline",children:"Done"})]}),s&&!a&&(0,u.jsx)(f.Check,{className:"w-4 h-4 text-primary ml-1","aria-label":"Completed"})]})}e.s(["ObjectiveCounter",()=>p],42673);var m=e.i(86375);let g=new Map,v=`
query GetQuestDetails($id: ID!) {
  task(id: $id) {
    id
    name
    experience
    finishRewards {
      traderStanding {
        trader {
          name
        }
        standing
      }
      items {
        item {
          name
          shortName
          iconLink
        }
        count
      }
    }
    objectives {
      id
      type
      description
      ... on TaskObjectiveItem {
        item {
          name
          shortName
          iconLink
        }
        items {
          name
          shortName
          iconLink
        }
        count
        foundInRaid
      }
    }
    neededKeys {
      keys {
        name
        shortName
        iconLink
      }
      map {
        name
      }
    }
  }
}
`;async function x(e){let t=g.get(e);if(t)return t;try{let t=await fetch("https://api.tarkov.dev/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:v,variables:{id:e}})});if(!t.ok)return console.error(`Tarkov API error: ${t.status}`),null;let n=await t.json();if(n.errors)return console.error("Tarkov API GraphQL errors:",n.errors),null;let r=n.data?.task;return r&&g.set(e,r),r}catch(e){return console.error("Failed to fetch quest details from tarkov.dev:",e),null}}function y(e){let[t,n]=(0,m.useState)(null),[r,o]=(0,m.useState)(!1),[i,a]=(0,m.useState)(null),s=(0,m.useCallback)(async()=>{if(!e)return void n(null);o(!0),a(null);try{let t=await x(e);t?n(t):a("Quest details not found")}catch(e){a(e instanceof Error?e.message:"Failed to fetch details")}finally{o(!1)}},[e]);return(0,m.useEffect)(()=>{s()},[s]),{details:t,loading:r,error:i,refetch:s}}e.s(["useQuestDetails",()=>y],48828)},7347,e=>{"use strict";var t=e.i(95),n=e.i(83088),r=e.i(94237),o=e.i(52088);let i=(0,r.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function a({className:e,variant:r,asChild:a=!1,...s}){let l=a?n.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,o.cn)(i({variant:r}),e),...s})}e.s(["Badge",()=>a])},46466,13097,71529,6803,e=>{"use strict";var t=e.i(95),n=e.i(86375),r=e.i(9473),o=e.i(22064),i=e.i(17582),a=e.i(48541),s=e.i(71437),l=e.i(94363),u=e.i(41118),c=e.i(98844),d=e.i(88992),f=e.i(43040),h=e.i(72150),p=e.i(68946),m=e.i(97203),g=e.i(42673),v=e.i(8756),x=e.i(48828),y=e.i(47608),b=e.i(45715),w=e.i(85902),k=e.i(7347),j=e.i(99282);function _(e,t,n){if(null!==e.count&&e.count>0){let t=e.count;if(void 0!==n[e.id])return n[e.id]>=t;let r=e.progress?.[0];return r?.target!==null&&r?.target!==void 0&&r.target>0?(r.current??0)>=r.target:r?.completed??!1}return void 0!==t[e.id]?t[e.id]:e.progress?.[0]?.completed??!1}function E({quest:e,details:n,detailsLoading:v,detailsError:x,onStatusChange:y,onObjectiveToggle:b,isSaving:E,onOpenChange:N,objectiveStates:S,numericObjectiveStates:C,onLocalObjectiveToggle:M,onLocalNumericUpdate:O,savingObjectives:A}){let P=j.STATUS_COLORS[e.computedStatus],L="locked"!==e.computedStatus&&!!b,R=e.objectives.filter(e=>_(e,S,C)).length,I=e.objectives.length,T=e.objectives.reduce((e,t)=>{let n=t.map||"Any Location";return e[n]||(e[n]=[]),e[n].push(t),e},{}),D=Object.keys(T),z=e.dependsOn||[],$=n?n.objectives.filter(e=>("giveItem"===e.type||"findQuestItem"===e.type)&&(e.item||e.items&&e.items.length>0)):[],B=n&&(n.experience>0||n.finishRewards.items.length>0||n.finishRewards.traderStanding.length>0),q=n&&n.neededKeys&&n.neededKeys.length>0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(k.Badge,{variant:"outline",style:{borderColor:P.primary,color:P.primary},children:e.computedStatus.replace("_"," ")}),(0,t.jsxs)(k.Badge,{variant:"secondary",children:["Level ",e.levelRequired]}),e.kappaRequired&&(0,t.jsx)(k.Badge,{style:{backgroundColor:"#FFD700",color:"#000"},className:"font-bold",children:"Kappa Required"}),n&&n.experience>0&&(0,t.jsxs)(k.Badge,{variant:"secondary",children:[n.experience.toLocaleString()," XP"]})]}),$.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(u.Package,{className:"w-4 h-4"}),"Required Items (",$.length,")"]}),(0,t.jsx)("ul",{className:"space-y-2",children:$.map(e=>{let n=e.item||e.items?.[0];return n?(0,t.jsxs)("li",{className:"flex items-center gap-3 text-sm",children:[n.iconLink&&(0,t.jsx)("img",{src:n.iconLink,alt:n.shortName,className:"w-8 h-8 object-contain bg-muted rounded"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-foreground/90",children:n.name}),e.count&&e.count>1&&(0,t.jsxs)("span",{className:"text-muted-foreground ml-1",children:["x",e.count]}),e.foundInRaid&&(0,t.jsx)(k.Badge,{variant:"outline",className:"ml-2 text-xs py-0",children:"FIR"})]})]},e.id):null})})]}),q&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(f.Key,{className:"w-4 h-4"}),"Required Keys (",n.neededKeys.length,")"]}),(0,t.jsx)("ul",{className:"space-y-2",children:n.neededKeys.map((e,n)=>e.keys.map(r=>(0,t.jsxs)("li",{className:"flex items-center gap-3 text-sm",children:[r.iconLink&&(0,t.jsx)("img",{src:r.iconLink,alt:r.shortName,className:"w-8 h-8 object-contain bg-muted rounded"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-foreground/90",children:r.name}),e.map&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",e.map.name,")"]})]})]},`${n}-${r.shortName}`)))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(i.Target,{className:"w-4 h-4"}),"Objectives (",R,"/",I,")"]}),I>0&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${R/I*100}%`}})})}),e.objectives.length>0?(0,t.jsx)("div",{className:"space-y-4",children:D.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(o.MapPin,{className:"w-3 h-3 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:e})]}),(0,t.jsx)("ul",{className:"space-y-2",children:T[e].map(e=>{let n=_(e,S,C),r=A.has(e.id),o=null!==e.count&&e.count>0,i=o?void 0!==C[e.id]?C[e.id]:e.progress?.[0]?.current??0:0;return o?(0,t.jsxs)("li",{className:`flex items-start gap-2 text-sm leading-relaxed py-1 -mx-2 px-2 rounded ${n?"text-muted-foreground":"text-foreground/90"}`,children:[(0,t.jsxs)("span",{className:`flex-1 ${n?"line-through":""}`,children:[e.description,e.optional&&(0,t.jsx)(k.Badge,{variant:"outline",className:"ml-2 text-xs py-0",children:"Optional"})]}),(0,t.jsx)(g.ObjectiveCounter,{current:i,target:e.count,disabled:!L,isLoading:r,onIncrement:()=>{if(!L||r)return;let t=Math.min(i+1,e.count);O(e.id,t),b?.(e.id,{current:t})},onDecrement:()=>{if(!L||r)return;let t=Math.max(i-1,0);O(e.id,t),b?.(e.id,{current:t})},onComplete:()=>{L&&!r&&(O(e.id,e.count),b?.(e.id,{current:e.count}))}})]},e.id):(0,t.jsxs)("li",{className:`flex items-start gap-2 text-sm leading-relaxed ${L?"cursor-pointer hover:bg-muted/50 -mx-2 px-2 py-1 rounded":""} ${n?"text-muted-foreground":"text-foreground/90"}`,onClick:L&&!r?()=>{let t=!n;M(e.id,t),b?.(e.id,t)}:void 0,children:[(0,t.jsx)("span",{className:"shrink-0 mt-0.5",children:r?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin text-muted-foreground"}):n?(0,t.jsx)(m.CheckSquare,{className:`w-4 h-4 ${L?"text-primary":"text-muted-foreground"}`}):(0,t.jsx)(p.Square,{className:`w-4 h-4 ${L?"text-muted-foreground hover:text-primary":"text-muted-foreground/50"}`})}),(0,t.jsxs)("span",{className:n?"line-through":"",children:[e.description,e.optional&&(0,t.jsx)(k.Badge,{variant:"outline",className:"ml-2 text-xs py-0",children:"Optional"})]})]},e.id)})})]},e))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No objectives listed"})]}),v&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}),"Loading rewards..."]}),x&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4"}),x]}),B&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(l.Gift,{className:"w-4 h-4"}),"Rewards"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[n.finishRewards.traderStanding.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:n.finishRewards.traderStanding.map((e,n)=>(0,t.jsxs)(k.Badge,{variant:e.standing>=0?"secondary":"destructive",className:"text-xs",children:[e.trader.name," ",e.standing>=0?"+":"",e.standing.toFixed(2)]},n))}),n.finishRewards.items.length>0&&(0,t.jsx)("ul",{className:"space-y-2",children:n.finishRewards.items.map((e,n)=>(0,t.jsxs)("li",{className:"flex items-center gap-3 text-sm",children:[e.item.iconLink&&(0,t.jsx)("img",{src:e.item.iconLink,alt:e.item.shortName,className:"w-8 h-8 object-contain bg-muted rounded"}),(0,t.jsxs)("span",{className:"text-foreground/90",children:[e.item.name,e.count>1&&(0,t.jsxs)("span",{className:"text-muted-foreground ml-1",children:["x",e.count.toLocaleString()]})]})]},n))})]})]}),z.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(s.ChevronRight,{className:"w-4 h-4"}),"Prerequisites (",z.length,")"]}),(0,t.jsx)("ul",{className:"space-y-2",children:z.map(e=>{let n=(0,j.getTraderColor)(e.requiredQuest.traderId),r=e.requirementStatus.includes("complete")?"Complete":e.requirementStatus.includes("active")?"Have Active":e.requirementStatus.join(", ");return(0,t.jsxs)("li",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:n.primary}}),(0,t.jsx)("span",{className:"text-foreground/90",children:e.requiredQuest.title}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",r,")"]})]},e.requiredQuest.id)})})]}),e.dependedOnBy&&e.dependedOnBy.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[(0,t.jsx)(a.Award,{className:"w-4 h-4"}),"Unlocks (",e.dependedOnBy.length,")"]}),(0,t.jsx)("ul",{className:"space-y-2",children:e.dependedOnBy.map(e=>{let n=(0,j.getTraderColor)(e.dependentQuest.traderId);return(0,t.jsxs)("li",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:n.primary}}),(0,t.jsx)("span",{className:"text-foreground/90",children:e.dependentQuest.title})]},e.dependentQuest.id)})})]}),"locked"!==e.computedStatus&&y&&(0,t.jsx)("div",{className:"pt-2 border-t",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(w.Button,{variant:"default",size:"sm",className:"flex-1",disabled:E,onClick:async()=>{await y(e.id),N?.(!1)},children:[E?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(h.CheckCircle,{className:"w-4 h-4 mr-2"}),"completed"===e.computedStatus?"Mark Available":"Complete Quest"]}),e.wikiLink&&(0,t.jsxs)(w.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>window.open(e.wikiLink,"_blank","noopener,noreferrer"),children:[(0,t.jsx)(r.ExternalLink,{className:"w-4 h-4 mr-2"}),"View Wiki"]})]})}),"locked"!==e.computedStatus&&!y&&e.wikiLink&&(0,t.jsx)("div",{className:"pt-2 border-t",children:(0,t.jsxs)(w.Button,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(e.wikiLink,"_blank","noopener,noreferrer"),children:[(0,t.jsx)(r.ExternalLink,{className:"w-4 h-4 mr-2"}),"View on Tarkov Wiki"]})})]})}function N({quest:e,open:r,onOpenChange:o,onStatusChange:i,onObjectiveToggle:a,isSaving:s}){let l=(0,v.useIsMobile)(),{details:u,loading:c,error:d}=(0,x.useQuestDetails)(r&&e?e.id:null),[f,h]=(0,n.useState)({}),[p,m]=(0,n.useState)({}),[g,w]=(0,n.useState)(new Set),k=(0,n.useCallback)(e=>{e||(h({}),m({}),w(new Set)),o(e)},[o]),_=(0,n.useCallback)((e,t)=>{h(n=>({...n,[e]:t})),w(t=>new Set(t).add(e))},[]),N=(0,n.useCallback)((e,t)=>{m(n=>({...n,[e]:t})),w(t=>new Set(t).add(e))},[]),S=(0,n.useCallback)(async(e,t)=>{if(!a)return{questStatusChanged:!1};try{return await a(e,t)}finally{w(t=>{let n=new Set(t);return n.delete(e),n})}},[a]);if(!e)return null;let C=(0,j.getTraderColor)(e.traderId);return l?(0,t.jsx)(b.Sheet,{open:r,onOpenChange:k,children:(0,t.jsxs)(b.SheetContent,{side:"bottom",className:"max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)(b.SheetHeader,{className:"text-left pb-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.primary}}),(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:e.trader.name})]}),(0,t.jsx)(b.SheetTitle,{className:"text-lg",children:e.title}),(0,t.jsxs)(b.SheetDescription,{className:"sr-only",children:["Quest details for ",e.title]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(E,{quest:e,details:u,detailsLoading:c,detailsError:d,onStatusChange:i,onObjectiveToggle:S,isSaving:s,onOpenChange:k,objectiveStates:f,numericObjectiveStates:p,onLocalObjectiveToggle:_,onLocalNumericUpdate:N,savingObjectives:g})})]})}):(0,t.jsx)(y.Dialog,{open:r,onOpenChange:k,children:(0,t.jsxs)(y.DialogContent,{className:"sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)(y.DialogHeader,{className:"pb-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.primary}}),(0,t.jsx)("span",{className:"text-xs font-medium text-muted-foreground",children:e.trader.name})]}),(0,t.jsx)(y.DialogTitle,{className:"text-lg",children:e.title}),(0,t.jsxs)(y.DialogDescription,{className:"sr-only",children:["Quest details for ",e.title]})]}),(0,t.jsx)(E,{quest:e,details:u,detailsLoading:c,detailsError:d,onStatusChange:i,onObjectiveToggle:S,isSaving:s,onOpenChange:k,objectiveStates:f,numericObjectiveStates:p,onLocalObjectiveToggle:_,onLocalNumericUpdate:N,savingObjectives:g})]})})}e.s(["QuestDetailModal",()=>N],13097),e.s([],46466);let S=new Map;async function C(e){let t=S.get(e);if(t)return t;let n=fetch(e);S.set(e,n);try{return(await n).clone()}finally{S.delete(e)}}let M={traderId:null,statuses:["available","locked"],search:"",kappaOnly:!1,map:null,playerLevel:1};function O(e){let t=(0,n.useMemo)(()=>({...M,...e?.initialFilters??{}}),[]),[r,o]=(0,n.useState)([]),[i,a]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[u,c]=(0,n.useState)(!0),[d,f]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null),[m,g]=(0,n.useState)(t),[v,x]=(0,n.useState)(t),y=(0,n.useRef)(m);y.current=m;let b=(0,n.useCallback)(async()=>{try{let e=await C("/api/traders");if(!e.ok)throw Error("Failed to fetch traders");let t=await e.json();l(t.traders)}catch(e){console.error("Error fetching traders:",e)}},[]),w=(0,n.useCallback)(async()=>{try{let e=await C("/api/quests");if(!e.ok)throw Error("Failed to fetch all quests");let t=await e.json();a(t.quests)}catch(e){console.error("Error fetching all quests:",e)}},[]),k=(0,n.useCallback)(async()=>{c(!0),p(null);try{let e=new URLSearchParams;v.kappaOnly&&e.set("kappa","true"),v.search&&e.set("search",v.search);let t=`/api/quests?${e.toString()}`,n=await C(t);if(!n.ok)throw Error("Failed to fetch quests");let r=(await n.json()).quests;v.traderId&&(r=r.filter(e=>e.traderId===v.traderId)),v.statuses.length>0&&(r=r.filter(e=>v.statuses.includes(e.computedStatus))),o(r),f(!1)}catch(e){p(e instanceof Error?e.message:"Unknown error"),f(!1)}finally{c(!1)}},[v]),j=(0,n.useCallback)(e=>{let t={...y.current,...e};y.current=t,g(t)},[]),_=(0,n.useCallback)(()=>{x(y.current)},[]),E=(0,n.useMemo)(()=>JSON.stringify(m)!==JSON.stringify(v),[m,v]),N=(0,n.useCallback)(async()=>{await Promise.all([k(),w()])},[k,w]),S=(0,n.useRef)(!1);(0,n.useEffect)(()=>{S.current||(S.current=!0,Promise.all([b(),w(),k()]))},[b,w,k]);let O=(0,n.useRef)(!0);return(0,n.useEffect)(()=>{if(O.current){O.current=!1;return}k()},[k]),{quests:r,allQuests:i,traders:s,loading:u,initialLoading:d,error:h,filters:m,setFilters:j,applyFilters:_,hasPendingChanges:E,refetch:N}}e.s(["useQuests",()=>O],71529);var A=e.i(97624);let P="eft-tracker-offline-queue";function L(e){try{localStorage.setItem(P,JSON.stringify(e))}catch{}}function R(){let{status:e}=(0,A.useSession)(),[t,r]=(0,n.useState)(new Map),[o,i]=(0,n.useState)(!0),[a,s]=(0,n.useState)(null),[l,u]=(0,n.useState)([]),[c,d]=(0,n.useState)(new Set),[f,h]=(0,n.useState)(null),[p,m]=(0,n.useState)(!0),[g,v]=(0,n.useState)(0),x=(0,n.useRef)(new Map),y=(0,n.useRef)(new Set),b=(0,n.useRef)(function(){try{let e=localStorage.getItem(P);return e?JSON.parse(e):[]}catch{return[]}}()),w=(0,n.useRef)(!1),k=(0,n.useCallback)(async()=>{if(!w.current&&0!==b.current.length&&"authenticated"===e){for(w.current=!0;b.current.length>0&&navigator.onLine;){let e=b.current[0];try{if((await fetch(`/api/progress/${e.questId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status.toUpperCase()})})).ok)b.current.shift(),L(b.current),v(b.current.length),h(new Date);else break}catch{break}}w.current=!1}},[e]);(0,n.useEffect)(()=>{let e=()=>{m(!0),k()},t=()=>m(!1);return m(navigator.onLine),v(b.current.length),window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[k]),(0,n.useEffect)(()=>{p&&"authenticated"===e&&k()},[p,e,k]);let j=(0,n.useCallback)(async()=>{if("authenticated"!==e)return void i(!1);i(!0),s(null);try{let e=await fetch("/api/progress");if(!e.ok){if(401===e.status)return void r(new Map);throw Error("Failed to fetch progress")}let t=await e.json(),n=new Map;for(let e of t.progress)n.set(e.questId,e.status.toLowerCase());r(n),h(new Date)}catch(e){s(e instanceof Error?e.message:"Unknown error")}finally{i(!1)}},[e]),_=(0,n.useCallback)(async(n,o)=>{if("authenticated"!==e)return s("Please sign in to track progress"),!1;if(y.current.has(n))return!1;if(y.current.add(n),setTimeout(()=>y.current.delete(n),300),x.current=new Map(t),d(e=>new Set(e).add(n)),r(e=>{let t=new Map(e);return t.set(n,o),t}),!navigator.onLine){let e=b.current.findIndex(e=>e.questId===n),t={questId:n,status:o,timestamp:Date.now()};return e>=0?b.current[e]=t:b.current.push(t),L(b.current),v(b.current.length),d(e=>{let t=new Set(e);return t.delete(n),t}),!0}try{let e=await fetch(`/api/progress/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:o.toUpperCase()})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update progress")}let t=await e.json();return t.unlockedQuests&&t.unlockedQuests.length>0&&(u(e=>[...e,...t.unlockedQuests]),r(e=>{let n=new Map(e);for(let e of t.unlockedQuests)n.set(e,"available");return n})),t.lockedQuests&&t.lockedQuests.length>0&&r(e=>{let n=new Map(e);for(let e of t.lockedQuests)n.set(e,"locked");return n}),h(new Date),s(null),!0}catch(e){return r(x.current),s(e instanceof Error?e.message:"Failed to update"),!1}finally{d(e=>{let t=new Set(e);return t.delete(n),t})}},[t,e]),E=(0,n.useCallback)(e=>t.get(e),[t]),N=(0,n.useCallback)(async()=>{await j()},[j]),S=(0,n.useCallback)(()=>{u([])},[]);return(0,n.useEffect)(()=>{"authenticated"===e?j():"unauthenticated"===e&&(r(new Map),i(!1))},[e,j]),{progress:t,isLoading:o,error:a,updateStatus:_,getStatus:E,refreshProgress:N,unlockedQuests:l,clearUnlocked:S,savingQuestIds:c,lastSynced:f,isOnline:p,pendingOfflineCount:g}}e.s(["useProgress",()=>R],6803)},16778,e=>{"use strict";var t=e.i(95),n=e.i(86375),r=e.i(97624),o=e.i(83832),i=e.i(85902);function a(){let{status:e}=(0,r.useSession)(),[a,s]=(0,n.useState)(!1);return"authenticated"===e||"loading"===e||a?null:(0,t.jsx)("div",{className:"bg-primary/10 border-b border-primary/20 px-3 py-2",children:(0,t.jsxs)("div",{className:"container mx-auto flex items-center justify-between gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-foreground",children:"You're browsing as a guest. Your progress won't be saved."}),(0,t.jsxs)(i.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>s(!0),children:[(0,t.jsx)(o.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})})}e.s(["GuestBanner",()=>a])}]);