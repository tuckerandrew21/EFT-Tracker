[variables]
# Force Node.js 22.12 to match Prisma requirements
NIXPACKS_NODE_VERSION = "22.12.0"

[phases.install]
cmds = ["pnpm install --frozen-lockfile"]

[phases.build]
cmds = [
  "pnpm --filter @eft-tracker/web run prisma:generate",
  "pnpm --filter @eft-tracker/web run build"
]

[start]
cmd = "node apps/web/.next/standalone/server.js"
